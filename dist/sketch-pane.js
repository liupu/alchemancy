var SketchPane=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist",i(i.s=200)}([function(t,e,i){"use strict";e.__esModule=!0;e.VERSION="4.7.1",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var r=i(0);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var n=i(4);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var s=i(5);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return q(s).default}});var a=i(31);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return q(a).default}});var o=i(76);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return q(o).default}});var h=i(15);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return q(h).default}});var u=i(74);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return q(u).default}});var l=i(75);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return q(l).default}});var c=i(29);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return q(c).default}});var d=i(27);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return q(d).default}});var f=i(168);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return q(f).default}});var p=i(23);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return q(p).default}});var g=i(165);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return q(g).default}});var v=i(149);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return q(v).default}});var _=i(61);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return q(_).default}});var m=i(60);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return q(m).default}});var y=i(147);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return q(y).default}});var x=i(59);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return q(x).default}});var b=i(145);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return q(b).default}});var w=i(138);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return q(w).default}});var T=i(137);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return q(T).default}});var S=i(7);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return q(S).default}});var E=i(63);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return q(E).default}});var C=i(9);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return q(C).default}});var P=i(24);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return q(P).default}});var O=i(68);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return q(O).default}});var M=i(71);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return q(M).default}});var A=i(70);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return q(A).default}});var I=i(67);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return q(I).default}});var k=i(12);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return q(k).default}});var R=i(13);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return q(R).default}});var D=i(19);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return q(D).default}});var L=i(17);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return q(L).default}});var N=i(62);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return q(N).default}});var F=i(65);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return q(F).default}});var B=i(64);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return q(B).default}});var j=i(58);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return q(j).default}});var U=i(57);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return U.autoDetectRenderer}});var z=W(i(2)),V=W(i(25)),X=q(i(3)),H=q(i(14)),G=q(i(18));function W(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function q(t){return t&&t.__esModule?t:{default:t}}e.settings=X.default,e.utils=z,e.ticker=V,e.CanvasRenderer=H.default,e.WebGLRenderer=G.default},function(t,e,i){"use strict";e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++p},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var i=n.default.RETINA_PREFIX.exec(t);if(i)return parseFloat(i[1]);return void 0!==e?e:1},e.decomposeDataUri=function(t){var e=r.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]};return},e.getUrlFileExtension=function(t){var e=r.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase();return},e.getSvgSize=function(t){var e=r.SVG_SIZE.exec(t),i={};e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7])));return i},e.skipHello=function(){g=!0},e.sayHello=function(t){if(g)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+t+" - http://www.pixijs.com/");g=!0},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.destroyTextureCache=function(){var t=void 0;for(t in v)v[t].destroy();for(t in _)_[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in v)delete v[t];for(t in _)delete _[t]},e.correctBlendMode=function(t,e){return m[e?1:0][t]},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)},e.premultiplyRgba=function(t,e,i,r){i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]);return i[3]=e,i},e.premultiplyTintToRgba=function(t,e,i,r){(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e);return i[3]=e,i};var r=i(0),n=f(i(3)),s=f(i(8)),a=f(i(180)),o=d(i(179)),h=d(i(30)),u=f(i(178)),l=f(i(177)),c=f(i(28));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var p=0,g=!1;e.isMobile=h,e.removeItems=u.default,e.EventEmitter=s.default,e.pluginTarget=a.default,e.mixins=o,e.earcut=c.default;var v=e.TextureCache=Object.create(null),_=e.BaseTextureCache=Object.create(null);var m=e.premultiplyBlendMode=(0,l.default)()},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(182)),n=s(i(181));function s(t){return t&&t.__esModule?t:{default:t}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,n.default)(),MESH_CANVAS_PADDING:0}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(35);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d(r).default}});var n=i(87);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return d(n).default}});var s=i(34);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return d(s).default}});var a=i(86);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return d(a).default}});var o=i(192);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return d(o).default}});var h=i(191);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return d(h).default}});var u=i(190);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return d(u).default}});var l=i(33);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return d(l).default}});var c=i(189);function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return d(c).default}})},function(t,e,i){var r={createContext:i(188),setVertexAttribArrays:i(85),GLBuffer:i(187),GLFramebuffer:i(186),GLShader:i(185),GLTexture:i(84),VertexArrayObject:i(184),shader:i(183)};void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e,i){(function(t){function i(t,e){for(var i=0,r=t.length-1;r>=0;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return r.exec(t).slice(1)};function s(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}e.resolve=function(){for(var e="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var a=n>=0?arguments[n]:t.cwd();if("string"!=typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,r="/"===a.charAt(0))}return e=i(s(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},e.normalize=function(t){var r=e.isAbsolute(t),n="/"===a(t,-1);return(t=i(s(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&n&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(s(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,i){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=e.resolve(t).substr(1),i=e.resolve(i).substr(1);for(var n=r(t.split("/")),s=r(i.split("/")),a=Math.min(n.length,s.length),o=a,h=0;h<a;h++)if(n[h]!==s[h]){o=h;break}var u=[];for(h=o;h<n.length;h++)u.push("..");return(u=u.concat(s.slice(o))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=n(t),i=e[0],r=e[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},e.basename=function(t,e){var i=n(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},e.extname=function(t){return n(t)[3]};var a="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,i(162))},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(i(9)),s=c(i(71)),a=c(i(70)),o=c(i(8)),h=i(4),u=i(2),l=c(i(3));function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(i,r,n,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(o.noFrame=!1,r||(o.noFrame=!0,r=new h.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),o.baseTexture=i,o._frame=r,o.trim=s,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=n||r,o._rotate=Number(a||0),!0===a)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(o.noFrame&&(r=new h.Rectangle(0,0,i.width,i.height),i.on("update",o.onBaseTextureUpdated,o)),o.frame=r):i.once("loaded",o.onBaseTextureLoaded,o),o._updateID=0,o.transform=null,o.textureCacheIds=[],o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(u.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new a.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,r,s){var a=u.TextureCache[t];return a||(a=new e(n.default.fromImage(t,i,r,s)),e.addToCache(a,t)),a},e.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(n.default.fromCanvas(t,i,r))},e.fromVideo=function(t,i){return"string"==typeof t?e.fromVideoUrl(t,i):new e(s.default.fromVideo(t,i))},e.fromVideoUrl=function(t,i){return new e(s.default.fromUrl(t,i))},e.from=function(t){if("string"==typeof t){var i=u.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(n.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,l.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof n.default?new e(t):t},e.fromLoader=function(t,i,r){var s=new n.default(t,void 0,(0,u.getResolutionOfUrl)(i)),a=new e(s);return s.imageUrl=i,r||(r=i),n.default.addToCache(a.baseTexture,r),e.addToCache(a,r),r!==i&&(n.default.addToCache(a.baseTexture,i),e.addToCache(a,i)),a},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),u.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),u.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=u.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete u.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)u.TextureCache[t.textureCacheIds[r]]===t&&delete u.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},r(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,s=e+r>this.baseTexture.width,a=i+n>this.baseTexture.height;if(s||a){var o=s&&a?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,u="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+o+" "+u)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(o.default);function f(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.default=d,d.EMPTY=new d(new n.default),f(d.EMPTY),f(d.EMPTY.baseTexture),d.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new d(new n.default(t))}(),f(d.WHITE),f(d.WHITE.baseTexture)},function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function s(){}function a(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},o.prototype.listeners=function(t,e){var i=n?n+t:t,r=this._events[i];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var s=0,a=r.length,o=new Array(a);s<a;s++)o[s]=r[s].fn;return o},o.prototype.emit=function(t,e,i,r,s,a){var o=n?n+t:t;if(!this._events[o])return!1;var h,u,l=this._events[o],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,r),!0;case 5:return l.fn.call(l.context,e,i,r,s),!0;case 6:return l.fn.call(l.context,e,i,r,s,a),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,i);break;case 4:l[u].fn.call(l[u].context,e,i,r);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];l[u].fn.apply(l[u].context,h)}}return!0},o.prototype.on=function(t,e,i){var r=new a(e,i||this),s=n?n+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},o.prototype.once=function(t,e,i){var r=new a(e,i||this,!0),s=n?n+t:t;return this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):(this._events[s]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,i,r){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return 0==--this._eventsCount?this._events=new s:delete this._events[a],this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new s:delete this._events[a]);else{for(var h=0,u=[],l=o.length;h<l;h++)(o[h].fn!==e||r&&!o[h].once||i&&o[h].context!==i)&&u.push(o[h]);u.length?this._events[a]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new s:delete this._events[a]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new s:delete this._events[e])):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=n,o.EventEmitter=o,t.exports=o},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=h(i(3)),s=h(i(8)),a=h(i(73)),o=h(i(26));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o.uid=(0,r.uid)(),o.touched=0,o.resolution=a||n.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==s?s:n.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=n.default.MIPMAP_TEXTURES,o.wrapMode=n.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=o.default.isPow2(this.realWidth)&&o.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,r.getSvgSize)(t),n=i.width,s=i.height;if(!n||!s)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(s*this.sourceScale),this._updateDimensions();var a=document.createElement("canvas");a.width=this.realWidth,a.height=this.realHeight,a._pixiId="canvas_"+(0,r.uid)(),a.getContext("2d").drawImage(this.source,0,0,n,s,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=a,e.addToCache(this,a._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,s){var o=r.BaseTextureCache[t];if(!o){var h=new Image;void 0===i&&0!==t.indexOf("data:")?h.crossOrigin=(0,a.default)(t):i&&(h.crossOrigin="string"==typeof i?i:"anonymous"),(o=new e(h,n)).imageUrl=t,s&&(o.sourceScale=s),o.resolution=(0,r.getResolutionOfUrl)(t),h.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,r.uid)());var s=r.BaseTextureCache[t._pixiId];return s||(s=new e(t,i),e.addToCache(s,t._pixiId)),s},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var s=t.src,a=r.BaseTextureCache[s];return a||((a=new e(t,i)).imageUrl=s,n&&(a.sourceScale=n),a.resolution=(0,r.getResolutionOfUrl)(s),e.addToCache(a,s)),a}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(s.default);e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),a=i(7),o=(r=a)&&r.__esModule?r:{default:r};var h=new s.Point,u=new s.Polygon,l=function(t){function e(i,r,n,a,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return u._texture=i||o.default.EMPTY,u.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),u.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),u.indices=a||new Uint16Array([0,1,3,2]),u.dirty=0,u.indexDirty=0,u.blendMode=s.BLEND_MODES.NORMAL,u.canvasPadding=s.settings.MESH_CANVAS_PADDING,u.drawMode=h||e.DRAW_MODES.TRIANGLE_MESH,u.shader=null,u.tintRgb=new Float32Array([1,1,1]),u._glDatas={},u._uvTransform=new s.TextureMatrix(u._texture),u.uploadUvTransform=!1,u.pluginName="mesh",u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,h);for(var i=this.vertices,r=u.points,n=this.indices,s=this.indices.length,a=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,o=0;o+2<s;o+=a){var l=2*n[o],c=2*n[o+1],d=2*n[o+2];if(r[0]=i[l],r[1]=i[l+1],r[2]=i[c],r[3]=i[c+1],r[4]=i[d],r[5]=i[d+1],u.contains(h.x,h.y))return!0}return!1},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return s.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=s.utils.hex2rgb(t,this.tintRgb)}}]),e}(s.Container);e.default=l,l.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,i){"use strict";var r=i(113).default,n=i(21).default,s=i(42),a=i(41);r.Resource=n,r.async=s,r.base64=a,t.exports=r,t.exports.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),s=i(3),a=(r=s)&&r.__esModule?r:{default:r};function o(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var h=function(t){function e(i,r,n,s,h){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,o(r,h||a.default.PRECISION_VERTEX),o(n,h||a.default.PRECISION_FRAGMENT),void 0,s))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.GLShader);e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=l(i(69)),n=l(i(167)),s=l(i(67)),a=l(i(166)),o=i(2),h=i(0),u=l(i(3));function l(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,r,s));return o.type=h.RENDERER_TYPE.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new n.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,a.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,r,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var a=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new s.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=t),!n){var u=t.parent,l=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=u}o.save(),o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=h.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=o,t.renderCanvas(this),this.context=c,o.restore(),this.resolution=a,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=u.default.SCALE_MODE===h.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);e.default=c,o.pluginTarget.mixin(c)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(2),a=i(76);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,r="number"==typeof e?e:this.children.length,n=r-i,s=void 0;if(n>0&&n<=r){s=this.children.splice(i,n);for(var a=0;a<s.length;++a)s[a].parent=null,s[a].transform&&(s[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var o=0;o<s.length;++o)s[o].emit("removed",this);return s}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,s=this.children.length;n<s;n++)this.children[n].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);e.default=o,o.prototype.containerUpdateTransform=o.prototype.updateTransform},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.nativeLines?function(t,e){var i=0,r=t.points;if(0===r.length)return;var s=e.points,a=r.length/2,o=(0,n.hex2rgb)(t.lineColor),h=t.lineAlpha,u=o[0]*h,l=o[1]*h,c=o[2]*h;for(i=1;i<a;i++){var d=r[2*(i-1)],f=r[2*(i-1)+1],p=r[2*i],g=r[2*i+1];s.push(d,f),s.push(u,l,c,h),s.push(p,g),s.push(u,l,c,h)}}(t,i):function(t,e){var i=t.points;if(0===i.length)return;var s=new r.Point(i[0],i[1]),a=new r.Point(i[i.length-2],i[i.length-1]);if(s.x===a.x&&s.y===a.y){(i=i.slice()).pop(),i.pop();var o=(a=new r.Point(i[i.length-2],i[i.length-1])).x+.5*(s.x-a.x),h=a.y+.5*(s.y-a.y);i.unshift(o,h),i.push(o,h)}var u=e.points,l=e.indices,c=i.length/2,d=i.length,f=u.length/6,p=t.lineWidth/2,g=(0,n.hex2rgb)(t.lineColor),v=t.lineAlpha,_=g[0]*v,m=g[1]*v,y=g[2]*v,x=i[0],b=i[1],w=i[2],T=i[3],S=0,E=0,C=-(b-T),P=x-w,O=0,M=0,A=0,I=0,k=Math.sqrt(C*C+P*P);C/=k,P/=k,C*=p,P*=p,u.push(x-C,b-P,_,m,y,v),u.push(x+C,b+P,_,m,y,v);for(var R=1;R<c-1;++R){x=i[2*(R-1)],b=i[2*(R-1)+1],w=i[2*R],T=i[2*R+1],S=i[2*(R+1)],E=i[2*(R+1)+1],C=-(b-T),P=x-w,k=Math.sqrt(C*C+P*P),C/=k,P/=k,C*=p,P*=p,O=-(T-E),M=w-S,k=Math.sqrt(O*O+M*M),O/=k,M/=k;var D=-P+b-(-P+T),L=-C+w-(-C+x),N=(-C+x)*(-P+T)-(-C+w)*(-P+b),F=-(M*=p)+E-(-M+T),B=-(O*=p)+w-(-O+S),j=(-O+S)*(-M+T)-(-O+w)*(-M+E),U=D*B-F*L;if(Math.abs(U)<.1)U+=10.1,u.push(w-C,T-P,_,m,y,v),u.push(w+C,T+P,_,m,y,v);else{var z=(L*j-B*N)/U,V=(F*N-D*j)/U,X=(z-w)*(z-w)+(V-T)*(V-T);X>196*p*p?(A=C-O,I=P-M,k=Math.sqrt(A*A+I*I),A/=k,I/=k,A*=p,I*=p,u.push(w-A,T-I),u.push(_,m,y,v),u.push(w+A,T+I),u.push(_,m,y,v),u.push(w-A,T-I),u.push(_,m,y,v),d++):(u.push(z,V),u.push(_,m,y,v),u.push(w-(z-w),T-(V-T)),u.push(_,m,y,v))}}x=i[2*(c-2)],b=i[2*(c-2)+1],w=i[2*(c-1)],T=i[2*(c-1)+1],C=-(b-T),P=x-w,k=Math.sqrt(C*C+P*P),C/=k,P/=k,C*=p,P*=p,u.push(w-C,T-P),u.push(_,m,y,v),u.push(w+C,T+P),u.push(_,m,y,v),l.push(f);for(var H=0;H<d;++H)l.push(f++);l.push(f-1)}(t,e)};var r=i(4),n=i(2)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(4),s=i(0),a=i(3),o=(r=a)&&r.__esModule?r:{default:r},h=i(5);var u=function(){function t(e,i,r,a,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=u||o.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0!==a?a:o.default.SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new h.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=h.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===s.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var r=m(i(69)),n=m(i(164)),s=m(i(161)),a=m(i(160)),o=m(i(17)),h=m(i(19)),u=m(i(158)),l=m(i(9)),c=m(i(157)),d=m(i(156)),f=m(i(154)),p=m(i(153)),g=i(2),v=m(i(5)),_=i(0);function m(t){return t&&t.__esModule?t:{default:t}}var y=0,x=function(t){function e(i,r,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,r,a));return o.legacy=o.options.legacy,o.legacy&&(v.default.VertexArrayObject.FORCE_NATIVE=!0),o.type=_.RENDERER_TYPE.WEBGL,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o.view.addEventListener("webglcontextlost",o.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",o.handleContextRestored,!1),o._contextOptions={alpha:o.transparent,antialias:o.options.antialias,premultipliedAlpha:o.transparent&&"notMultiplied"!==o.transparent,stencil:!0,preserveDrawingBuffer:o.options.preserveDrawingBuffer,powerPreference:o.options.powerPreference},o._backgroundColorRgba[3]=o.transparent?0:1,o.maskManager=new n.default(o),o.stencilManager=new s.default(o),o.emptyRenderer=new h.default(o),o.currentRenderer=o.emptyRenderer,o.textureManager=null,o.filterManager=null,o.initPlugins(),o.options.context&&(0,p.default)(o.options.context),o.gl=o.options.context||v.default.createContext(o.view,o._contextOptions),o.CONTEXT_UID=y++,o.state=new d.default(o.gl),o.renderingToScreen=!0,o.boundTextures=null,o._activeShader=null,o._activeVao=null,o._activeRenderTarget=null,o._initContext(),o.drawModes=(0,f.default)(o.gl),o._nextTextureLocation=0,o.setBlendMode(0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new u.default(this),this.filterManager=new a.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new o.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new v.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var s=new l.default;s._glTextures[this.CONTEXT_UID]=i,this.boundTextures[n]=r,this.emptyTextures[n]=s,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var s=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){r.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(i=r._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,s=t._glTextures[this.CONTEXT_UID];return s?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,s.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new v.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);e.default=x,g.pluginTarget.mixin(x)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(13);var s=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(37),a=(r=s)&&r.__esModule?r:{default:r};var o=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;var h=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new a.default(n.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(p),this.registerFindHook(g),this.registerFindHook(u),this.registerFindHook(l),this.registerFindHook(c),this.registerUploadHook(d),this.registerUploadHook(f)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var s=this.completes.slice(0);this.completes.length=0;for(var a=0,h=s.length;a<h;a++)s[a]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},t.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function u(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof n.Texture){var s=t._textures[r].baseTexture;-1===e.indexOf(s)&&(e.push(s),i=!0)}return i}function l(t,e){return t instanceof n.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){if(t._texture&&t._texture instanceof n.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function d(t,e){return e instanceof n.Text&&(e.updateText(!0),!0)}function f(t,e){if(e instanceof n.TextStyle){var i=e.toFontString();return n.TextMetrics.measureFont(i),!0}return!1}function p(t,e){if(t instanceof n.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function g(t,e){return t instanceof n.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=a(i(43)),s=a(i(44));function a(t){return t&&t.__esModule?t:{default:t}}var o=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null;function u(){}var l=function(){function t(e,i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=u,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(i)},1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:o&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(d(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(d(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,h||(h=document.createElement("a")),h.href=t;var i=!(t=(0,n.default)(h.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),s=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function d(t){return t.toString().replace("object ","")}e.default=l,l.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},l.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},l.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},l.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},l._loadTypeMap={gif:l.LOAD_TYPE.IMAGE,png:l.LOAD_TYPE.IMAGE,bmp:l.LOAD_TYPE.IMAGE,jpg:l.LOAD_TYPE.IMAGE,jpeg:l.LOAD_TYPE.IMAGE,tif:l.LOAD_TYPE.IMAGE,tiff:l.LOAD_TYPE.IMAGE,webp:l.LOAD_TYPE.IMAGE,tga:l.LOAD_TYPE.IMAGE,svg:l.LOAD_TYPE.IMAGE,"svg+xml":l.LOAD_TYPE.IMAGE,mp3:l.LOAD_TYPE.AUDIO,ogg:l.LOAD_TYPE.AUDIO,wav:l.LOAD_TYPE.AUDIO,mp4:l.LOAD_TYPE.VIDEO,webm:l.LOAD_TYPE.VIDEO},l._xhrTypeMap={xhtml:l.XHR_RESPONSE_TYPE.DOCUMENT,html:l.XHR_RESPONSE_TYPE.DOCUMENT,htm:l.XHR_RESPONSE_TYPE.DOCUMENT,xml:l.XHR_RESPONSE_TYPE.DOCUMENT,tmx:l.XHR_RESPONSE_TYPE.DOCUMENT,svg:l.XHR_RESPONSE_TYPE.DOCUMENT,tsx:l.XHR_RESPONSE_TYPE.DOCUMENT,gif:l.XHR_RESPONSE_TYPE.BLOB,png:l.XHR_RESPONSE_TYPE.BLOB,bmp:l.XHR_RESPONSE_TYPE.BLOB,jpg:l.XHR_RESPONSE_TYPE.BLOB,jpeg:l.XHR_RESPONSE_TYPE.BLOB,tif:l.XHR_RESPONSE_TYPE.BLOB,tiff:l.XHR_RESPONSE_TYPE.BLOB,webp:l.XHR_RESPONSE_TYPE.BLOB,tga:l.XHR_RESPONSE_TYPE.BLOB,json:l.XHR_RESPONSE_TYPE.JSON,text:l.XHR_RESPONSE_TYPE.TEXT,txt:l.XHR_RESPONSE_TYPE.TEXT,ttf:l.XHR_RESPONSE_TYPE.BUFFER,otf:l.XHR_RESPONSE_TYPE.BUFFER},l.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,i=new Uint16Array(e),r=0,n=0;r<e;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(2),s=i(66);var a={getTintedTexture:function(t,e){var i=t._texture,r="#"+("00000"+(0|(e=a.roundColor(e))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[r],s=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[r];s=i.tintCache[r]}else s=a.canvas||document.createElement("canvas");if(a.tintMethod(i,e,s),s.tintId=i._updateID,a.convertTintToImage){var o=new Image;o.src=s.toDataURL(),i.tintCache[r]=o}else i.tintCache[r]=s,a.canvas=null;return s},tintWithMultiply:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),s=t.baseTexture.resolution;n.x*=s,n.y*=s,n.width*=s,n.height*=s,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),s=t.baseTexture.resolution;n.x*=s,n.y*=s,n.width*=s,n.height*=s,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),s=t._frame.clone(),a=t.baseTexture.resolution;s.x*=a,s.y*=a,s.width*=a,s.height*=a,i.width=Math.ceil(s.width),i.height=Math.ceil(s.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),r.restore();for(var o=(0,n.hex2rgb)(e),h=o[0],u=o[1],l=o[2],c=r.getImageData(0,0,s.width,s.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=h,d[f+1]*=u,d[f+2]*=l;r.putImageData(c,0,0)},roundColor:function(t){var e=a.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((r=s)&&r.__esModule?r:{default:r}).default)(),tintMethod:0};a.tintMethod=a.canUseMultiply?a.tintWithMultiply:a.tintWithPerPixel,e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=n(i(68));function n(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=null;if(!(i instanceof r.default)){var a=arguments[1],o=arguments[2],h=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+a+", "+o+") instead of the ctor directly."),s=arguments[0],n=null,i=new r.default(a,o,h,u)}var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,n));return l.legacyRenderer=s,l.valid=!0,l._updateUvs(),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,s){return new e(new r.default(t,i,n,s))},e}(n(i(7)).default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var r,n=i(170),s=(r=n)&&r.__esModule?r:{default:r};var a=new s.default;a.autoStart=!0,a.destroy=function(){},e.shared=a,e.Ticker=s.default},function(t,e,i){"use strict";"use restrict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,r=e,n=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=1&i,--n;t[e]=r<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(4),s=i(2),a=i(0),o=u(i(7)),h=u(i(15));function u(t){return t&&t.__esModule?t:{default:t}}var l=new n.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._anchor=new n.ObservablePoint(r._onAnchorUpdate,r),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=a.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||o.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,a=e.tx,o=e.ty,h=this.vertexData,u=t.trim,l=t.orig,c=this._anchor,d=0,f=0,p=0,g=0;u?(d=(f=u.x-c._x*l.width)+u.width,p=(g=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),h[0]=i*f+n*g+a,h[1]=s*g+r*f+o,h[2]=i*d+n*g+a,h[3]=s*g+r*d+o,h[4]=i*d+n*p+a,h[5]=s*p+r*d+o,h[6]=i*f+n*p+a,h[7]=s*p+r*f+o}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,s=n.a,a=n.b,o=n.c,h=n.d,u=n.tx,l=n.ty,c=-r._x*i.width,d=c+i.width,f=-r._y*i.height,p=f+i.height;e[0]=s*c+o*f+u,e[1]=h*f+a*c+l,e[2]=s*d+o*f+u,e[3]=h*f+a*d+l,e[4]=s*d+o*p+u,e[5]=h*p+a*d+l,e[6]=s*c+o*p+u,e[7]=h*p+a*c+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,l);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return l.x>=r&&l.x<r+e&&(n=-i*this.anchor.y,l.y>=n&&l.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(o.default.from(t))},e.fromFrame=function(t){var i=s.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,r){return new e(o.default.fromImage(t,i,r))},r(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,s.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,s.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(h.default);e.default=c},function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,o,h,u,l,f,g,v=e&&e.length,_=v?e[0]*i:t.length,m=n(t,0,_,i,!0),y=[];if(!m)return y;if(v&&(m=function(t,e,i,r){var a,o,h,u,l,f=[];for(a=0,o=e.length;a<o;a++)h=e[a]*r,u=a<o-1?e[a+1]*r:t.length,(l=n(t,h,u,r,!1))===l.next&&(l.steiner=!0),f.push(p(l));for(f.sort(c),a=0;a<f.length;a++)d(f[a],i),i=s(i,i.next);return i}(t,e,m,i)),t.length>80*i){r=h=t[0],o=u=t[1];for(var x=i;x<_;x+=i)l=t[x],f=t[x+1],l<r&&(r=l),f<o&&(o=f),l>h&&(h=l),f>u&&(u=f);g=0!==(g=Math.max(h-r,u-o))?1/g:0}return a(m,y,i,r,o,g),y}function n(t,e,i,r,n){var s,a;if(n===E(t,e,i,r)>0)for(s=e;s<i;s+=r)a=w(s,t[s],t[s+1],a);else for(s=i-r;s>=e;s-=r)a=w(s,t[s],t[s+1],a);return a&&m(a,a.next)&&(T(a),a=a.next),a}function s(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!m(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(T(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function a(t,e,i,r,n,c,d){if(t){!d&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=f(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,a,o,h,u=1;do{for(i=t,t=null,s=null,a=0;i;){for(a++,r=i,o=0,e=0;e<u&&(o++,r=r.nextZ);e++);for(h=u;o>0||h>0&&r;)0!==o&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,o--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,u*=2}while(a>1)}(n)}(t,r,n,c);for(var p,g,v=t;t.prev!==t.next;)if(p=t.prev,g=t.next,c?h(t,r,n,c):o(t))e.push(p.i/i),e.push(t.i/i),e.push(g.i/i),T(t),t=g.next,v=g.next;else if((t=g)===v){d?1===d?a(t=u(t,e,i),e,i,r,n,c,2):2===d&&l(t,e,i,r,n,c):a(s(t),e,i,r,n,c,1);break}}}function o(t){var e=t.prev,i=t,r=t.next;if(_(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(g(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&_(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function h(t,e,i,r){var n=t.prev,s=t,a=t.next;if(_(n,s,a)>=0)return!1;for(var o=n.x<s.x?n.x<a.x?n.x:a.x:s.x<a.x?s.x:a.x,h=n.y<s.y?n.y<a.y?n.y:a.y:s.y<a.y?s.y:a.y,u=n.x>s.x?n.x>a.x?n.x:a.x:s.x>a.x?s.x:a.x,l=n.y>s.y?n.y>a.y?n.y:a.y:s.y>a.y?s.y:a.y,c=f(o,h,e,i,r),d=f(u,l,e,i,r),p=t.prevZ,v=t.nextZ;p&&p.z>=c&&v&&v.z<=d;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&g(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&g(n.x,n.y,s.x,s.y,a.x,a.y,p.x,p.y)&&_(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=d;){if(v!==t.prev&&v!==t.next&&g(n.x,n.y,s.x,s.y,a.x,a.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function u(t,e,i){var r=t;do{var n=r.prev,s=r.next.next;!m(n,s)&&y(n,r,r.next,s)&&x(n,s)&&x(s,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(s.i/i),T(r),T(r.next),r=t=s),r=r.next}while(r!==t);return r}function l(t,e,i,r,n,o){var h=t;do{for(var u=h.next.next;u!==h.prev;){if(h.i!==u.i&&v(h,u)){var l=b(h,u);return h=s(h,h.next),l=s(l,l.next),a(h,e,i,r,n,o),void a(l,e,i,r,n,o)}u=u.next}h=h.next}while(h!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var i,r=e,n=t.x,s=t.y,a=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var o=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=n&&o>a){if(a=o,o===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===a)return i.prev;var h,u=i,l=i.x,c=i.y,d=1/0;r=i.next;for(;r!==u;)n>=r.x&&r.x>=l&&n!==r.x&&g(s<c?n:a,s,l,c,s<c?a:n,s,r.x,r.y)&&((h=Math.abs(s-r.y)/(n-r.x))<d||h===d&&r.x>i.x)&&x(r,t)&&(i=r,d=h),r=r.next;return i}(t,e)){var i=b(e,t);s(i,i.next)}}function f(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,r,n,s,a,o){return(n-a)*(e-o)-(t-a)*(s-o)>=0&&(t-a)*(r-o)-(i-a)*(e-o)>=0&&(i-a)*(s-o)-(n-a)*(r-o)>=0}function v(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function m(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,r){return!!(m(t,e)&&m(i,r)||m(t,r)&&m(i,e))||_(t,e,i)>0!=_(t,e,r)>0&&_(i,r,t)>0!=_(i,r,e)>0}function x(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function b(t,e){var i=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function w(t,e,i,r){var n=new S(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function T(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,i,r){for(var n=0,s=e,a=i-r;s<i;s+=r)n+=(t[a]-t[s])*(t[s+1]+t[a+1]),a=s;return n}t.exports=r,t.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,a=Math.abs(E(t,0,s,i));if(n)for(var o=0,h=e.length;o<h;o++){var u=e[o]*i,l=o<h-1?e[o+1]*i:t.length;a-=Math.abs(E(t,u,l,i))}var c=0;for(o=0;o<r.length;o+=3){var d=r[o]*i,f=r[o+1]*i,p=r[o+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var a=0;a<e;a++)i.vertices.push(t[n][s][a]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(4);var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,r=this.localTransform;i.a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e.default=n,n.prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},function(t,e,i){var r,n,s,a,o,h,u,l,c,d,f,p,g,v,_,m,y,x,b,w,T,S;a=this,o=/iPhone/i,h=/iPod/i,u=/iPad/i,l=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,c=/Android/i,d=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,p=/Windows Phone/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,v=/BlackBerry/i,_=/BB10/i,m=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,x=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),w=function(t,e){return t.test(e)},T=function(t){var e=t||navigator.userAgent,i=e.split("[FBAN");if(void 0!==i[1]&&(e=i[0]),void 0!==(i=e.split("Twitter"))[1]&&(e=i[0]),this.apple={phone:w(o,e),ipod:w(h,e),tablet:!w(o,e)&&w(u,e),device:w(o,e)||w(h,e)||w(u,e)},this.amazon={phone:w(d,e),tablet:!w(d,e)&&w(f,e),device:w(d,e)||w(f,e)},this.android={phone:w(d,e)||w(l,e),tablet:!w(d,e)&&!w(l,e)&&(w(f,e)||w(c,e)),device:w(d,e)||w(f,e)||w(l,e)||w(c,e)},this.windows={phone:w(p,e),tablet:w(g,e),device:w(p,e)||w(g,e)},this.other={blackberry:w(v,e),blackberry10:w(_,e),opera:w(m,e),firefox:w(x,e),chrome:w(y,e),device:w(v,e)||w(_,e)||w(m,e)||w(x,e)||w(y,e)},this.seven_inch=w(b,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},S=function(){var t=new T;return t.Class=T,t},void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=T:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=S():(n=[],r=a.isMobile=S(),void 0===(s="function"==typeof r?r.apply(e,n):r)||(t.exports=s))},function(t,e,i){"use strict";e.__esModule=!0;var r=i(4);var n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((t=t||new r.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],a=t[1];e=s<e?s:e,i=a<i?a:i,r=s>r?s:r,n=a>n?a:n,s=t[2],a=t[3],e=s<e?s:e,i=a<i?a:i,r=s>r?s:r,n=a>n?a:n,s=t[4],a=t[5],e=s<e?s:e,i=a<i?a:i,r=s>r?s:r,n=a>n?a:n,s=t[6],a=t[7],e=s<e?s:e,i=a<i?a:i,r=s>r?s:r,n=a>n?a:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){var s=t.worldTransform,a=s.a,o=s.b,h=s.c,u=s.d,l=s.tx,c=s.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,v=a*e+h*i+l,_=o*e+u*i+c;d=v<d?v:d,f=_<f?_:f,p=v>p?v:p,g=_>g?_:g,_=o*r+u*i+c,d=(v=a*r+h*i+l)<d?v:d,f=_<f?_:f,p=v>p?v:p,g=_>g?_:g,_=o*e+u*n+c,d=(v=a*e+h*n+l)<d?v:d,f=_<f?_:f,p=v>p?v:p,g=_>g?_:g,_=o*r+u*n+c,d=(v=a*r+h*n+l)<d?v:d,f=_<f?_:f,p=v>p?v:p,g=_>g?_:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},t.prototype.addVertices=function(t,e,i,r){for(var n=t.worldTransform,s=n.a,a=n.b,o=n.c,h=n.d,u=n.tx,l=n.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=i;g<r;g+=2){var v=e[g],_=e[g+1],m=s*v+o*_+u,y=h*_+a*v+l;c=m<c?m:c,d=y<d?y:d,f=m>f?m:f,p=y>p?y:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=s){var a=this.minX,o=this.minY,h=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<o?r:o,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=s){var a=this.minX,o=this.minY,h=this.maxX,u=this.maxY;this.minX=i<a?i:a,this.minY=r<o?r:o,this.maxX=n>h?n:h,this.maxY=s>u?s:u}},t}();e.default=n},function(t,e){var i=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!i){var n=Object.keys(r);i={};for(var s=0;s<n.length;++s){var a=n[s];i[t[a]]=r[a]}}return i[e]}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(0);var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(s),this.type=n.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&(t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height)},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=r,this.height=n-r},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(35),a=(r=s)&&r.__esModule?r:{default:r},o=i(0);var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=s,this.ty=a,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new a.default;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new a.default;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,s,a,o,h){return this.a=Math.cos(a+h)*n,this.b=Math.sin(a+h)*n,this.c=-Math.sin(a-o)*s,this.d=Math.cos(a-o)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,s=-Math.atan2(-r,n),a=Math.atan2(i,e),h=Math.abs(s+a);return h<1e-5||Math.abs(o.PI_2-h)<1e-5?(t.rotation=a,e<0&&n>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=s,t.skew.y=a),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e.default=r},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(10),s=(r=n)&&r.__esModule?r:{default:r};var a=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return a._ready=!0,a.verticesX=r||10,a.verticesY=n||10,a.drawMode=s.default.DRAW_MODES.TRIANGLES,a.refresh(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],r=[],n=[],s=this.verticesX-1,a=this.verticesY-1,o=t.width/s,h=t.height/a,u=0;u<e;u++){var l=u%this.verticesX,c=u/this.verticesX|0;i.push(l*o,c*h),r.push(l/s,c/a)}for(var d=s*a,f=0;f<d;f++){var p=f%s,g=f/s|0,v=g*this.verticesX+p,_=g*this.verticesX+p+1,m=(g+1)*this.verticesX+p,y=(g+1)*this.verticesX+p+1;n.push(v,_,m),n.push(_,y,m)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){s.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(s.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=a.default.fromLoader(t.data,t.url,t.name)),e()}};var r,n=i(11),s=i(7),a=(r=s)&&r.__esModule?r:{default:r}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===n.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var r={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},s=h(t,this.baseUrl);this.add(i,s,r,function(i){if(i.error)e(i.error);else{var r=new o.Spritesheet(i.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})}})}else e()}},e.getResourcePath=h;var r,n=i(11),s=i(72),a=(r=s)&&r.__esModule?r:{default:r},o=i(1);function h(t,e){return t.isDataUrl?t.data.meta.image:a.default.resolve(t.url.replace(e,""),t.data.meta.image)}},function(t,e,i){"use strict";e.__esModule=!0,e.encodeBinary=function(t){var e="",i=0;for(;i<t.length;){for(var n=[0,0,0],s=[0,0,0,0],a=0;a<n.length;++a)i<t.length?n[a]=255&t.charCodeAt(i++):n[a]=0;s[0]=n[0]>>2,s[1]=(3&n[0])<<4|n[1]>>4,s[2]=(15&n[1])<<2|n[2]>>6,s[3]=63&n[2];var o=i-(t.length-1);switch(o){case 2:s[3]=64,s[2]=64;break;case 1:s[3]=64}for(var h=0;h<s.length;++h)e+=r.charAt(s[h])}return e};var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,i){"use strict";function r(){}function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,i,r){var n=0,s=t.length;!function a(o){o||n===s?i&&i(o):r?setTimeout(function(){e(t[n++],a)},1):e(t[n++],a)}()},e.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,s={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){a(t,!1,e)},kill:function(){i=0,s.drain=r,s.started=!1,s._tasks=[]},unshift:function(t,e){a(t,!0,e)},process:function(){for(;!s.paused&&i<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),(i+=1)===s.concurrency&&s.saturated(),t(e.data,n(o(e)))}},length:function(){return s._tasks.length},running:function(){return i},idle:function(){return s._tasks.length+i===0},pause:function(){!0!==s.paused&&(s.paused=!0)},resume:function(){if(!1!==s.paused){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};function a(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())setTimeout(function(){return s.drain()},1);else{var n={data:t,callback:"function"==typeof i?i:r};e?s._tasks.unshift(n):s._tasks.push(n),setTimeout(function(){return s.process()},1)}}function o(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),i<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}return s}},function(t,e,i){"use strict";t.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[i.key[s]]=r[s]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,function(t,e,r){e&&(n[i.q.name][e]=r)}),n}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){n(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=s,e.default=o,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0,e.parse=o,e.default=function(){return function(t,e){if(t.data&&t.type===s.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":r.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");var a=i+t.data.getElementsByTagName("page")[0].getAttribute("file");if(n.utils.TextureCache[a])o(t,n.utils.TextureCache[a]),e();else{var h={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:t.metadata.imageMetadata,parentResource:t};this.add(t.name+"_image",a,h,function(i){o(t,i.texture),e()})}}else e();else e()}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6)),n=i(1),s=i(11),a=i(55);function o(t,e){t.bitmapFont=a.BitmapText.registerFont(t.data,e)}},function(t,e,i){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e.default=n,n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=h(i(53)),a=h(i(52)),o=h(i(51));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,r,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h=h||5;var u=(0,s.default)(h,!1),l=(0,a.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,u,l));return c.resolution=o||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,h=(0,o.default)(n);this.vertexSrc=(0,s.default)(h,!1),this.fragmentSrc=(0,a.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var u=t.getRenderTarget(!0),l=e,c=u,d=0;d<this.passes-1;d++){t.applyFilter(this,l,c,!0);var f=c;c=l,l=f}t.applyFilter(this,l,i,r),t.returnRenderTarget(u)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);e.default=u},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;for(;i>e;)i-=2;return i}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){for(var e=r[t],i=e.length,s=n,a="",o=void 0,h=0;h<t;h++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);o=h,h>=i&&(o=t-h-1),u=u.replace("%value%",e[o]),a+=u,a+="\n"}return s=(s=s.replace("%blur%",a)).replace("%size%",t)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=Math.ceil(t/2),n=r,s="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var h=a.replace("%index%",o);h=h.replace("%sampleIndex%",o-(i-1)+".0"),s+=h,s+="\n"}return n=(n=n.replace("%blur%",s)).replace("%size%",t)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=h(i(53)),a=h(i(52)),o=h(i(51));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,r,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h=h||5;var u=(0,s.default)(h,!0),l=(0,a.default)(h),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,u,l));return c.resolution=o||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,h=(0,o.default)(n);this.vertexSrc=(0,s.default)(h,!0),this.fragmentSrc=(0,a.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var u=t.getRenderTarget(!0),l=e,c=u,d=0;d<this.passes-1;d++){t.applyFilter(this,l,c,!0);var f=c;c=l,l=f}t.applyFilter(this,l,i,r),t.returnRenderTarget(u)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);e.default=u},function(t,e,i){"use strict";e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var r=i(130);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return o(r).default}});var n=i(129);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return o(n).default}});var s=i(128);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return o(s).default}});var a=i(127);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return o(a).default}}),i(126),i(125),i(124)},function(t,e,i){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,i){"use strict";e.__esModule=!0,e.autoDetectRenderer=function(t,e,i,a){var o=t&&t.forceCanvas;void 0!==a&&(o=a);if(!o&&r.isWebGLSupported())return new s.default(t,e,i);return new n.default(t,e,i)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(2)),n=a(i(14)),s=a(i(18));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(57),s=u(i(15)),a=i(25),o=u(i(3)),h=i(0);function u(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,i,r,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||o.default.RENDER_OPTIONS.height,forceCanvas:!!h,sharedTicker:!!u},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,n.autoDetectRenderer)(e),this.stage=new s.default,this._ticker=null,this.ticker=e.sharedTicker?a.shared:new a.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}this.stage.destroy(),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,h.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e,i,r,n,s,a,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.nativeLines=o,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=n,this.fillAlpha=s,this._fillTint=n,this.fill=a,this.holes=[],this.shape=h,this.type=h.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e,i,r,n,s,a,o,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.style=i,this.width=r,this.height=n,this.lines=s,this.lineWidths=a,this.lineHeight=o,this.maxLineWidth=h,this.fontProperties=u}return t.measureText=function(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=r||i.wordWrap;var s=i.toFontString(),a=t.measureFont(s),o=n.getContext("2d");o.font=s;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),u=new Array(h.length),l=0,c=0;c<h.length;c++){var d=o.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;u[c]=d,l=Math.max(l,d)}var f=l+i.strokeThickness;i.dropShadow&&(f+=i.dropShadowDistance);var p=i.lineHeight||a.fontSize+i.strokeThickness,g=Math.max(p,a.fontSize+i.strokeThickness)+(h.length-1)*(p+i.leading);return i.dropShadow&&(g+=i.dropShadowDistance),new t(e,i,f,g,h,u,p+i.leading,l,a)},t.wordWrap=function(e,i){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas).getContext("2d"),n="",s=0,a="",o={},h=i.letterSpacing,u=i.wordWrapWidth+i.letterSpacing,l=t.getFromCache(" ",h,o,r),c=e.split(" "),d=0;d<c.length;d++){var f=c[d],p=t.getFromCache(f,h,o,r);if(p>u)if(i.breakWords)for(var g=(n.length>0?" "+f:f).split(""),v=0;v<g.length;v++){var _=g[v],m=t.getFromCache(_,h,o,r);m+s>u&&(a+=t.addLine(n),n="",s=0),n+=_,s+=m}else n.length>0&&(a+=t.addLine(n),n="",s=0),a+=t.addLine(f),n="",s=0;else p+s>u&&(a+=t.addLine(n),n="",s=0),n.length>0?n+=" "+f:n+=f,s+=p+l}return a+=t.addLine(n,!1)},t.addLine=function(t){return t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?t+"\n":t},t.getFromCache=function(t,e,i,r){var n=i[t];if(void 0===n){var s=t.length*e;n=r.measureText(t).width+s,i[t]=n}return n},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},r=t._canvas,n=t._context;n.font=e;var s=Math.ceil(n.measureText("|MÉq").width),a=Math.ceil(n.measureText("M").width),o=2*a;a=1.4*a|0,r.width=s,r.height=o,n.fillStyle="#f00",n.fillRect(0,0,s,o),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,a);var h=n.getImageData(0,0,s,o).data,u=h.length,l=4*s,c=0,d=0,f=!1;for(c=0;c<a;++c){for(var p=0;p<l;p+=4)if(255!==h[d+p]){f=!0;break}if(f)break;d+=l}for(i.ascent=a-c,d=u-l,f=!1,c=o;c>a;--c){for(var g=0;g<l;g+=4)if(255!==h[d+g]){f=!0;break}if(f)break;d-=l}return i.descent=c-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t}();e.default=r;var n=document.createElement("canvas");n.width=n.height=10,r._canvas=n,r._context=n.getContext("2d"),r._fonts={}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(0),s=i(2);var a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),l(this,e,e)}return t.prototype.clone=function(){var e={};return l(e,this,a),new t(e)},t.prototype.reset=function(){l(this,a,a)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();/([\"\'])[^\'\"]+\1/.test(r)||(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=u(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=u(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=u(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function h(t){return"number"==typeof t?(0,s.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function u(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=h(t[e]);return t}return h(t)}function l(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(5)),n=s(i(22));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var s=0;s<4;s++)this.interleaved[4*s]=this.vertices[2*s],this.interleaved[4*s+1]=this.vertices[2*s+1],this.interleaved[4*s+2]=this.uvs[2*s],this.interleaved[4*s+3]=this.uvs[2*s+1];this.indices=(0,n.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(34),a=(r=s)&&r.__esModule?r:{default:r};var o=new a.default,h=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new a.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],s=t[r+1];e[r]=n*i.a+s*i.c+i.tx,e[r+1]=n*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(o.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(o));var s=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(e._frame.x+h+u)/s.width,a[1]=(e._frame.y+h+u)/s.height,a[2]=(e._frame.x+e._frame.width-h+u)/s.width,a[3]=(e._frame.y+e._frame.height-h+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=h(i(163)),s=i(2),a=i(0),o=h(i(3));function h(t){return t&&t.__esModule?t:{default:t}}var u={},l=function(){function t(e,i,r){for(var h in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=a.BLEND_MODES.NORMAL,this.uniformData=r||(0,n.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[h]=this.uniformData[h].value,this.uniformData[h].type&&(this.uniformData[h].type=this.uniformData[h].type.toLowerCase());this.glShaders={},u[this.vertexSrc+this.fragmentSrc]||(u[this.vertexSrc+this.fragmentSrc]=(0,s.uid)()),this.glShaderKey=u[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=o.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},r(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e.default=l},function(t,e,i){"use strict";e.__esModule=!0;var r=a(i(64)),n=i(4),s=(i(6),a(i(63)));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new n.Matrix,s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,s.maskSprite=i,s.maskMatrix=r,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var r=this.maskSprite,n=this.maskSprite.texture;n.valid&&(n.transform||(n.transform=new s.default(n,0)),n.transform.update(),this.uniforms.mask=n,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(n.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=n.transform.uClampFrame,t.applyFilter(this,e,i))},e}(r.default);e.default=o},function(t,e,i){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var n=i.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var s=n.getImageData(2,0,1,1);if(!s)return!1;var a=s.data;return 255===a[0]&&0===a[1]&&0===a[2]}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(3),a=(r=s)&&r.__esModule?r:{default:r};var o=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||a.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(9)),n=s(i(3));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,s=arguments[2],a=arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,null,s));return o.resolution=a||n.default.RESOLUTION,o.width=Math.ceil(i),o.height=Math.ceil(r),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==s?s:n.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(2),s=i(4),a=i(0),o=c(i(3)),h=c(i(15)),u=c(i(24)),l=c(i(8));function c(t){return t&&t.__esModule?t:{default:t}}var d=new s.Matrix,f=function(t){function e(i,r,u,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,n.sayHello)(i),"number"==typeof r&&(r=Object.assign({width:r,height:u||o.default.RENDER_OPTIONS.height},l)),r=Object.assign({},o.default.RENDER_OPTIONS,r),c.options=r,c.type=a.RENDERER_TYPE.UNKNOWN,c.screen=new s.Rectangle(0,0,r.width,r.height),c.view=r.view||document.createElement("canvas"),c.resolution=r.resolution||o.default.RESOLUTION,c.transparent=r.transparent,c.autoResize=r.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=r.preserveDrawingBuffer,c.clearBeforeRender=r.clearBeforeRender,c.roundPixels=r.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=r.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new h.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,r){r=r||t.getLocalBounds();var n=u.default.create(0|r.width,0|r.height,e,i);return d.tx=-r.x,d.ty=-r.y,this.render(t,n,!1,d,!0),n},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=a.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,n.hex2string)(t),(0,n.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(l.default);e.default=f},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(86),s=(r=n)&&r.__esModule?r:{default:r};var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var a=t.width/2/r,o=t.height/2/n,h=t.x/r+a,u=t.y/n+o;i=s.default.add(i,s.default.NW),this.x0=h+a*s.default.uX(i),this.y0=u+o*s.default.uY(i),i=s.default.add(i,2),this.x1=h+a*s.default.uX(i),this.y1=u+o*s.default.uY(i),i=s.default.add(i,2),this.x2=h+a*s.default.uX(i),this.y2=u+o*s.default.uY(i),i=s.default.add(i,2),this.x3=h+a*s.default.uX(i),this.y3=u+o*s.default.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=u(i(9)),s=i(2),a=i(25),o=i(0),h=u(i(73));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));return n.width=i.videoWidth,n.height=i.videoHeight,n._autoUpdate=!0,n._isAutoUpdating=!1,n.autoPlay=!0,n.update=n.update.bind(n),n._onCanPlay=n._onCanPlay.bind(n),i.addEventListener("play",n._onPlayStart.bind(n)),i.addEventListener("pause",n._onPlayStop.bind(n)),n.hasLoaded=!1,n.__loaded=!1,n._isSourceReady()?n._onCanPlay():(i.addEventListener("canplay",n._onCanPlay),i.addEventListener("canplaythrough",n._onCanPlay)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(a.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(a.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&a.shared.remove(this.update,this),this.source&&this.source._pixiId&&(n.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i){t._pixiId||(t._pixiId="video_"+(0,s.uid)());var r=s.BaseTextureCache[t._pixiId];return r||(r=new e(t,i),n.default.addToCache(r,t._pixiId)),r},e.fromUrl=function(t,i,r){var n=document.createElement("video");n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==s.indexOf("data:")?n.crossOrigin=(0,h.default)(s):r&&(n.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)n.appendChild(c(t[a].src||t[a],t[a].mime));else n.appendChild(c(s,t.mime));return n.load(),e.fromVideo(n,i)},r(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(a.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(a.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(n.default);function c(t,e){e||(e="video/"+t.substr(t.lastIndexOf(".")+1));var i=document.createElement("source");return i.src=t,i.type=e,i}e.default=l,l.fromUrls=l.fromUrl},function(t,e,i){"use strict";var r=i(176),n=i(174);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=y,e.resolve=function(t,e){return y(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?y(t,!1,!0).resolveObject(e):e},e.format=function(t){n.isString(t)&&(t=y(t));return t instanceof s?t.format():s.prototype.format.call(t)},e.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},v={javascript:!0,"javascript:":!0},_={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=i(173);function y(t,e,i){if(t&&n.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,i),r}s.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),o=-1!==s&&s<t.indexOf("#")?"?":"#",u=t.split(o);u[0]=u[0].replace(/\\/g,"/");var y=t=u.join(o);if(y=y.trim(),!i&&1===t.split("#").length){var x=h.exec(y);if(x)return this.path=y,this.href=y,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=a.exec(y);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,y=y.substr(b.length)}if(i||b||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===y.substr(0,2);!T||b&&v[b]||(y=y.substr(2),this.slashes=!0)}if(!v[b]&&(T||b&&!_[b])){for(var S,E,C=-1,P=0;P<d.length;P++){-1!==(O=y.indexOf(d[P]))&&(-1===C||O<C)&&(C=O)}-1!==(E=-1===C?y.lastIndexOf("@"):y.lastIndexOf("@",C))&&(S=y.slice(0,E),y=y.slice(E+1),this.auth=decodeURIComponent(S)),C=-1;for(P=0;P<c.length;P++){var O;-1!==(O=y.indexOf(c[P]))&&(-1===C||O<C)&&(C=O)}-1===C&&(C=y.length),this.host=y.slice(0,C),y=y.slice(C),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var A=this.hostname.split(/\./),I=(P=0,A.length);P<I;P++){var k=A[P];if(k&&!k.match(f)){for(var R="",D=0,L=k.length;D<L;D++)k.charCodeAt(D)>127?R+="x":R+=k[D];if(!R.match(f)){var N=A.slice(0,P),F=A.slice(P+1),B=k.match(p);B&&(N.push(B[1]),F.unshift(B[2])),F.length&&(y="/"+F.join(".")+y),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!g[w])for(P=0,I=l.length;P<I;P++){var z=l[P];if(-1!==y.indexOf(z)){var V=encodeURIComponent(z);V===z&&(V=escape(z)),y=y.split(z).join(V)}}var X=y.indexOf("#");-1!==X&&(this.hash=y.substr(X),y=y.slice(0,X));var H=y.indexOf("?");if(-1!==H?(this.search=y.substr(H),this.query=y.substr(H+1),e&&(this.query=m.parse(this.query)),y=y.slice(0,H)):e&&(this.search="",this.query={}),y&&(this.pathname=y),_[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var G=this.search||"";this.path=j+G}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",s=!1,a="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(a=m.stringify(this.query));var o=this.search||a&&"?"+a||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||_[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),r&&"#"!==r.charAt(0)&&(r="#"+r),o&&"?"!==o.charAt(0)&&(o="?"+o),e+s+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(o=o.replace("#","%23"))+r},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,r=Object.keys(this),a=0;a<r.length;a++){var o=r[a];i[o]=this[o]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(i[l]=t[l])}return _[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!_[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||v[t.protocol])i.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),i.pathname=p.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",m=i.search||"";i.path=g+m}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||y||i.host&&t.pathname,w=b,T=i.pathname&&i.pathname.split("/")||[],S=(p=t.pathname&&t.pathname.split("/")||[],i.protocol&&!_[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===T[0]?T[0]=i.host:T.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===T[0])),x)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,T=p;else if(p.length)T||(T=[]),T.pop(),T=T.concat(p),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search)){if(S)i.hostname=i.host=T.shift(),(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift());return i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!T.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var E=T.slice(-1)[0],C=(i.host||t.host||T.length>1)&&("."===E||".."===E)||""===E,P=0,O=T.length;O>=0;O--)"."===(E=T[O])?T.splice(O,1):".."===E?(T.splice(O,1),P++):P&&(T.splice(O,1),P--);if(!b&&!w)for(;P--;P)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),C&&"/"!==T.join("/").substr(-1)&&T.push("");var M,A=""===T[0]||T[0]&&"/"===T[0].charAt(0);S&&(i.hostname=i.host=A?"":T.length?T.shift():"",(M=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=M.shift(),i.host=i.hostname=M.shift()));return(b=b||i.host&&T.length)&&!A&&T.unshift(""),T.length?i.pathname=T.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=o.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,a||(a=document.createElement("a"));a.href=t;var i=!(t=s.default.parse(a.href)).port&&""===e.port||t.port===e.port;if(t.hostname!==e.hostname||!i||t.protocol!==e.protocol)return"anonymous";return""};var r,n=i(72),s=(r=n)&&r.__esModule?r:{default:r};var a=void 0},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(4),a=i(29);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new s.Point(0,0),i.scale=new s.Point(1,1),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new s.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(4),a=i(29);var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new s.ObservablePoint(i.onChange,i,0,0),i.scale=new s.ObservablePoint(i.onChange,i,1,1),i.pivot=new s.ObservablePoint(i.onChange,i,0,0),i.skew=new s.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((r=a)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(i(8)),s=i(0),a=c(i(3)),o=c(i(75)),h=c(i(74)),u=c(i(31)),l=i(4);function c(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),r=a.default.TRANSFORM_MODE===s.TRANSFORM_MODE.STATIC?o.default:h.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new u.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new l.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},e.prototype.toGlobal=function(t,e){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=a,this.pivot.x=o,this.pivot.y=h,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(n.default);e.default=d,d.prototype.displayObjectUpdateTransform=d.prototype.updateTransform},function(t,e){var i=function(t){return function(){return this.data[t].value}},r={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},n={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};function s(t,e){return function(i){this.data[t].value=i;var s=this.data[t].location;1===e.size?r[e.type](this.gl,s,i):n[e.type](this.gl,s,i)}}function a(t,e){for(var i=e,r=0;r<t.length-1;r++){var n=i[t[r]]||{data:{}};i[t[r]]=n,i=n}return i}t.exports=function(t,e){var r={data:{}};r.gl=t;for(var n=Object.keys(e),o=0;o<n.length;o++){var h=n[o],u=h.split("."),l=u[u.length-1],c=a(u,r),d=e[h];c.data[l]=d,c.gl=t,Object.defineProperty(c,l,{get:i(l),set:s(l,d)})}return r}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e){var i=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return i(2*e);case"bvec3":return i(3*e);case"bvec4":return i(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e,i){var r=i(32),n=i(79);t.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;a<s;a++){var o=t.getActiveUniform(e,a),h=o.name.replace(/\[.*?\]/,""),u=r(t,o.type);i[h]={type:u,size:o.size,location:t.getUniformLocation(e,h),value:n(u,o.size)}}return i}},function(t,e){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return i[t]}},function(t,e,i){var r=i(32),n=i(81),s=function(t,e,i,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,r||0)};t.exports=function(t,e){for(var i={},a=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),o=0;o<a;o++){var h=t.getActiveAttrib(e,o),u=r(t,h.type);i[h.name]={type:u,size:n(u),location:t.getAttribLocation(e,h.name),pointer:s}}return i}},function(t,e){var i=function(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=function(t,e,r,n){var s=i(t,t.VERTEX_SHADER,e),a=i(t,t.FRAGMENT_SHADER,r),o=t.createProgram();if(t.attachShader(o,s),t.attachShader(o,a),n)for(var h in n)t.bindAttribLocation(o,n[h],h);return t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(o,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(o)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(o)),t.deleteProgram(o),o=null),t.deleteShader(s),t.deleteShader(a),o}},function(t,e){var i=function(t,e,i,r,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=n||t.UNSIGNED_BYTE};i.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var r=!1;i.prototype.uploadData=function(t,e,i){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},i.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},i.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},i.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(t,e,r){var n=new i(t);return n.premultiplyAlpha=r||!1,n.upload(e),n},i.fromData=function(t,e,r,n){var s=new i(t);return s.uploadData(e,r,n),s},t.exports=i},function(t,e){t.exports=function(t,e,i){var r;if(i){var n=i.tempAttribState,s=i.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<e.length;r++)n[e[r].attribute.location]=!0;for(r=0;r<s.length;r++)s[r]!==n[r]&&(s[r]=n[r],i.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var a=e[r];t.enableVertexAttribArray(a.attribute.location)}}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(34),s=(r=n)&&r.__esModule?r:{default:r};var a=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],h=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],u=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],c=[];function d(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=d(a[t]*a[i]+h[t]*o[i]),n=d(o[t]*a[i]+u[t]*o[i]),f=d(a[t]*h[i]+h[t]*u[i]),p=d(o[t]*h[i]+u[t]*u[i]),g=0;g<16;g++)if(a[g]===r&&o[g]===n&&h[g]===f&&u[g]===p){e.push(g);break}}for(var v=0;v<16;v++){var _=new s.default;_.set(a[v],o[v],h[v],u[v],0,0),l.push(_)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return a[t]},uY:function(t){return o[t]},vX:function(t){return h[t]},vY:function(t){return u[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][f.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=l[f.inv(e)];n.tx=i,n.ty=r,t.append(n)}};e.default=f},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();var n=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._x=r,this._y=n,this.cb=e,this.scope=i}return t.prototype.set=function(t,e){var i=t||0,r=e||(0!==e?i:0);this._x===i&&this._y===r||(this._x=i,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e.default=n},function(t,e){t.exports="precision highp float;\n\n// brush texture\nuniform sampler2D uSampler;\n// grain texture\nuniform sampler2D u_grainTex;\n\n// color\nuniform float uRed;\nuniform float uGreen;\nuniform float uBlue;\n\n// node\nuniform float uOpacity;\nuniform float uRotation;\n\n// grain\nuniform float uBleed;\nuniform float uGrainRotation;\nuniform float uGrainScale;\nuniform float u_x_offset;\nuniform float u_y_offset;\n\n// brush\nuniform vec2 u_offset_px;\nuniform vec2 u_node_scale;\n\n// from vert shader\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\n// from PIXI\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 filterClamp;\nuniform mat3 filterMatrix;\n\nvec2 rotate (vec2 v, float a) {\n\tfloat s = sin(a);\n\tfloat c = cos(a);\n\tmat2 m = mat2(c, -s, s, c);\n\treturn m * v;\n}\n\nvec2 scale (vec2 v, vec2 _scale) {\n\tmat2 m = mat2(_scale.x, 0.0, 0.0, _scale.y);\n\treturn m * v;\n}\n\nvec2 mapCoord (vec2 coord) {\n  coord *= filterArea.xy;\n  return coord;\n}\n\nvec2 unmapCoord (vec2 coord) {\n  coord /= filterArea.xy;\n  return coord;\n}\n\nvoid main(void) {\n  // user's intended brush color\n  vec3 color = vec3(uRed, uGreen, uBlue);\n\n\t//\n\t//\n\t// brush\n\t//\n  vec2 coord = mapCoord(vTextureCoord) / dimensions;\n\n\t// translate by the subpixel\n\tcoord -= u_offset_px / dimensions;\n\n  // move space from the center to the vec2(0.0)\n  coord -= vec2(0.5);\n\n  // rotate the space\n  coord = rotate(coord, uRotation);\n\n  // move it back to the original place\n  coord += vec2(0.5);\n\n\t// scale\n\tcoord -= 0.5;\n  coord *= 1.0 / u_node_scale;\n\tcoord += 0.5;\n\n\tcoord = unmapCoord(coord * dimensions);\n\n\t//\n\t//\n\t// grain\n\t//\n\tfloat grain_scale = 1024.00 * uGrainScale;\n\n\tvec2 fcoord = vFilterCoord;\n\tfcoord -= (vec2(u_x_offset, u_y_offset) / grain_scale);\n\tvec4 grainSample = texture2D(u_grainTex, fract(fcoord));\n\n\t//\n\t//\n\t// set gl_FragColor\n\t//\n\t// clamp (via https://github.com/pixijs/pixi.js/wiki/v4-Creating-Filters#bleeding-problem)\n\tif (coord == clamp(coord, filterClamp.xy, filterClamp.zw)) {\n\t\t// read a sample from the texture\n\t  vec4 brushSample = texture2D(uSampler, coord);\n\t  // tint\n\t  gl_FragColor = vec4(color, 1.);\n\t\tgl_FragColor *= ((brushSample.r * grainSample.r * (1.0+uBleed))- uBleed ) * (1.0+ uBleed) * uOpacity;\n\n\t\t// gl_FragColor = grain;\n\t} else {\n\t\t// don't draw\n\t\tgl_FragColor = vec4(0.);\n\t}\n}\n"},function(t,e,i){const r=i(88);t.exports=class extends PIXI.Filter{constructor(t){super(null,r,{uRed:{type:"1f",value:.5},uGreen:{type:"1f",value:.5},uBlue:{type:"1f",value:.5},uOpacity:{type:"1f",value:1},uRotation:{type:"1f",value:0},uBleed:{type:"1f",value:0},uGrainRotation:{type:"1f",value:0},uGrainScale:{type:"1f",value:1},u_x_offset:{type:"1f",value:0},u_y_offset:{type:"1f",value:0},u_offset_px:{type:"vec2"},u_node_scale:{type:"vec2",value:[0,0]},u_grainTex:{type:"sampler2D",value:""},dimensions:{type:"vec2",value:[0,0]},filterMatrix:{type:"mat3"}}),this.padding=0,this.blendMode=PIXI.BLEND_MODES.NORMAL,this.autoFit=!1;let e=new PIXI.Matrix;t.renderable=!1,this.grainSprite=t,this.grainMatrix=e,this.uniforms.u_grainTex=t._texture,this.uniforms.filterMatrix=e}apply(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.grainMatrix,this.grainSprite),t.applyFilter(this,e,i,r)}}},function(t,e){const i={name:"default",blendMode:"normal",sizeLimitMax:1,sizeLimitMin:0,opacityMax:1,opacityMin:0,spacing:0,brushImage:"brushcharcoal",brushRotation:0,brushImageInvert:!1,grainImage:"graingrid",grainRotation:0,grainImageInvert:!1,movement:1,scale:1,zoom:0,rotation:0,randomOffset:!0,azimuth:!0,pressureOpacity:1,pressureSize:1,pressureBleed:0,tiltAngle:0,tiltOpacity:1,tiltGradiation:0,tiltSize:1,orientToScreen:!0};t.exports=class{constructor(t){this.settings=Object.assign({},i,t)}}},function(t,e,i){const r=i(90);t.exports=[{name:"default",descriptiveName:"Default Brush"},{name:"pencil",descriptiveName:"Pencil",brushImage:"brushmediumoval",grainImage:"grainpaper4",pressureOpacity:.7,pressureSize:.8,scale:.8,tiltOpacity:.3,tiltSize:1,movement:1,pressureBleed:1,spacing:.05},{name:"brushpen",descriptiveName:"Brush Pen Bobby",brushImage:"teardrop",grainImage:"hardwood",pressureOpacity:.3,scale:.5,movement:.7,sizecale:.6},{name:"pen",descriptiveName:"Pen",brushImage:"brushhard",grainImage:"grainpaper2",pressureOpacity:.5,pressureSize:.8,sizecale:.8,pressureBleed:2,tiltSize:3.8,tiltOpacity:1,movement:.9,spacing:.05},{name:"copic",descriptiveName:"Copic",brushImage:"brushmediumovalhallow",grainImage:"grainpaper2",pressureOpacity:.2,pressureSize:.9,tiltSize:1,tiltOpacity:1,movement:.5},{name:"charcoal",descriptiveName:"Charcoal",brushImage:"brushcharcoal",grainImage:"graincanvas",pressureOpacity:.4,pressureSize:.8,sizecale:1,tiltOpacity:.4,tiltSize:1,spacing:.05,pressureBleed:.5},{name:"watercolor",descriptiveName:"Watercolor",brushImage:"brushwatercolor",grainImage:"grainwatercolor1",pressureOpacity:1,pressureSize:1,sizecale:1,tiltOpacity:1,tiltSize:1,spacing:.05,pressureBleed:.5},{name:"clouds",descriptiveName:"Clouds",brushImage:"brushclouds",grainImage:"grainclouds",pressureOpacity:1,pressureSize:1,sizecale:1,tiltOpacity:1,tiltSize:1,spacing:.1,movement:1},{name:"slate",descriptiveName:"Clouds",brushImage:"flatbrush",grainImage:"grainslate",pressureOpacity:1,pressureSize:1,sizecale:1,tiltOpacity:1,tiltSize:1,movement:1,spacing:.05}].reduce((t,e)=>(t[e.name]=new r(e),t),{})},function(t,e){t.exports=class{static rotatePoint(t,e,i,r,n){return{x:Math.cos(n)*(t-i)-Math.sin(n)*(e-r)+i,y:Math.sin(n)*(t-i)+Math.cos(n)*(e-r)+r}}static calcTiltAngle(t,e){return{angle:Math.atan2(t,e)*(180/Math.PI),tilt:Math.max(Math.abs(t),Math.abs(e))}}static lerp(t,e,i){return t+(e-t)*(i=(i=i<0?0:i)>1?1:i)}}},function(t,e){},function(t,e,i){"use strict";i.r(e),i.d(e,"version",function(){return Et}),i.d(e,"parse",function(){return Ct}),i.d(e,"parseExpressionAt",function(){return Pt}),i.d(e,"tokenizer",function(){return Ot}),i.d(e,"parse_dammit",function(){return wt}),i.d(e,"LooseParser",function(){return Tt}),i.d(e,"pluginsLoose",function(){return St}),i.d(e,"addLooseExports",function(){return Mt}),i.d(e,"Parser",function(){return U}),i.d(e,"plugins",function(){return B}),i.d(e,"defaultOptions",function(){return N}),i.d(e,"Position",function(){return R}),i.d(e,"SourceLocation",function(){return D}),i.d(e,"getLineInfo",function(){return L}),i.d(e,"Node",function(){return tt}),i.d(e,"TokenType",function(){return v}),i.d(e,"tokTypes",function(){return w}),i.d(e,"keywordTypes",function(){return x}),i.d(e,"TokContext",function(){return rt}),i.d(e,"tokContexts",function(){return nt}),i.d(e,"isIdentifierChar",function(){return g}),i.d(e,"isIdentifierStart",function(){return p}),i.d(e,"Token",function(){return mt}),i.d(e,"isNewLine",function(){return E}),i.d(e,"lineBreak",function(){return T}),i.d(e,"lineBreakG",function(){return S}),i.d(e,"nonASCIIwhitespace",function(){return C});var r={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",s={5:n,6:n+" const class extends export import super"},a=/^in(stanceof)?$/,o="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄮㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿪ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",h="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣔ-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳷-᳹᷀-᷹᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",u=new RegExp("["+o+"]"),l=new RegExp("["+o+h+"]");o=h=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,55,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,698,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,1,31,6124,20,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],d=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,19719,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function f(t,e){for(var i=65536,r=0;r<e.length;r+=2){if((i+=e[r])>t)return!1;if((i+=e[r+1])>=t)return!0}}function p(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&u.test(String.fromCharCode(t)):!1!==e&&f(t,c)))}function g(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&l.test(String.fromCharCode(t)):!1!==e&&(f(t,c)||f(t,d)))))}var v=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function _(t,e){return new v(t,{beforeExpr:!0,binop:e})}var m={beforeExpr:!0},y={startsExpr:!0},x={};function b(t,e){return void 0===e&&(e={}),e.keyword=t,x[t]=new v(t,e)}var w={num:new v("num",y),regexp:new v("regexp",y),string:new v("string",y),name:new v("name",y),eof:new v("eof"),bracketL:new v("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new v("]"),braceL:new v("{",{beforeExpr:!0,startsExpr:!0}),braceR:new v("}"),parenL:new v("(",{beforeExpr:!0,startsExpr:!0}),parenR:new v(")"),comma:new v(",",m),semi:new v(";",m),colon:new v(":",m),dot:new v("."),question:new v("?",m),arrow:new v("=>",m),template:new v("template"),invalidTemplate:new v("invalidTemplate"),ellipsis:new v("...",m),backQuote:new v("`",y),dollarBraceL:new v("${",{beforeExpr:!0,startsExpr:!0}),eq:new v("=",{beforeExpr:!0,isAssign:!0}),assign:new v("_=",{beforeExpr:!0,isAssign:!0}),incDec:new v("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new v("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:_("||",1),logicalAND:_("&&",2),bitwiseOR:_("|",3),bitwiseXOR:_("^",4),bitwiseAND:_("&",5),equality:_("==/!=/===/!==",6),relational:_("</>/<=/>=",7),bitShift:_("<</>>/>>>",8),plusMin:new v("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:_("%",10),star:_("*",10),slash:_("/",10),starstar:new v("**",{beforeExpr:!0}),_break:b("break"),_case:b("case",m),_catch:b("catch"),_continue:b("continue"),_debugger:b("debugger"),_default:b("default",m),_do:b("do",{isLoop:!0,beforeExpr:!0}),_else:b("else",m),_finally:b("finally"),_for:b("for",{isLoop:!0}),_function:b("function",y),_if:b("if"),_return:b("return",m),_switch:b("switch"),_throw:b("throw",m),_try:b("try"),_var:b("var"),_const:b("const"),_while:b("while",{isLoop:!0}),_with:b("with"),_new:b("new",{beforeExpr:!0,startsExpr:!0}),_this:b("this",y),_super:b("super",y),_class:b("class",y),_extends:b("extends",m),_export:b("export"),_import:b("import"),_null:b("null",y),_true:b("true",y),_false:b("false",y),_in:b("in",{beforeExpr:!0,binop:7}),_instanceof:b("instanceof",{beforeExpr:!0,binop:7}),_typeof:b("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:b("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:b("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},T=/\r\n?|\n|\u2028|\u2029/,S=new RegExp(T.source,"g");function E(t){return 10===t||13===t||8232===t||8233===t}var C=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,P=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,O=Object.prototype,M=O.hasOwnProperty,A=O.toString;function I(t,e){return M.call(t,e)}var k=Array.isArray||function(t){return"[object Array]"===A.call(t)},R=function(t,e){this.line=t,this.column=e};R.prototype.offset=function(t){return new R(this.line,this.column+t)};var D=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function L(t,e){for(var i=1,r=0;;){S.lastIndex=r;var n=S.exec(t);if(!(n&&n.index<e))return new R(i,e-r);++i,r=n.index+n[0].length}}var N={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}};function F(t){var e={};for(var i in N)e[i]=t&&I(t,i)?t[i]:N[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),k(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return k(e.onComment)&&(e.onComment=function(t,e){return function(i,r,n,s,a,o){var h={type:i?"Block":"Line",value:r,start:n,end:s};t.locations&&(h.loc=new D(this,a,o)),t.ranges&&(h.range=[n,s]),e.push(h)}}(e,e.onComment)),e}var B={};function j(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var U=function(t,e,i){this.options=t=F(t),this.sourceFile=t.sourceFile,this.keywords=j(s[t.ecmaVersion>=6?6:5]);var n="";if(!t.allowReserved){for(var a=t.ecmaVersion;!(n=r[a]);a--);"module"==t.sourceType&&(n+=" await")}this.reservedWords=j(n);var o=(n?n+" ":"")+r.strict;this.reservedWordsStrict=j(o),this.reservedWordsStrictBind=j(o+" "+r.strictBind),this.input=String(e),this.containsEsc=!1,this.loadPlugins(t.plugins),i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(T).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=w.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};U.prototype.isKeyword=function(t){return this.keywords.test(t)},U.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},U.prototype.extend=function(t,e){this[t]=e(this[t])},U.prototype.loadPlugins=function(t){for(var e in t){var i=B[e];if(!i)throw new Error("Plugin '"+e+"' not found");i(this,t[e])}},U.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};var z=U.prototype,V=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;function X(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}z.strictDirective=function(t){for(;;){P.lastIndex=t,t+=P.exec(this.input)[0].length;var e=V.exec(this.input.slice(t));if(!e)return!1;if("use strict"==(e[1]||e[2]))return!0;t+=e[0].length}},z.eat=function(t){return this.type===t&&(this.next(),!0)},z.isContextual=function(t){return this.type===w.name&&this.value===t&&!this.containsEsc},z.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},z.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},z.canInsertSemicolon=function(){return this.type===w.eof||this.type===w.braceR||T.test(this.input.slice(this.lastTokEnd,this.start))},z.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},z.semicolon=function(){this.eat(w.semi)||this.insertSemicolon()||this.unexpected()},z.afterTrailingComma=function(t,e){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},z.expect=function(t){this.eat(t)||this.unexpected()},z.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},z.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},z.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,r=t.doubleProto;if(!e)return i>=0||r>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")},z.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},z.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var H=U.prototype;H.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==w.eof;){var i=this.parseStatement(!0,!0,e);t.body.push(i)}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var G={kind:"loop"},W={kind:"switch"};H.isLet=function(){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;P.lastIndex=this.pos;var t=P.exec(this.input),e=this.pos+t[0].length,i=this.input.charCodeAt(e);if(91===i||123==i)return!0;if(p(i,!0)){for(var r=e+1;g(this.input.charCodeAt(r),!0);)++r;var n=this.input.slice(e,r);if(!a.test(n))return!0}return!1},H.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;P.lastIndex=this.pos;var t=P.exec(this.input),e=this.pos+t[0].length;return!(T.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!=this.input.length&&g(this.input.charAt(e+8)))},H.parseStatement=function(t,e,i){var r,n=this.type,s=this.startNode();switch(this.isLet()&&(n=w._var,r="let"),n){case w._break:case w._continue:return this.parseBreakContinueStatement(s,n.keyword);case w._debugger:return this.parseDebuggerStatement(s);case w._do:return this.parseDoStatement(s);case w._for:return this.parseForStatement(s);case w._function:return!t&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1);case w._class:return t||this.unexpected(),this.parseClass(s,!0);case w._if:return this.parseIfStatement(s);case w._return:return this.parseReturnStatement(s);case w._switch:return this.parseSwitchStatement(s);case w._throw:return this.parseThrowStatement(s);case w._try:return this.parseTryStatement(s);case w._const:case w._var:return r=r||this.value,t||"var"==r||this.unexpected(),this.parseVarStatement(s,r);case w._while:return this.parseWhileStatement(s);case w._with:return this.parseWithStatement(s);case w.braceL:return this.parseBlock();case w.semi:return this.parseEmptyStatement(s);case w._export:case w._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===w._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t||this.unexpected(),this.next(),this.parseFunctionStatement(s,!0);var a=this.value,o=this.parseExpression();return n===w.name&&"Identifier"===o.type&&this.eat(w.colon)?this.parseLabeledStatement(s,a,o):this.parseExpressionStatement(s,o)}},H.parseBreakContinueStatement=function(t,e){var i="break"==e;this.next(),this.eat(w.semi)||this.insertSemicolon()?t.label=null:this.type!==w.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var n=this.labels[r];if(null==t.label||n.name===t.label.name){if(null!=n.kind&&(i||"loop"===n.kind))break;if(t.label&&i)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},H.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},H.parseDoStatement=function(t){return this.next(),this.labels.push(G),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(w._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(w.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},H.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.inAsync&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(G),this.enterLexicalScope(),this.expect(w.parenL),this.type===w.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===w._var||this.type===w._const||i){var r=this.startNode(),n=i?"let":this.value;return this.next(),this.parseVar(r,!0,n),this.finishNode(r,"VariableDeclaration"),!(this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==r.declarations.length||"var"!==n&&r.declarations[0].init?(e>-1&&this.unexpected(e),this.parseFor(t,r)):(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,r))}var s=new X,a=this.parseExpression(!0,s);return this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===w._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(t,a)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,a))},H.parseFunctionStatement=function(t,e){return this.next(),this.parseFunction(t,!0,!1,e)},H.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!this.strict&&this.type==w._function),t.alternate=this.eat(w._else)?this.parseStatement(!this.strict&&this.type==w._function):null,this.finishNode(t,"IfStatement")},H.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(w.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},H.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(w.braceL),this.labels.push(W),this.enterLexicalScope();for(var i=!1;this.type!=w.braceR;)if(this.type===w._case||this.type===w._default){var r=this.type===w._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(w.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(!0));return this.exitLexicalScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},H.parseThrowStatement=function(t){return this.next(),T.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var q=[];H.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===w._catch){var e=this.startNode();this.next(),this.expect(w.parenL),e.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(e.param,"let"),this.expect(w.parenR),e.body=this.parseBlock(!1),this.exitLexicalScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(w._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},H.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},H.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(G),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},H.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},H.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},H.parseLabeledStatement=function(t,e,i){for(var r=0,n=this.labels;r<n.length;r+=1){n[r].name===e&&this.raise(i.start,"Label '"+e+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===w._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var o=this.labels[a];if(o.statementStart!=t.start)break;o.statementStart=this.start,o.kind=s}return this.labels.push({name:e,kind:s,statementStart:this.start}),t.body=this.parseStatement(!0),("ClassDeclaration"==t.body.type||"VariableDeclaration"==t.body.type&&"var"!=t.body.kind||"FunctionDeclaration"==t.body.type&&(this.strict||t.body.generator))&&this.raiseRecoverable(t.body.start,"Invalid labeled declaration"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},H.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},H.parseBlock=function(t){void 0===t&&(t=!0);var e=this.startNode();for(e.body=[],this.expect(w.braceL),t&&this.enterLexicalScope();!this.eat(w.braceR);){var i=this.parseStatement(!0);e.body.push(i)}return t&&this.exitLexicalScope(),this.finishNode(e,"BlockStatement")},H.parseFor=function(t,e){return t.init=e,this.expect(w.semi),t.test=this.type===w.semi?null:this.parseExpression(),this.expect(w.semi),t.update=this.type===w.parenR?null:this.parseExpression(),this.expect(w.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},H.parseForIn=function(t,e){var i=this.type===w._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"==i&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"==i?this.parseExpression():this.parseMaybeAssign(),this.expect(w.parenR),this.exitLexicalScope(),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,i)},H.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var r=this.startNode();if(this.parseVarId(r,i),this.eat(w.eq)?r.init=this.parseMaybeAssign(e):"const"!==i||this.type===w._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==r.id.type||e&&(this.type===w._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(w.comma))break}return t},H.parseVarId=function(t,e){t.id=this.parseBindingAtom(e),this.checkLVal(t.id,e,!1)},H.parseFunction=function(t,e,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(t.generator=this.eat(w.star)),this.options.ecmaVersion>=8&&(t.async=!!r),e&&(t.id="nullableID"===e&&this.type!=w.name?null:this.parseIdent(),t.id&&this.checkLVal(t.id,"var"));var n=this.inGenerator,s=this.inAsync,a=this.yieldPos,o=this.awaitPos,h=this.inFunction;return this.inGenerator=t.generator,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),e||(t.id=this.type==w.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i),this.inGenerator=n,this.inAsync=s,this.yieldPos=a,this.awaitPos=o,this.inFunction=h,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},H.parseFunctionParams=function(t){this.expect(w.parenL),t.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},H.parseClass=function(t,e){this.next(),this.parseClassId(t,e),this.parseClassSuper(t);var i=this.startNode(),r=!1;for(i.body=[],this.expect(w.braceL);!this.eat(w.braceR);){var n=this.parseClassMember(i);n&&"MethodDefinition"===n.type&&"constructor"===n.kind&&(r&&this.raise(n.start,"Duplicate constructor in the same class"),r=!0)}return t.body=this.finishNode(i,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},H.parseClassMember=function(t){var e=this;if(this.eat(w.semi))return null;var i=this.startNode(),r=function(t,r){void 0===r&&(r=!1);var n=e.start,s=e.startLoc;return!!e.eatContextual(t)&&(!(e.type===w.parenL||r&&e.canInsertSemicolon())||(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(n,s),i.key.name=t,e.finishNode(i.key,"Identifier"),!1))};i.kind="method",i.static=r("static");var n=this.eat(w.star),s=!1;n||(this.options.ecmaVersion>=8&&r("async",!0)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(w.star)):r("get")?i.kind="get":r("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var a=i.key;return i.computed||i.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?i.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),n&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),i.kind="constructor"),this.parseClassMethod(t,i,n,s),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},H.parseClassMethod=function(t,e,i,r){e.value=this.parseMethod(i,r),t.body.push(this.finishNode(e,"MethodDefinition"))},H.parseClassId=function(t,e){t.id=this.type===w.name?this.parseIdent():!0===e?this.unexpected():null},H.parseClassSuper=function(t){t.superClass=this.eat(w._extends)?this.parseExprSubscripts():null},H.parseExport=function(t,e){if(this.next(),this.eat(w.star))return this.expectContextual("from"),this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(w._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===w._function||(i=this.isAsyncFunction())){var r=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(r,"nullableID",!1,i)}else if(this.type===w._class){var n=this.startNode();t.declaration=this.parseClass(n,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==w.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},H.checkExport=function(t,e,i){t&&(I(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},H.checkPatternExport=function(t,e){var i=e.type;if("Identifier"==i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"==i)for(var r=0,n=e.properties;r<n.length;r+=1){var s=n[r];this.checkPatternExport(t,s)}else if("ArrayPattern"==i)for(var a=0,o=e.elements;a<o.length;a+=1){var h=o[a];h&&this.checkPatternExport(t,h)}else"Property"==i?this.checkPatternExport(t,e.value):"AssignmentPattern"==i?this.checkPatternExport(t,e.left):"RestElement"==i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"==i&&this.checkPatternExport(t,e.expression)},H.checkVariableExport=function(t,e){if(t)for(var i=0,r=e;i<r.length;i+=1){var n=r[i];this.checkPatternExport(t,n.id)}},H.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},H.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(w.braceL);!this.eat(w.braceR);){if(i)i=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},H.parseImport=function(t){return this.next(),this.type===w.string?(t.specifiers=q,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===w.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},H.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===w.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,"let"),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(w.comma))return t}if(this.type===w.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,"let"),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(w.braceL);!this.eat(w.braceR);){if(e)e=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,"let"),t.push(this.finishNode(n,"ImportSpecifier"))}return t},H.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},H.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var Y=U.prototype;Y.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var r=0,n=t.properties;r<n.length;r+=1){var s=n[r];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},Y.toAssignableList=function(t,e){for(var i=t.length,r=0;r<i;r++){var n=t[r];n&&this.toAssignable(n,e)}if(i){var s=t[i-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},Y.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},Y.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==w.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},Y.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case w.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(w.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case w.braceL:return this.parseObj(!0)}return this.parseIdent()},Y.parseBindingList=function(t,e,i){for(var r=[],n=!0;!this.eat(t);)if(n?n=!1:this.expect(w.comma),e&&this.type===w.comma)r.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===w.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),r.push(s),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),r.push(a)}return r},Y.parseBindingListItem=function(t){return t},Y.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(w.eq))return i;var r=this.startNodeAt(t,e);return r.left=i,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},Y.checkLVal=function(t,e,i){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(I(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),e&&"none"!==e&&(("var"===e&&!this.canDeclareVarName(t.name)||"var"!==e&&!this.canDeclareLexicalName(t.name))&&this.raiseRecoverable(t.start,"Identifier '"+t.name+"' has already been declared"),"var"===e?this.declareVarName(t.name):this.declareLexicalName(t.name));break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,n=t.properties;r<n.length;r+=1){var s=n[r];this.checkLVal(s,e,i)}break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var h=o[a];h&&this.checkLVal(h,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var Z=U.prototype;Z.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var r,n=t.key;switch(n.type){case"Identifier":r=n.name;break;case"Literal":r=String(n.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===r&&"init"===s&&(e.proto&&(i&&i.doubleProto<0?i.doubleProto=n.start:this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[r="$"+r];if(a)("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(n.start,"Redefinition of property");else a=e[r]={init:!1,get:!1,set:!1};a[s]=!0}}},Z.parseExpression=function(t,e){var i=this.start,r=this.startLoc,n=this.parseMaybeAssign(t,e);if(this.type===w.comma){var s=this.startNodeAt(i,r);for(s.expressions=[n];this.eat(w.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return n},Z.parseMaybeAssign=function(t,e,i){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,n=-1,s=-1;e?(n=e.parenthesizedAssign,s=e.trailingComma,e.parenthesizedAssign=e.trailingComma=-1):(e=new X,r=!0);var a=this.start,o=this.startLoc;this.type!=w.parenL&&this.type!=w.name||(this.potentialArrowAt=this.start);var h=this.parseMaybeConditional(t,e);if(i&&(h=i.call(this,h,a,o)),this.type.isAssign){var u=this.startNodeAt(a,o);return u.operator=this.value,u.left=this.type===w.eq?this.toAssignable(h,!1,e):h,r||X.call(e),e.shorthandAssign=-1,this.checkLVal(h),this.next(),u.right=this.parseMaybeAssign(t),this.finishNode(u,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),n>-1&&(e.parenthesizedAssign=n),s>-1&&(e.trailingComma=s),h},Z.parseMaybeConditional=function(t,e){var i=this.start,r=this.startLoc,n=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return n;if(this.eat(w.question)){var s=this.startNodeAt(i,r);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(w.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return n},Z.parseExprOps=function(t,e){var i=this.start,r=this.startLoc,n=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?n:n.start==i&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,i,r,-1,t)},Z.parseExprOp=function(t,e,i,r,n){var s=this.type.binop;if(null!=s&&(!n||this.type!==w._in)&&s>r){var a=this.type===w.logicalOR||this.type===w.logicalAND,o=this.value;this.next();var h=this.start,u=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),h,u,s,n),c=this.buildBinary(e,i,t,l,o,a);return this.parseExprOp(c,e,i,r,n)}return t},Z.buildBinary=function(t,e,i,r,n,s){var a=this.startNodeAt(t,e);return a.left=i,a.operator=n,a.right=r,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},Z.parseMaybeUnary=function(t,e){var i,r=this.start,n=this.startLoc;if(this.inAsync&&this.isContextual("await"))i=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===w.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(r,n);o.operator=this.value,o.prefix=!1,o.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(o,"UpdateExpression")}}return!e&&this.eat(w.starstar)?this.buildBinary(r,n,i,this.parseMaybeUnary(null,!1),"**",!1):i},Z.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,r=this.parseExprAtom(t),n="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||n)return r;var s=this.parseSubscripts(r,e,i);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},Z.parseSubscripts=function(t,e,i,r){for(var n=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd==t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end),s=void 0;;)if((s=this.eat(w.bracketL))||this.eat(w.dot)){var a=this.startNodeAt(e,i);a.object=t,a.property=s?this.parseExpression():this.parseIdent(!0),a.computed=!!s,s&&this.expect(w.bracketR),t=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(w.parenL)){var o=new X,h=this.yieldPos,u=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var l=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1,o);if(n&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=u,this.parseArrowExpression(this.startNodeAt(e,i),l,!0);this.checkExpressionErrors(o,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=u||this.awaitPos;var c=this.startNodeAt(e,i);c.callee=t,c.arguments=l,t=this.finishNode(c,"CallExpression")}else{if(this.type!==w.backQuote)return t;var d=this.startNodeAt(e,i);d.tag=t,d.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(d,"TaggedTemplateExpression")}},Z.parseExprAtom=function(t){var e,i=this.potentialArrowAt==this.start;switch(this.type){case w._super:return this.inFunction||this.raise(this.start,"'super' outside of function or class"),e=this.startNode(),this.next(),this.type!==w.dot&&this.type!==w.bracketL&&this.type!==w.parenL&&this.unexpected(),this.finishNode(e,"Super");case w._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case w.name:var r=this.start,n=this.startLoc,s=this.containsEsc,a=this.parseIdent(this.type!==w.name);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(w._function))return this.parseFunction(this.startNodeAt(r,n),!1,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(w.arrow))return this.parseArrowExpression(this.startNodeAt(r,n),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===w.name&&!s)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(w.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,n),[a],!0)}return a;case w.regexp:var o=this.value;return(e=this.parseLiteral(o.value)).regex={pattern:o.pattern,flags:o.flags},e;case w.num:case w.string:return this.parseLiteral(this.value);case w._null:case w._true:case w._false:return(e=this.startNode()).value=this.type===w._null?null:this.type===w._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case w.parenL:var h=this.start,u=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=h),t.parenthesizedBind<0&&(t.parenthesizedBind=h)),u;case w.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(w.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case w.braceL:return this.parseObj(!1,t);case w._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case w._class:return this.parseClass(this.startNode(),!1);case w._new:return this.parseNew();case w.backQuote:return this.parseTemplate();default:this.unexpected()}},Z.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},Z.parseParenExpression=function(){this.expect(w.parenL);var t=this.parseExpression();return this.expect(w.parenR),t},Z.parseParenAndDistinguishExpression=function(t){var e,i=this.start,r=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,h=[],u=!0,l=!1,c=new X,d=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==w.parenR;){if(u?u=!1:this.expect(w.comma),n&&this.afterTrailingComma(w.parenR,!0)){l=!0;break}if(this.type===w.ellipsis){s=this.start,h.push(this.parseParenItem(this.parseRestBinding())),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}h.push(this.parseMaybeAssign(!1,c,this.parseParenItem))}var p=this.start,g=this.startLoc;if(this.expect(w.parenR),t&&!this.canInsertSemicolon()&&this.eat(w.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=f,this.parseParenArrowList(i,r,h);h.length&&!l||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(c,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=f||this.awaitPos,h.length>1?((e=this.startNodeAt(a,o)).expressions=h,this.finishNodeAt(e,"SequenceExpression",p,g)):e=h[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(i,r);return v.expression=e,this.finishNode(v,"ParenthesizedExpression")}return e},Z.parseParenItem=function(t){return t},Z.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var K=[];Z.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(w.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||i)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var r=this.start,n=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),r,n,!0),this.eat(w.parenL)?t.arguments=this.parseExprList(w.parenR,this.options.ecmaVersion>=8,!1):t.arguments=K,this.finishNode(t,"NewExpression")},Z.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===w.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===w.backQuote,this.finishNode(i,"TemplateElement")},Z.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(i.quasis=[r];!r.tail;)this.expect(w.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(w.braceR),i.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},Z.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===w.name||this.type===w.num||this.type===w.string||this.type===w.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===w.star)&&!T.test(this.input.slice(this.lastTokEnd,this.start))},Z.parseObj=function(t,e){var i=this.startNode(),r=!0,n={};for(i.properties=[],this.next();!this.eat(w.braceR);){if(r)r=!1;else if(this.expect(w.comma),this.afterTrailingComma(w.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,n,e),i.properties.push(s)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},Z.parseProperty=function(t,e){var i,r,n,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(w.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===w.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===w.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,e),this.type===w.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(n=this.start,s=this.startLoc),t||(i=this.eat(w.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(a)?(r=!0,i=this.options.ecmaVersion>=9&&this.eat(w.star),this.parsePropertyName(a,e)):r=!1,this.parsePropertyValue(a,t,i,r,n,s,e,o),this.finishNode(a,"Property")},Z.parsePropertyValue=function(t,e,i,r,n,s,a,o){if((i||r)&&this.type===w.colon&&this.unexpected(),this.eat(w.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===w.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,r);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type==w.comma||this.type==w.braceR)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?(this.checkUnreserved(t.key),t.kind="init",e?t.value=this.parseMaybeDefault(n,s,t.key):this.type===w.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(n,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected();else{(i||r)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var h="get"===t.kind?0:1;if(t.value.params.length!==h){var u=t.value.start;"get"===t.kind?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},Z.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(w.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(w.bracketR),t.key;t.computed=!1}return t.key=this.type===w.num||this.type===w.string?this.parseExprAtom():this.parseIdent(!0)},Z.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},Z.parseMethod=function(t,e){var i=this.startNode(),r=this.inGenerator,n=this.inAsync,s=this.yieldPos,a=this.awaitPos,o=this.inFunction;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.inGenerator=i.generator,this.inAsync=i.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(w.parenL),i.params=this.parseBindingList(w.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1),this.inGenerator=r,this.inAsync=n,this.yieldPos=s,this.awaitPos=a,this.inFunction=o,this.finishNode(i,"FunctionExpression")},Z.parseArrowExpression=function(t,e,i){var r=this.inGenerator,n=this.inAsync,s=this.yieldPos,a=this.awaitPos,o=this.inFunction;return this.enterFunctionScope(),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.inGenerator=!1,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.inAsync=n,this.yieldPos=s,this.awaitPos=a,this.inFunction=o,this.finishNode(t,"ArrowFunctionExpression")},Z.parseFunctionBody=function(t,e){var i=e&&this.type!==w.braceL,r=this.strict,n=!1;if(i)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!s||(n=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],n&&(this.strict=!0),this.checkParams(t,!r&&!n&&!e&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=a}this.exitFunctionScope(),this.strict&&t.id&&this.checkLVal(t.id,"none"),this.strict=r},Z.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1){if("Identifier"!==i[e].type)return!1}return!0},Z.checkParams=function(t,e){for(var i={},r=0,n=t.params;r<n.length;r+=1){var s=n[r];this.checkLVal(s,"var",e?null:i)}},Z.parseExprList=function(t,e,i,r){for(var n=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(w.comma),e&&this.afterTrailingComma(t))break;var a=void 0;i&&this.type===w.comma?a=null:this.type===w.ellipsis?(a=this.parseSpread(r),r&&this.type===w.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),n.push(a)}return n},Z.checkUnreserved=function(t){var e=t.start,i=t.end,r=t.name;(this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Can not use 'await' as identifier inside an async function"),this.isKeyword(r)&&this.raise(e,"Unexpected keyword '"+r+"'"),this.options.ecmaVersion<6&&-1!=this.input.slice(e,i).indexOf("\\"))||(this.strict?this.reservedWordsStrict:this.reservedWords).test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Can not use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+r+"' is reserved"))},Z.parseIdent=function(t,e){var i=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===w.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||this.checkUnreserved(i),i},Z.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type==w.semi||this.canInsertSemicolon()||this.type!=w.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(w.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")},Z.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var J=U.prototype;J.raise=function(t,e){var i=L(this.input,t);e+=" ("+i.line+":"+i.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=i,r.raisedAt=this.pos,r},J.raiseRecoverable=J.raise,J.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var $=U.prototype,Q=Object.assign||function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var r=0,n=e;r<n.length;r+=1){var s=n[r];for(var a in s)I(s,a)&&(t[a]=s[a])}return t};$.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},$.exitFunctionScope=function(){this.scopeStack.pop()},$.enterLexicalScope=function(){var t=this.scopeStack[this.scopeStack.length-1],e={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(e),Q(e.parentLexical,t.lexical,t.parentLexical)},$.exitLexicalScope=function(){var t=this.scopeStack.pop(),e=this.scopeStack[this.scopeStack.length-1];Q(e.childVar,t.var,t.childVar)},$.canDeclareVarName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!I(e.lexical,t)&&!I(e.parentLexical,t)},$.canDeclareLexicalName=function(t){var e=this.scopeStack[this.scopeStack.length-1];return!I(e.lexical,t)&&!I(e.var,t)&&!I(e.childVar,t)},$.declareVarName=function(t){this.scopeStack[this.scopeStack.length-1].var[t]=!0},$.declareLexicalName=function(t){this.scopeStack[this.scopeStack.length-1].lexical[t]=!0};var tt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new D(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},et=U.prototype;function it(t,e,i,r){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=i),t}et.startNode=function(){return new tt(this,this.start,this.startLoc)},et.startNodeAt=function(t,e){return new tt(this,t,e)},et.finishNode=function(t,e){return it.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},et.finishNodeAt=function(t,e,i,r){return it.call(this,t,e,i,r)};var rt=function(t,e,i,r,n){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=r,this.generator=!!n},nt={b_stat:new rt("{",!1),b_expr:new rt("{",!0),b_tmpl:new rt("${",!1),p_stat:new rt("(",!1),p_expr:new rt("(",!0),q_tmpl:new rt("`",!0,!0,function(t){return t.tryReadTemplateToken()}),f_stat:new rt("function",!1),f_expr:new rt("function",!0),f_expr_gen:new rt("function",!0,!1,null,!0),f_gen:new rt("function",!1,!1,null,!0)},st=U.prototype;st.initialContext=function(){return[nt.b_stat]},st.braceIsBlock=function(t){var e=this.curContext();return e===nt.f_expr||e===nt.f_stat||(t!==w.colon||e!==nt.b_stat&&e!==nt.b_expr?t===w._return||t==w.name&&this.exprAllowed?T.test(this.input.slice(this.lastTokEnd,this.start)):t===w._else||t===w.semi||t===w.eof||t===w.parenR||t==w.arrow||(t==w.braceL?e===nt.b_stat:t!=w._var&&t!=w.name&&!this.exprAllowed):!e.isExpr)},st.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},st.updateContext=function(t){var e,i=this.type;i.keyword&&t==w.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},w.parenR.updateContext=w.braceR.updateContext=function(){if(1!=this.context.length){var t=this.context.pop();t===nt.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},w.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?nt.b_stat:nt.b_expr),this.exprAllowed=!0},w.dollarBraceL.updateContext=function(){this.context.push(nt.b_tmpl),this.exprAllowed=!0},w.parenL.updateContext=function(t){var e=t===w._if||t===w._for||t===w._with||t===w._while;this.context.push(e?nt.p_stat:nt.p_expr),this.exprAllowed=!0},w.incDec.updateContext=function(){},w._function.updateContext=w._class.updateContext=function(t){t.beforeExpr&&t!==w.semi&&t!==w._else&&(t!==w.colon&&t!==w.braceL||this.curContext()!==nt.b_stat)?this.context.push(nt.f_expr):this.context.push(nt.f_stat),this.exprAllowed=!1},w.backQuote.updateContext=function(){this.curContext()===nt.q_tmpl?this.context.pop():this.context.push(nt.q_tmpl),this.exprAllowed=!1},w.star.updateContext=function(t){if(t==w._function){var e=this.context.length-1;this.context[e]===nt.f_expr?this.context[e]=nt.f_expr_gen:this.context[e]=nt.f_gen}this.exprAllowed=!0},w.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&("of"==this.value&&!this.exprAllowed||"yield"==this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var at={$LONE:["ASCII","ASCII_Hex_Digit","AHex","Alphabetic","Alpha","Any","Assigned","Bidi_Control","Bidi_C","Bidi_Mirrored","Bidi_M","Case_Ignorable","CI","Cased","Changes_When_Casefolded","CWCF","Changes_When_Casemapped","CWCM","Changes_When_Lowercased","CWL","Changes_When_NFKC_Casefolded","CWKCF","Changes_When_Titlecased","CWT","Changes_When_Uppercased","CWU","Dash","Default_Ignorable_Code_Point","DI","Deprecated","Dep","Diacritic","Dia","Emoji","Emoji_Component","Emoji_Modifier","Emoji_Modifier_Base","Emoji_Presentation","Extender","Ext","Grapheme_Base","Gr_Base","Grapheme_Extend","Gr_Ext","Hex_Digit","Hex","IDS_Binary_Operator","IDSB","IDS_Trinary_Operator","IDST","ID_Continue","IDC","ID_Start","IDS","Ideographic","Ideo","Join_Control","Join_C","Logical_Order_Exception","LOE","Lowercase","Lower","Math","Noncharacter_Code_Point","NChar","Pattern_Syntax","Pat_Syn","Pattern_White_Space","Pat_WS","Quotation_Mark","QMark","Radical","Regional_Indicator","RI","Sentence_Terminal","STerm","Soft_Dotted","SD","Terminal_Punctuation","Term","Unified_Ideograph","UIdeo","Uppercase","Upper","Variation_Selector","VS","White_Space","space","XID_Continue","XIDC","XID_Start","XIDS"],General_Category:["Cased_Letter","LC","Close_Punctuation","Pe","Connector_Punctuation","Pc","Control","Cc","cntrl","Currency_Symbol","Sc","Dash_Punctuation","Pd","Decimal_Number","Nd","digit","Enclosing_Mark","Me","Final_Punctuation","Pf","Format","Cf","Initial_Punctuation","Pi","Letter","L","Letter_Number","Nl","Line_Separator","Zl","Lowercase_Letter","Ll","Mark","M","Combining_Mark","Math_Symbol","Sm","Modifier_Letter","Lm","Modifier_Symbol","Sk","Nonspacing_Mark","Mn","Number","N","Open_Punctuation","Ps","Other","C","Other_Letter","Lo","Other_Number","No","Other_Punctuation","Po","Other_Symbol","So","Paragraph_Separator","Zp","Private_Use","Co","Punctuation","P","punct","Separator","Z","Space_Separator","Zs","Spacing_Mark","Mc","Surrogate","Cs","Symbol","S","Titlecase_Letter","Lt","Unassigned","Cn","Uppercase_Letter","Lu"],Script:["Adlam","Adlm","Ahom","Anatolian_Hieroglyphs","Hluw","Arabic","Arab","Armenian","Armn","Avestan","Avst","Balinese","Bali","Bamum","Bamu","Bassa_Vah","Bass","Batak","Batk","Bengali","Beng","Bhaiksuki","Bhks","Bopomofo","Bopo","Brahmi","Brah","Braille","Brai","Buginese","Bugi","Buhid","Buhd","Canadian_Aboriginal","Cans","Carian","Cari","Caucasian_Albanian","Aghb","Chakma","Cakm","Cham","Cherokee","Cher","Common","Zyyy","Coptic","Copt","Qaac","Cuneiform","Xsux","Cypriot","Cprt","Cyrillic","Cyrl","Deseret","Dsrt","Devanagari","Deva","Duployan","Dupl","Egyptian_Hieroglyphs","Egyp","Elbasan","Elba","Ethiopic","Ethi","Georgian","Geor","Glagolitic","Glag","Gothic","Goth","Grantha","Gran","Greek","Grek","Gujarati","Gujr","Gurmukhi","Guru","Han","Hani","Hangul","Hang","Hanunoo","Hano","Hatran","Hatr","Hebrew","Hebr","Hiragana","Hira","Imperial_Aramaic","Armi","Inherited","Zinh","Qaai","Inscriptional_Pahlavi","Phli","Inscriptional_Parthian","Prti","Javanese","Java","Kaithi","Kthi","Kannada","Knda","Katakana","Kana","Kayah_Li","Kali","Kharoshthi","Khar","Khmer","Khmr","Khojki","Khoj","Khudawadi","Sind","Lao","Laoo","Latin","Latn","Lepcha","Lepc","Limbu","Limb","Linear_A","Lina","Linear_B","Linb","Lisu","Lycian","Lyci","Lydian","Lydi","Mahajani","Mahj","Malayalam","Mlym","Mandaic","Mand","Manichaean","Mani","Marchen","Marc","Masaram_Gondi","Gonm","Meetei_Mayek","Mtei","Mende_Kikakui","Mend","Meroitic_Cursive","Merc","Meroitic_Hieroglyphs","Mero","Miao","Plrd","Modi","Mongolian","Mong","Mro","Mroo","Multani","Mult","Myanmar","Mymr","Nabataean","Nbat","New_Tai_Lue","Talu","Newa","Nko","Nkoo","Nushu","Nshu","Ogham","Ogam","Ol_Chiki","Olck","Old_Hungarian","Hung","Old_Italic","Ital","Old_North_Arabian","Narb","Old_Permic","Perm","Old_Persian","Xpeo","Old_South_Arabian","Sarb","Old_Turkic","Orkh","Oriya","Orya","Osage","Osge","Osmanya","Osma","Pahawh_Hmong","Hmng","Palmyrene","Palm","Pau_Cin_Hau","Pauc","Phags_Pa","Phag","Phoenician","Phnx","Psalter_Pahlavi","Phlp","Rejang","Rjng","Runic","Runr","Samaritan","Samr","Saurashtra","Saur","Sharada","Shrd","Shavian","Shaw","Siddham","Sidd","SignWriting","Sgnw","Sinhala","Sinh","Sora_Sompeng","Sora","Soyombo","Soyo","Sundanese","Sund","Syloti_Nagri","Sylo","Syriac","Syrc","Tagalog","Tglg","Tagbanwa","Tagb","Tai_Le","Tale","Tai_Tham","Lana","Tai_Viet","Tavt","Takri","Takr","Tamil","Taml","Tangut","Tang","Telugu","Telu","Thaana","Thaa","Thai","Tibetan","Tibt","Tifinagh","Tfng","Tirhuta","Tirh","Ugaritic","Ugar","Vai","Vaii","Warang_Citi","Wara","Yi","Yiii","Zanabazar_Square","Zanb"]};Array.prototype.push.apply(at.$LONE,at.General_Category),at.gc=at.General_Category,at.sc=at.Script_Extensions=at.scx=at.Script;var ot=U.prototype,ht=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function ut(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function lt(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function ct(t){return t>=65&&t<=90||t>=97&&t<=122}function dt(t){return ct(t)||95===t}function ft(t){return dt(t)||pt(t)}function pt(t){return t>=48&&t<=57}function gt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function vt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function _t(t){return t>=48&&t<=55}ht.prototype.reset=function(t,e,i){var r=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=r&&this.parser.options.ecmaVersion>=6,this.switchN=r&&this.parser.options.ecmaVersion>=9},ht.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},ht.prototype.at=function(t){var e=this.source,i=e.length;if(t>=i)return-1;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=i?r:(r<<10)+e.charCodeAt(t+1)-56613888},ht.prototype.nextIndex=function(t){var e=this.source,i=e.length;if(t>=i)return i;var r=e.charCodeAt(t);return!this.switchU||r<=55295||r>=57344||t+1>=i?t+1:t+2},ht.prototype.current=function(){return this.at(this.pos)},ht.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},ht.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},ht.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},ot.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,r=0;r<i.length;r++){var n=i.charAt(r);-1==e.indexOf(n)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(n,r+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},ot.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},ot.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1){var r=i[e];-1===t.groupNames.indexOf(r)&&t.raise("Invalid named capture referenced")}},ot.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},ot.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},ot.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},ot.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},ot.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},ot.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},ot.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var r=0,n=-1;if(this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue),t.eat(125)))return-1!==n&&n<r&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},ot.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},ot.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},ot.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},ot.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},ot.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},ot.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},ot.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!lt(e)&&(t.lastIntValue=e,t.advance(),!0)},ot.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!lt(i);)t.advance();return t.pos!==e},ot.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e)&&(t.advance(),!0)},ot.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},ot.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},ot.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=ut(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=ut(t.lastIntValue);return!0}return!1},ot.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return p(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},ot.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return g(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},ot.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},ot.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},ot.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},ot.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},ot.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},ot.regexp_eatZero=function(t){return 48===t.current()&&!pt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},ot.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},ot.regexp_eatControlLetter=function(t){var e=t.current();return!!ct(e)&&(t.lastIntValue=e%32,t.advance(),!0)},ot.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,i=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var r=t.lastIntValue;if(t.switchU&&r>=55296&&r<=56319){var n=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(r-55296)+(s-56320)+65536,!0}t.pos=n,t.lastIntValue=r}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&((e=t.lastIntValue)>=0&&e<=1114111))return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=i}return!1},ot.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e)&&(t.lastIntValue=e,t.advance(),!0)},ot.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},ot.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},ot.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,i,r),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var n=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,n),!0}return!1},ot.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){at.hasOwnProperty(e)&&-1!==at[e].indexOf(i)||t.raise("Invalid property name")},ot.regexp_validateUnicodePropertyNameOrValue=function(t,e){-1===at.$LONE.indexOf(e)&&t.raise("Invalid property name")},ot.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";dt(e=t.current());)t.lastStringValue+=ut(e),t.advance();return""!==t.lastStringValue},ot.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";ft(e=t.current());)t.lastStringValue+=ut(e),t.advance();return""!==t.lastStringValue},ot.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},ot.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},ot.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},ot.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||_t(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var r=t.current();return 93!==r&&(t.lastIntValue=r,t.advance(),!0)},ot.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},ot.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!pt(e)&&95!==e)&&(t.lastIntValue=e%32,t.advance(),!0)},ot.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},ot.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;pt(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},ot.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;gt(i=t.current());)t.lastIntValue=16*t.lastIntValue+vt(i),t.advance();return t.pos!==e},ot.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*i+t.lastIntValue:t.lastIntValue=8*e+i}else t.lastIntValue=e;return!0}return!1},ot.regexp_eatOctalDigit=function(t){var e=t.current();return _t(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},ot.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var r=0;r<e;++r){var n=t.current();if(!gt(n))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+vt(n),t.advance()}return!0};var mt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new D(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},yt=U.prototype;function xt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}yt.next=function(){this.options.onToken&&this.options.onToken(new mt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},yt.getToken=function(){return this.next(),new mt(this)},"undefined"!=typeof Symbol&&(yt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===w.eof,value:e}}}}),yt.curContext=function(){return this.context[this.context.length-1]},yt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(w.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},yt.readToken=function(t){return p(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},yt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},yt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),i=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(S.lastIndex=i;(t=S.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,r),i,this.pos,e,this.curPosition())},yt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!E(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},yt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&C.test(String.fromCharCode(t))))break t;++this.pos}}},yt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},yt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(w.ellipsis)):(++this.pos,this.finishToken(w.dot))},yt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(w.assign,2):this.finishOp(w.slash,1)},yt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,r=42===t?w.star:w.modulo;return this.options.ecmaVersion>=7&&42==t&&42===e&&(++i,r=w.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(w.assign,i+1):this.finishOp(r,i)},yt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?w.logicalOR:w.logicalAND,2):61===e?this.finishOp(w.assign,2):this.finishOp(124===t?w.bitwiseOR:w.bitwiseAND,1)},yt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(w.assign,2):this.finishOp(w.bitwiseXOR,1)},yt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!=e||this.inModule||62!=this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!T.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(w.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(w.assign,2):this.finishOp(w.plusMin,1)},yt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(w.assign,i+1):this.finishOp(w.bitShift,i)):33!=e||60!=t||this.inModule||45!=this.input.charCodeAt(this.pos+2)||45!=this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(w.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},yt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(w.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(w.arrow)):this.finishOp(61===t?w.eq:w.prefix,1)},yt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(w.parenL);case 41:return++this.pos,this.finishToken(w.parenR);case 59:return++this.pos,this.finishToken(w.semi);case 44:return++this.pos,this.finishToken(w.comma);case 91:return++this.pos,this.finishToken(w.bracketL);case 93:return++this.pos,this.finishToken(w.bracketR);case 123:return++this.pos,this.finishToken(w.braceL);case 125:return++this.pos,this.finishToken(w.braceR);case 58:return++this.pos,this.finishToken(w.colon);case 63:return++this.pos,this.finishToken(w.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(w.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(w.prefix,1)}this.raise(this.pos,"Unexpected character '"+xt(t)+"'")},yt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},yt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(T.test(r)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++this.pos}var n=this.input.slice(i,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new ht(this));o.reset(i,n,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var h=null;try{h=new RegExp(n,a)}catch(t){}return this.finishToken(w.regexp,{pattern:n,flags:a,value:h})},yt.readInt=function(t,e){for(var i=this.pos,r=0,n=0,s=null==e?1/0:e;n<s;++n){var a=this.input.charCodeAt(this.pos),o=void 0;if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++this.pos,r=r*t+o}return this.pos===i||null!=e&&this.pos-i!==e?null:r},yt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(w.num,e)},yt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number"),i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1);var r=this.input.charCodeAt(this.pos);46!==r||i||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||i||(43!==(r=this.input.charCodeAt(++this.pos))&&45!==r||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),p(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var n=this.input.slice(e,this.pos),s=i?parseInt(n,8):parseFloat(n);return this.finishToken(w.num,s)},yt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},yt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):(E(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(w.string,e)};var bt={};yt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==bt)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},yt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw bt;this.raise(t,e)},yt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==w.template&&this.type!==w.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(w.template,t)):36===i?(this.pos+=2,this.finishToken(w.dollarBraceL)):(++this.pos,this.finishToken(w.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(E(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},yt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(w.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},yt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return xt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!=e&&57!=e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,"Octal literal in strict mode"),String.fromCharCode(r)}return String.fromCharCode(e)}},yt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},yt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(g(n,r))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var s=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?p:g)(a,r)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=xt(a),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},yt.readWord=function(){var t=this.readWord1(),e=w.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=x[t]),this.finishToken(e,t)};var wt,Tt,St,Et="5.5.0";function Ct(t,e){return new U(e,t).parse()}function Pt(t,e,i){var r=new U(i,t,e);return r.nextToken(),r.parseExpression()}function Ot(t,e){return new U(e,t)}function Mt(t,e,i){wt=t,Tt=e,St=i}},function(t,e){},function(t,e,i){var r,n,s,a=function(o,h){var u=(o=o||i(95)).window,l=o.document,c=new function(){var t=/^(statics|enumerable|beans|preserve)$/,e=[],i=e.slice,r=Object.create,n=Object.getOwnPropertyDescriptor,s=Object.defineProperty,a=e.forEach||function(t,e){for(var i=0,r=this.length;i<r;i++)t.call(e,this[i],i,this)},o=Object.assign||function(t){for(var e=1,i=arguments.length;e<i;e++){var r=arguments[e];for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])}return t},u=function(t,e,i){if(t){var r=n(t,"length");(r&&"number"==typeof r.value?a:function(t,e){for(var i in this)this.hasOwnProperty(i)&&t.call(e,this[i],i,this)}).call(t,e,i=i||t)}return i};function l(e,i,r,a,o){var h={};function u(t,u){"string"==typeof(u=u||(u=n(i,t))&&(u.get?u:u.value))&&"#"===u[0]&&(u=e[u.substring(1)]||u);var l,d="function"==typeof u,f=u,p=o||d&&!u.base?u&&u.get?t in e:e[t]:null;o&&p||(d&&p&&(u.base=p),d&&!1!==a&&(l=t.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(h[l[3].toLowerCase()+l[4]]=l[2]),f&&!d&&f.get&&"function"==typeof f.get&&c.isPlainObject(f)||(f={value:f,writable:!0}),(n(e,t)||{configurable:!0}).configurable&&(f.configurable=!0,f.enumerable=null!=r?r:!l),s(e,t,f))}if(i){for(var l in i)i.hasOwnProperty(l)&&!t.test(l)&&u(l);for(var l in h){var d=h[l],f=e["set"+d],p=e["get"+d]||f&&e["is"+d];!p||!0!==a&&0!==p.length||u(l,{get:p,set:f})}}return e}function c(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&o(this,i)}return this}return l(c,{inject:function(t){if(t){var e=!0===t.statics?t:t.statics,i=t.beans,r=t.preserve;e!==t&&l(this.prototype,t,t.enumerable,i,r),l(this,e,null,i,r)}for(var n=1,s=arguments.length;n<s;n++)this.inject(arguments[n]);return this},extend:function(){for(var t,e,i,n=this,a=0,o=arguments.length;a<o&&(!t||!e);a++)i=arguments[a],t=t||i.initialize,e=e||i.prototype;return e=(t=t||function(){n.apply(this,arguments)}).prototype=e||r(this.prototype),s(e,"constructor",{value:t,writable:!0,configurable:!0}),l(t,this),arguments.length&&this.inject.apply(t,arguments),t.base=n,t}}).inject({enumerable:!1,initialize:c,set:c,inject:function(){for(var t=0,e=arguments.length;t<e;t++){var i=arguments[t];i&&l(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=r(this);return t.inject.apply(t,arguments)},each:function(t,e){return u(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:o,each:u,create:r,define:s,describe:n,clone:function(t){return o(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===c||"Object"===e.name)},pick:function(t,e){return t!==h?t:e},slice:function(t,e,r){return i.call(t,e,r)}}})};t.exports=c,c.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+c.each(this,function(t,e){if(!/^_/.test(e)){var i=typeof t;this.push(e+": "+("number"===i?g.instance.number(t):"string"===i?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return c.importJSON(t,this)},exportJSON:function(t){return c.exportJSON(this,t)},toJSON:function(){return c.serialize(this)},set:function(t,e){return t&&c.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),i=e.prototype._class;return i&&!c.exports[i]&&(c.exports[i]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((i=t.length)!==e.length)return!1;for(;i--;)if(!c.equals(t[i],e[i]))return!1}else{var i,r=Object.keys(t);if((i=r.length)!==Object.keys(e).length)return!1;for(;i--;){var n=r[i];if(!e.hasOwnProperty(n)||!c.equals(t[n],e[n]))return!1}}return!0}return!1},read:function(t,e,i,r){if(this===c){var n=this.peek(t,e);return t.__index++,n}var s=this.prototype,a=s._readIndex,o=e||a&&t.__index||0,u=t.length,l=t[o];if(r=r||u-o,l instanceof this||i&&i.readNull&&null==l&&r<=1)return a&&(t.__index=o+1),l&&i&&i.clone?l.clone():l;if(l=c.create(s),a&&(l.__read=!0),l=l.initialize.apply(l,o>0||o+r<u?c.slice(t,o,o+r):t)||l,a){t.__index=o+l.__read;var d=l.__filtered;d&&(t.__filtered=d,l.__filtered=h),l.__read=h}return l},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,i,r){for(var n,s=[],a=e||0,o=r?a+r:t.length,h=a;h<o;h++)s.push(Array.isArray(n=t[h])?this.read(n,0,i):this.read(t,h,i,1));return s},readNamed:function(t,e,i,r,n){var s=this.getNamed(t,e),a=s!==h;if(a){var o=t.__filtered;o||((o=t.__filtered=c.create(t[0])).__unfiltered=t[0]),o[e]=h}var u=a?[s]:t;return this.read(u,i,r,n)},getNamed:function(t,e){var i=t[0];if(t._hasObject===h&&(t._hasObject=1===t.length&&c.isPlainObject(i)),t._hasObject)return e?i[e]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,e,i,r){var n;function s(r){if(!(i&&r in i||n&&r in n)){var s=e[r];s!==h&&(t[r]=s)}}if(r){for(var a,o={},u=0,l=r.length;u<l;u++)(a=r[u])in e&&(s(a),o[a]=!0);n=o}return Object.keys(e.__unfiltered||e).forEach(s),t},isPlainValue:function(t,e){return c.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,i,r){e=e||{};var n,s=!r;if(s&&(e.formatter=new g(e.precision),r={length:0,definitions:{},references:{},add:function(t,e){var i="#"+t._id,r=this.references[i];if(!r){this.length++;var n=e.call(t),s=t._class;s&&n[0]!==s&&n.unshift(s),this.definitions[i]=n,r=this.references[i]=[i]}return r}}),t&&t._serialize){n=t._serialize(e,r);var a=t._class;!a||t._compactSerialize||!s&&i||n[0]===a||n.unshift(a)}else if(Array.isArray(t)){n=[];for(var o=0,h=t.length;o<h;o++)n[o]=c.serialize(t[o],e,i,r)}else if(c.isPlainObject(t)){n={};var u=Object.keys(t);for(o=0,h=u.length;o<h;o++){var l=u[o];n[l]=c.serialize(t[l],e,i,r)}}else n="number"==typeof t?e.formatter.number(t,e.precision):t;return s&&r.length>0?[["dictionary",r.definitions],n]:n},deserialize:function(t,e,i,r,n){var s=t,a=!i,o=a&&t&&t.length&&"dictionary"===t[0][0];if(i=i||{},Array.isArray(t)){var h=t[0],u="dictionary"===h;if(1==t.length&&/^#/.test(h))return i.dictionary[h];s=[];for(var l=(h=c.exports[h])?1:0,d=t.length;l<d;l++)s.push(c.deserialize(t[l],e,i,u,o));if(h){var f=s;e?s=e(h,f,a||n):(s=c.create(h.prototype),h.apply(s,f))}}else if(c.isPlainObject(t))for(var p in s={},r&&(i.dictionary=s),t)s[p]=c.deserialize(t[p],e,i);return o?s[1]:s},exportJSON:function(t,e){var i=c.serialize(t,e);return e&&0==e.asString?i:JSON.stringify(i)},importJSON:function(t,e){return c.deserialize("string"==typeof t?JSON.parse(t):t,function(t,i,r){var n=r&&e&&e.constructor===t,s=n?e:c.create(t.prototype);if(1===i.length&&s instanceof P&&(n||!(s instanceof M))){var a=i[0];c.isPlainObject(a)&&(a.insert=!1)}return(n?s.set:t).apply(s,i),n&&(e=null),s})},splice:function(t,e,i,r){var n=e&&e.length,s=i===h;(i=s?t.length:i)>t.length&&(i=t.length);for(var a=0;a<n;a++)e[a]._index=i+a;if(s)return t.push.apply(t,e),[];var o=[i,r];e&&o.push.apply(o,e);for(var u=t.splice.apply(t,o),l=(a=0,u.length);a<l;a++)u[a]._index=h;for(a=i+n,l=t.length;a<l;a++)t[a]._index=a;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var d={on:function(t,e){if("string"!=typeof t)c.each(t,function(t,e){this.on(e,t)},this);else{var i=this._eventTypes,r=i&&i[t],n=this._callbacks=this._callbacks||{};-1===(n=n[t]=n[t]||[]).indexOf(e)&&(n.push(e),r&&r.install&&1===n.length&&r.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var i,r=this._eventTypes,n=r&&r[t],s=this._callbacks&&this._callbacks[t];return s&&(!e||-1!==(i=s.indexOf(e))&&1===s.length?(n&&n.uninstall&&n.uninstall.call(this,t),delete this._callbacks[t]):-1!==i&&s.splice(i,1)),this}c.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function(){e.apply(this,arguments),this.off(t,e)})},emit:function(t,e){var i=this._callbacks&&this._callbacks[t];if(!i)return!1;var r=c.slice(arguments,1),n=e&&e.target&&!e.currentTarget;i=i.slice(),n&&(e.currentTarget=this);for(var s=0,a=i.length;s<a;s++)if(0==i[s].apply(this,r)){e&&e.stop&&e.stop();break}return n&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,i=this._callbacks,r=t?"install":"uninstall";if(e)for(var n in i)if(i[n].length>0){var s=e[n],a=s&&s[r];a&&a.call(this,n)}},statics:{inject:function t(e){var i=e._events;if(i){var r={};c.each(i,function(t,i){var n="string"==typeof t,s=n?t:i,a=c.capitalize(s),o=s.substring(2).toLowerCase();r[o]=n?{}:t,s="_"+s,e["get"+a]=function(){return this[s]},e["set"+a]=function(t){var e=this[s];e&&this.off(o,e),t&&this.on(o,t),this[s]=t}}),e._eventTypes=r}return t.base.apply(this,arguments)}}},f=c.extend({_class:"PaperScope",initialize:function t(){a=this,this.settings=new c({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=t._id++,t._scopes[this._id]=this;var e=t.prototype;if(!this.support){var i=ot.getContext(1,1)||{};e.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:ht.nativeModes},ot.release(i)}if(!this.agent){var r=o.navigator.userAgent.toLowerCase(),n=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(r)||[])[0],s="darwin"===n?"mac":n,h=e.agent=e.browser={platform:s};s&&(h[s]=!0),r.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,i,r,n){if(!h.chrome){var s="opera"===e?r:/^(node|trident)$/.test(e)?n:i;h.version=s,h.versionNumber=parseFloat(s),e="trident"===e?"msie":e,h.name=e,h[e]=!0}}),h.chrome&&delete h.webkit,h.atom&&delete h.chrome}},version:"0.11.5",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){a.PaperScript.execute(t,this,e),$.updateFocus()},install:function(t){var e=this;for(var i in c.each(["project","view","tool"],function(i){c.define(t,i,{configurable:!0,get:function(){return e[i]}})}),this)!/^_/.test(i)&&this[i]&&(t[i]=this[i])},setup:function(t){return a=this,this.project=new C(t),this},createCanvas:function(t,e){return ot.getCanvas(t,e)},activate:function(){a=this},clear:function(){for(var t=this.projects,e=this.tools,i=t.length-1;i>=0;i--)t[i].remove();for(i=e.length-1;i>=0;i--)e[i].remove()},remove:function(){this.clear(),delete f._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,i){return e[t](i)||e[t]("data-paper-"+i)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),p=c.extend(d,{initialize:function(t){this._scope=a,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(c.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),g=c.extend({initialize:function(t){this.precision=c.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,i){return this.number(t)+(i||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});g.instance=new g;var v=new function(){var t=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],e=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],i=Math.abs,r=Math.sqrt,n=Math.pow,s=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function a(t,e,i){return t<e?e:t>i?i:t}function o(t,e,r){function n(t){var e=134217729*t,i=t-e+e;return[i,t-i]}var s=e*e-t*r,a=e*e+t*r;if(3*i(s)<a){var o=n(t),h=n(e),u=n(r),l=e*e,c=t*r;s=l-c+(h[0]*h[0]-l+2*h[0]*h[1]+h[1]*h[1]-(o[0]*u[0]-c+o[0]*u[1]+o[1]*u[0]+o[1]*u[1]))}return s}function h(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?n(2,-Math.round(s(t))):0}return{EPSILON:1e-12,MACHINE_EPSILON:1.12e-16,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(r(2)-1)/3,isZero:function(t){return t>=-1e-12&&t<=1e-12},clamp:a,integrate:function(i,r,n,s){for(var a=t[s-2],o=e[s-2],h=.5*(n-r),u=h+r,l=0,c=s+1>>1,d=1&s?o[l++]*i(u):0;l<c;){var f=h*a[l];d+=o[l++]*(i(u+f)+i(u-f))}return h*d},findRoot:function(t,e,r,n,s,o,h){for(var u=0;u<o;u++){var l=t(r),c=l/e(r),d=r-c;if(i(c)<h){r=d;break}l>0?(s=r,r=d<=n?.5*(n+s):d):(n=r,r=d>=s?.5*(n+s):d)}return a(r,n,s)},solveQuadratic:function(t,e,n,s,u,l){var c,d=1/0;if(i(t)<1e-12){if(i(e)<1e-12)return i(n)<1e-12?-1:0;c=-n/e}else{var f=o(t,e*=-.5,n);if(f&&i(f)<1.12e-16){var p=h(i(t),i(e),i(n));p&&(f=o(t*=p,e*=p,n*=p))}if(f>=-1.12e-16){var g=f<0?0:r(f),v=e+(e<0?-g:g);0===v?d=-(c=n/t):(c=v/t,d=n/v)}}var _=0,m=null==u,y=u-1e-12,x=l+1e-12;return isFinite(c)&&(m||c>y&&c<x)&&(s[_++]=m?c:a(c,u,l)),d!==c&&isFinite(d)&&(m||d>y&&d<x)&&(s[_++]=m?d:a(d,u,l)),_},solveCubic:function(t,e,s,o,u,l,c){var d,f,p,g,_,m=h(i(t),i(e),i(s),i(o));function y(i){var r=t*(d=i);g=(r+(f=r+e))*d+(p=f*d+s),_=p*d+o}if(m&&(t*=m,e*=m,s*=m,o*=m),i(t)<1e-12)t=e,f=s,p=o,d=1/0;else if(i(o)<1e-12)f=e,p=s,d=0;else{y(-e/t/3);var x=_/t,b=n(i(x),1/3),w=x<0?-1:1,T=-g/t,S=T>0?1.324717957244746*Math.max(b,r(T)):b,E=d-w*S;if(E!==d){do{y(E),E=0===g?d:d-_/g/(1+1.12e-16)}while(w*E>w*d);i(t)*d*d>i(o/d)&&(f=((p=-o/d)-s)/d)}}var C=v.solveQuadratic(t,f,p,u,l,c),P=null==l;return isFinite(d)&&(0===C||C>0&&d!==u[0]&&d!==u[1])&&(P||d>l-1e-12&&d<c+1e-12)&&(u[C++]=P?d:a(d,l,c)),C}}},_={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},m=c.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var i=typeof t,r=this.__read,n=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),r&&(n=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),r&&(n=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;n=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),n=0)}return r&&(this.__read=n),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new m(this.x,this.y)},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var i=t/this.getLength();v.isZero(i)&&this.getAngle(),this._set(this.x*i,this.y*i)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=m.read(arguments),e=this.getLength()*t.getLength();if(v.isZero(e))return NaN;var i=this.dot(t)/e;return Math.acos(i<-1?-1:i>1?1:i)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=m.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=m.read(arguments),e=t.x-this.x,i=t.y-this.y,r=e*e+i*i;return c.read(arguments)?r:Math.sqrt(r)},normalize:function(t){t===h&&(t=1);var e=this.getLength(),i=0!==e?t/e:0,r=new m(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var i=e?this.subtract(e):this,r=Math.sin(t),n=Math.cos(t);return i=new m(i.x*n-i.y*r,i.x*r+i.y*n),e?i.add(e):i},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=m.read(arguments);return new m(this.x+t.x,this.y+t.y)},subtract:function(){var t=m.read(arguments);return new m(this.x-t.x,this.y-t.y)},multiply:function(){var t=m.read(arguments);return new m(this.x*t.x,this.y*t.y)},divide:function(){var t=m.read(arguments);return new m(this.x/t.x,this.y/t.y)},modulo:function(){var t=m.read(arguments);return new m(this.x%t.x,this.y%t.y)},negate:function(){return new m(-this.x,-this.y)},isInside:function(){return w.read(arguments).contains(this)},isClose:function(){var t=m.read(arguments),e=c.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=m.read(arguments);return m.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=m.read(arguments);return m.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=v.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=m.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=m.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=m.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new m(t.x*e,t.y*e)},statics:{min:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=m.read(arguments),e=m.read(arguments);return new m(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new m(Math.random(),Math.random())},isCollinear:function(t,e,i,r){return Math.abs(t*r-e*i)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+r*r))},isOrthogonal:function(t,e,i,r){return Math.abs(t*i+e*r)<=1e-8*Math.sqrt((t*t+e*e)*(i*i+r*r))}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new m(e(this.x),e(this.y))}},{})),y=m.extend({initialize:function(t,e,i,r){this._x=t,this._y=e,this._owner=i,this._setter=r},_set:function(t,e,i){return this._x=t,this._y=e,i||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),x=c.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var i=typeof t,r=this.__read,n=0;if("number"===i){var s="number"==typeof e;this._set(t,s?e:t),r&&(n=s?2:1)}else if("undefined"===i||null===t)this._set(0,0),r&&(n=null===t?1:0);else{var a="string"===i?t.split(/[\s,]+/)||[]:t;n=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),n=0)}return r&&(this.__read=n),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new x(this.width,this.height)},toString:function(){var t=g.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=x.read(arguments);return new x(this.width+t.width,this.height+t.height)},subtract:function(){var t=x.read(arguments);return new x(this.width-t.width,this.height-t.height)},multiply:function(){var t=x.read(arguments);return new x(this.width*t.width,this.height*t.height)},divide:function(){var t=x.read(arguments);return new x(this.width/t.width,this.height/t.height)},modulo:function(){var t=x.read(arguments);return new x(this.width%t.width,this.height%t.height)},negate:function(){return new x(-this.width,-this.height)},isZero:function(){var t=v.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new x(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new x(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new x(Math.random(),Math.random())}}},c.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new x(e(this.width),e(this.height))}},{})),b=x.extend({initialize:function(t,e,i,r){this._width=t,this._height=e,this._owner=i,this._setter=r},_set:function(t,e,i){return this._width=t,this._height=e,i||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),w=c.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,e,i,r){var n,s=typeof t;if("number"===s?(this._set(t,e,i,r),n=4):"undefined"===s||null===t?(this._set(0,0,0,0),n=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),n=1):t.x!==h||t.width!==h?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),n=1):t.from===h&&t.to===h&&(this._set(0,0,0,0),c.filter(this,t),n=1)),n===h){var a,o,u=m.readNamed(arguments,"from"),l=c.peek(arguments),d=u.x,f=u.y;if(l&&l.x!==h||c.hasNamed(arguments,"to")){var p=m.readNamed(arguments,"to");a=p.x-d,o=p.y-f,a<0&&(d=p.x,a=-a),o<0&&(f=p.y,o=-o)}else{var g=x.read(arguments);a=g.width,o=g.height}this._set(d,f,a,o),n=arguments.__index;var v=arguments.__filtered;v&&(this.__filtered=v)}return this.__read&&(this.__read=n),this},set:"#initialize",_set:function(t,e,i,r){return this.x=t,this.y=e,this.width=i,this.height=r,this},clone:function(){return new w(this.x,this.y,this.width,this.height)},equals:function(t){var e=c.isPlainValue(t)?w.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=g.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?m:y)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?x:b)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=x.read(arguments),e=this._sx,i=this._sy,r=t.width,n=t.height;e&&(this.x+=(this.width-r)*e),i&&(this.y+=(this.height-n)*i),this.width=r,this.height=n,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?m:y)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=m.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==h||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(w.read(arguments)):this._containsPoint(m.read(arguments))},_containsPoint:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e<=this.x+this.width&&i<=this.y+this.height},_containsRectangle:function(t){var e=t.x,i=t.y;return e>=this.x&&i>=this.y&&e+t.width<=this.x+this.width&&i+t.height<=this.y+this.height},intersects:function(){var t=w.read(arguments),e=c.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=w.read(arguments),e=Math.max(this.x,t.x),i=Math.max(this.y,t.y),r=Math.min(this.x+this.width,t.x+t.width),n=Math.min(this.y+this.height,t.y+t.height);return new w(e,i,r-e,n-i)},unite:function(){var t=w.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x+t.width),n=Math.max(this.y+this.height,t.y+t.height);return new w(e,i,r-e,n-i)},include:function(){var t=m.read(arguments),e=Math.min(this.x,t.x),i=Math.min(this.y,t.y),r=Math.max(this.x+this.width,t.x),n=Math.max(this.y+this.height,t.y);return new w(e,i,r-e,n-i)},expand:function(){var t=x.read(arguments),e=t.width,i=t.height;return new w(this.x-e/2,this.y-i/2,this.width+e,this.height+i)},scale:function(t,e){return this.expand(this.width*t-this.width,this.height*(e===h?t:e)-this.height)}},c.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var i=t.join(""),r=/^[RL]/.test(i);e>=4&&(t[1]+=r?"Y":"X");var n=t[r?0:1],s=t[r?1:0],a="get"+n,o="get"+s,h="set"+n,u="set"+s,l="set"+i;this["get"+i]=function(t){return new(t?m:y)(this[a](),this[o](),this,l)},this[l]=function(){var t=m.read(arguments);this[h](t.x),this[u](t.y)}},{beans:!0})),T=w.extend({initialize:function(t,e,i,r,n,s){this._set(t,e,i,r,!0),this._owner=n,this._setter=s},_set:function(t,e,i,r,n){return this._x=t,this._y=e,this._width=i,this._height=r,n||this._owner[this._setter](this),this}},new function(){var t=w.prototype;return c.each(["x","y","width","height"],function(t){var e=c.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._dontNotify||this._owner[this._setter](this)}},c.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var i="set"+e;this[i]=function(){this._dontNotify=!0,t[i].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),S=c.extend({_class:"Matrix",initialize:function t(e,i){var r=arguments.length,n=!0;if(r>=6?this._set.apply(this,arguments):1===r||2===r?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,i):Array.isArray(e)?this._set.apply(this,i?e.concat([i]):e):n=!1:r?n=!1:this.reset(),!n)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,i,r,n,s,a){return this._a=t,this._b=e,this._c=i,this._d=r,this._tx=n,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return c.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(9))},clone:function(){return new S(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=g.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var i=this._owner;return!!i&&(i.transform(null,!0,c.pick(t,!0),e),this.isIdentity())},translate:function(){var t=m.read(arguments),e=t.x,i=t.y;return this._tx+=e*this._a+i*this._c,this._ty+=e*this._b+i*this._d,this._changed(),this},scale:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=m.read(arguments,1),i=e.x,r=e.y,n=Math.cos(t),s=Math.sin(t),a=i-i*n+r*s,o=r-i*s-r*n,h=this._a,u=this._b,l=this._c,c=this._d;return this._a=n*h+s*l,this._b=n*u+s*c,this._c=-s*h+n*l,this._d=-s*u+n*c,this._tx+=a*h+o*l,this._ty+=a*u+o*c,this._changed(),this},shear:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0});e&&this.translate(e);var i=this._a,r=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*i,this._d+=t.x*r,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=m.read(arguments),e=m.read(arguments,0,{readNull:!0}),i=Math.PI/180,r=new m(Math.tan(t.x*i),Math.tan(t.y*i));return this.shear(r,e)},append:function(t,e){if(t){var i=this._a,r=this._b,n=this._c,s=this._d,a=t._a,o=t._c,h=t._b,u=t._d,l=t._tx,c=t._ty;this._a=a*i+h*n,this._c=o*i+u*n,this._b=a*r+h*s,this._d=o*r+u*s,this._tx+=l*i+c*n,this._ty+=l*r+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var i=this._a,r=this._b,n=this._c,s=this._d,a=this._tx,o=this._ty,h=t._a,u=t._c,l=t._b,c=t._d,d=t._tx,f=t._ty;this._a=h*i+u*r,this._c=h*n+u*s,this._b=l*i+c*r,this._d=l*n+c*s,this._tx=h*a+u*o+d,this._ty=l*a+c*o+f,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,i=this._c,r=this._d,n=this._tx,s=this._ty,a=t*r-e*i,o=null;return a&&!isNaN(a)&&isFinite(n)&&isFinite(s)&&(this._a=r/a,this._b=-e/a,this._c=-i/a,this._d=t/a,this._tx=(i*s-r*n)/a,this._ty=(e*n-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new S(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,i){return arguments.length<3?this._transformPoint(m.read(arguments)):this._transformCoordinates(t,e,i)},_transformPoint:function(t,e,i){var r=t.x,n=t.y;return e||(e=new m),e._set(r*this._a+n*this._c+this._tx,r*this._b+n*this._d+this._ty,i)},_transformCoordinates:function(t,e,i){for(var r=0,n=2*i;r<n;r+=2){var s=t[r],a=t[r+1];e[r]=s*this._a+a*this._c+this._tx,e[r+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,i=t.y,r=e+t.width,n=i+t.height,s=[e,i,r,i,r,n,e,n];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,i){for(var r=this._transformCorners(t),n=r.slice(0,2),s=n.slice(),a=2;a<8;a++){var o=r[a],h=1&a;o<n[h]?n[h]=o:o>s[h]&&(s[h]=o)}return e||(e=new w),e._set(n[0],n[1],s[0]-n[0],s[1]-n[1],i)},inverseTransform:function(){return this._inverseTransform(m.read(arguments))},_inverseTransform:function(t,e,i){var r=this._a,n=this._b,s=this._c,a=this._d,o=this._tx,h=this._ty,u=r*a-n*s,l=null;if(u&&!isNaN(u)&&isFinite(o)&&isFinite(h)){var c=t.x-this._tx,d=t.y-this._ty;e||(e=new m),l=e._set((c*a-d*s)/u,(d*r-c*n)/u,i)}return l},decompose:function(){var t,e,i,r=this._a,n=this._b,s=this._c,a=this._d,o=r*a-n*s,h=Math.sqrt,u=Math.atan2,l=180/Math.PI;if(0!==r||0!==n){var c=h(r*r+n*n);t=Math.acos(r/c)*(n>0?1:-1),e=[c,o/c],i=[u(r*s+n*a,c*c),0]}else if(0!==s||0!==a){var d=h(s*s+a*a);t=Math.asin(s/d)*(a>0?1:-1),e=[o/d,d],i=[0,u(r*s+n*a,d*d)]}else t=0,i=e=[0,0];return{translation:this.getTranslation(),rotation:t*l,scaling:new m(e),skewing:new m(i[0]*l,i[1]*l)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new m(this._tx,this._ty)},getScaling:function(){return(this.decompose()||{}).scaling},getRotation:function(){return(this.decompose()||{}).rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},c.each(["a","b","c","d","tx","ty"],function(t){var e=c.capitalize(t),i="_"+t;this["get"+e]=function(){return this[i]},this["set"+e]=function(t){this[i]=t,this._changed()}},{})),E=c.extend({_class:"Line",initialize:function(t,e,i,r,n){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=i,this._vy=r,s=n):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=i),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new m(this._px,this._py)},getVector:function(){return new m(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return E.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return E.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return E.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return m.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return m.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,i,r,n,s,a,o,h,u){h||(i-=t,r-=e,a-=n,o-=s);var l=i*o-r*a;if(!v.isZero(l)){var c=t-n,d=e-s,f=(a*d-o*c)/l,p=(i*d-r*c)/l;if(u||-1e-12<f&&f<1+1e-12&&-1e-12<p&&p<1+1e-12)return u||(f=f<=0?0:f>=1?1:f),new m(t+f*i,e+f*r)}},getSide:function(t,e,i,r,n,s,a,o){a||(i-=t,r-=e);var h=n-t,u=h*r-(s-e)*i;return!o&&v.isZero(u)&&(u=(h*i+h*i)/(i*i+r*r))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,i,r,n,s,a){return a||(i-=t,r-=e),0===i?r>0?n-t:t-n:0===r?i<0?s-e:e-s:((n-t)*r-(s-e)*i)/Math.sqrt(i*i+r*r)},getDistance:function(t,e,i,r,n,s,a){return Math.abs(E.getSignedDistance(t,e,i,r,n,s,a))}}}),C=p.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){p.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Z(null,null,this),this._view=$.create(this,t||ot.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return c.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var i=this._view;i&&(i._needsUpdate=!0,!i._requested&&i._autoUpdate&&i.requestUpdate())}var r=this._changes;if(r&&e){var n=this._changesById,s=e._id,a=n[s];a?a.flags|=t:r.push(n[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new M({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:k,match:function(i){var r=i._definition,n=r._id;return e[n]||(e[n]=!0,t.push(r)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var i in t){var r=t[i],n=r._selection;1&n&&r.isInserted()?e.push(r):n||this._updateSelection(r)}return e},_updateSelection:function(t){var e=t._id,i=this._selectionItems;t._selection?i[e]!==t&&(this._selectionCount++,i[e]=t):i[e]===t&&(this._selectionCount--,delete i[e])},selectAll:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(h,t)},insertLayer:function(t,e){if(e instanceof M){e._remove(!1,!0),c.splice(this._children,[e],t,0),e._setProject(this,!0);var i=e._name;i&&e.setName(i),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,e,i){return e=this.insertLayer(t,e)||(this._activeLayer||this._insertItem(h,new M(P.NO_INSERT),!0)).insertChild(t,e),i&&e.activate&&e.activate(),e},getItems:function(t){return P._getItems(this,t)},getItem:function(t){return P._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return c.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var i=e[t];if(i){for(var r in i){var n=i[r];for(var s in e){var a=e[s];a&&a!=i&&delete a[n._id]}n.remove()}e[t]=null}}},draw:function(t,e,i){this._updateVersion++,t.save(),e.applyToContext(t);for(var r=this._children,n=new c({offset:new m(0,0),pixelRatio:i,viewMatrix:e.isIdentity()?null:e,matrices:[new S],updateMatrix:!0}),s=0,a=r.length;s<a;s++)r[s].draw(t,n);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var o=this._selectionItems,h=this._scope.settings.handleSize,u=this._updateVersion;for(var l in o)o[l]._drawSelection(t,e,h,o,u);t.restore()}}}),P=c.extend(d,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=c.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new S,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return c.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,e){var i=t&&c.isPlainObject(t),r=i&&!0===t.internal,n=this._matrix=new S,s=i&&t.project||a.project,o=a.settings;return this._id=r?null:_.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&o.applyMatrix,e&&n.translate(e),n._owner=this,this._style=new Z(s._currentStyle,this,s),r||i&&0==t.insert||!o.insertItems&&(!i||!0!==t.insert)?this._setProject(s):(i&&t.parent||s)._insertItem(h,this,!0),i&&t!==P.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){var i={},r=this;function n(n){for(var s in n){var a=r[s];c.equals(a,"leading"===s?1.2*n.fontSize:n[s])||(i[s]=c.serialize(a,t,"data"!==s,e))}}return n(this._serializeFields),this instanceof O||n(this._style._defaults),[this._class,i]},_changed:function(t){var e=this._symbol,i=this._parent||e,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=this._globalMatrix=h),i&&40&t&&P._clearBoundsCache(i),2&t&&P._clearBoundsCache(this),r&&r._changed(t,this),e&&e._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var e=this._getOwner();if(t&&e){var i=e._children,r=e._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||h,this._changed(128)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},c.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=c.capitalize(t),i="_"+t,r={locked:128,visible:137};this["get"+e]=function(){return this[i]},this["set"+e]=function(e){e!=this[i]&&(this[i]=e,this._changed(r[t]||129))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(129))}},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,i=t.length;e<i;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var i=0,r=t.length;i<r;i++)if(!t[i].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var i=0,r=e.length;i<r;i++)e[i].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(129),this._parent&&this._parent._changed(1024))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=this._position,i=t?m:y;if(!e){var r=this._pivot;e=this._position=r?this._matrix._transformPoint(r):this.getBounds().getCenter(!0)}return new i(e.x,e.y,this,"setPosition")},setPosition:function(){this.translate(m.read(arguments).subtract(this.getPosition(!0)))},getPivot:function(){var t=this._pivot;return t?new y(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=m.read(arguments,0,{clone:!0,readNull:!0}),this._position=h}},c.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var i=e||t instanceof S,r=c.set({},i?e:t,this._boundsOptions);r.stroke&&!this.getStrokeScaling()||(r.cacheItem=this);var n=this._getCachedBounds(i&&t,r).rect;return arguments.length?n:new T(n.x,n.y,n.width,n.height,this,"setBounds")},setBounds:function(){var t=w.read(arguments),e=this.getBounds(),i=this._matrix,r=new S,n=t.getCenter();r.translate(n),t.width==e.width&&t.height==e.height||(i.isInvertible()||(i.set(i._backup||(new S).translate(i.getTranslation())),e=this.getBounds()),r.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),n=e.getCenter(),r.translate(-n.x,-n.y),this.transform(r)},_getBounds:function(t,e){var i=this._children;return i&&i.length?(P._updateBoundsCache(this,e.cacheItem),P._getBounds(i,t,e)):new w},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,i){t=t&&t._orNullIfIdentity();var r=e.internal&&!i,n=e.cacheItem,s=r?null:this._matrix._orNullIfIdentity(),a=n&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,r),o=this._bounds;if(P._updateBoundsCache(this._parent||this._symbol,n),a&&o&&a in o)return{rect:(d=o[a]).rect.clone(),nonscaling:d.nonscaling};var h=this._getBounds(t||s,e),u=h.rect||h,l=this._style,c=h.nonscaling||l.hasStroke()&&!l.getStrokeScaling();if(a){o||(this._bounds=o={});var d=o[a]={rect:u.clone(),nonscaling:c,internal:r}}return{rect:u,nonscaling:c}},_getStrokeMatrix:function(t,e){var i=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,r=i?i.getViewMatrix().invert():t;return r&&r._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var i=e._id,r=t._boundsCache=t._boundsCache||{ids:{},list:[]};r.ids[i]||(r.list.push(e),r.ids[i]=e)}},_clearBoundsCache:function(t){var e=t._boundsCache;if(e){t._bounds=t._position=t._boundsCache=h;for(var i=0,r=e.list,n=r.length;i<n;i++){var s=r[i];s!==t&&(s._bounds=s._position=h,s._boundsCache&&P._clearBoundsCache(s))}}},_getBounds:function(t,e,i){var r=1/0,n=-r,s=r,a=n,o=!1;i=i||{};for(var h=0,u=t.length;h<u;h++){var l=t[h];if(l._visible&&!l.isEmpty()){var c=l._getCachedBounds(e&&e.appended(l._matrix),i,!0),d=c.rect;r=Math.min(d.x,r),s=Math.min(d.y,s),n=Math.max(d.x+d.width,n),a=Math.max(d.y+d.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(r)?new w(r,s,n-r,a-s):new w,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var i=this._decomposed;this.rotate(t-e),i&&(i.rotation=t,this._decomposed=i)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new y(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=m.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var i=this.getRotation(),r=this._decomposed,n=new S,s=this.getPosition(!0);n.translate(s),i&&n.rotate(i),n.scale(e.x/t.x,e.y/t.y),i&&n.rotate(-i),n.translate(s.negate()),this.transform(n),r&&(r.scaling=e,this._decomposed=r)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix,i=this._project._updateVersion;if(e&&e._updateVersion!==i&&(e=null),!e){e=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&e.prepend(r.getGlobalMatrix(!0)),e._updateVersion=i}return t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var i=this._children,r=0,n=i&&i.length;r<n;r++)i[r]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var i=this._children,r=0,n=i&&i.length;r<n;r++)i[r]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof M)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return c.equals(this._children,t._children)},clone:function(t){var e=new this.constructor(P.NO_INSERT),i=this._children,r=c.pick(t?t.insert:h,t===h||!0===t),n=c.pick(t?t.deep:h,!0);i&&e.copyAttributes(this),i&&!n||e.copyContent(this),i||e.copyAttributes(this),r&&e.insertAbove(this);var s=this._name,a=this._parent;if(s&&a){i=a._children;for(var o=s,u=1;i[s];)s=o+" "+u++;s!==o&&e.setName(s)}return e},copyContent:function(t){for(var e=t._children,i=0,r=e&&e.length;i<r;i++)this.addChild(e[i].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var i=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],r=0,n=i.length;r<n;r++){var s=i[r];t.hasOwnProperty(s)&&(this[s]=t[s])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var a=t._data,o=t._name;this._data=a?c.clone(a):null,o&&this.setName(o)},rasterize:function(t,e){var i=this.getStrokeBounds(),r=(t||this.getView().getResolution())/72,n=i.getTopLeft().floor(),s=i.getBottomRight().ceil(),a=new x(s.subtract(n)),o=new I(P.NO_INSERT);if(!a.isZero()){var u=ot.getCanvas(a.multiply(r)),l=u.getContext("2d"),d=(new S).scale(r).translate(n.negate());l.save(),d.applyToContext(l),this.draw(l,new c({matrices:[d]})),l.restore(),o.setCanvas(u)}return o.transform((new S).translate(n.add(a.divide(2))).scale(1/r)),(e===h||e)&&o.insertAbove(this),o},contains:function(){return!!this._contains(this._matrix._inverseTransform(m.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var i=e.length-1;i>=0;i--)if(e[i].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return w.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new U.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof P&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(m.read(arguments),D.getOptions(arguments))}function e(){var t=m.read(arguments),e=D.getOptions(arguments),i=[];return this._hitTest(t,c.set({all:i},e)),i}function i(t,e,i,r){var n=this._children;if(n)for(var s=n.length-1;s>=0;s--){var a=n[s],o=a!==r&&a._hitTest(t,e,i);if(o&&!e.all)return o}return null}return C.inject({hitTest:t,hitTestAll:e,_hitTest:i}),{hitTest:t,hitTestAll:e,_hitTestChildren:i}},{_hitTest:function(t,e,i){if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var r=this._matrix,n=i?i.appended(r):this.getGlobalMatrix().prepend(this.getView()._matrix),s=Math.max(e.tolerance,1e-12),a=e._tolerancePadding=new x(U._getStrokePadding(s,r._shiftless().invert()));if(!(t=r._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(a.multiply(2))._containsPoint(t))return null;var o,h,u=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==c.hyphenate(this._class)||e.class&&!(this instanceof e.class)),l=e.match,d=this;function f(t){return t&&l&&!l(t)&&(t=null),t&&e.all&&e.all.push(t),t}function p(e,i){var r=i?o["get"+i]():d.getPosition();if(t.subtract(r).divide(a).length<=1)return new D(e,d,{name:i?c.hyphenate(i):e,point:r})}var g=e.position,v=e.center,_=e.bounds;if(u&&this._parent&&(g||v||_)){if((v||_)&&(o=this.getInternalBounds()),!(h=g&&p("position")||v&&p("center","Center"))&&_)for(var m=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],y=0;y<8&&!h;y++)h=p("bounds",m[y]);h=f(h)}return h||(h=this._hitTestChildren(t,e,n)||u&&f(this._hitTestSelf(t,e,n,this.getStrokeScaling()?null:n._shiftless().invert()))||null),h&&h.point&&(h.point=r.transform(h.point)),h},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new D("fill",this)},matches:function(t,e){var i=typeof t;if("object"===i){for(var r in t)if(t.hasOwnProperty(r)&&!this.matches(r,t[r]))return!1;return!0}if("function"===i)return t(this);if("match"===t)return e(this);var n=/^(empty|editable)$/.test(t)?this["is"+c.capitalize(t)]():"type"===t?c.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;n=this._class}if("function"==typeof e)return!!e(n);if(e){if(e.test)return e.test(n);if(c.isPlainObject(e))return function t(e,i){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],s=i[r];if(c.isPlainObject(n)&&c.isPlainObject(s)){if(!t(n,s))return!1}else if(!c.equals(n,s))return!1}return!0}(e,n)}return c.equals(n,e)},getItems:function(t){return P._getItems(this,t,this._matrix)},getItem:function(t){return P._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,i,r,n,s){if(!n){var a="object"==typeof i&&i,o=a&&a.overlapping,h=a&&a.inside,u=(m=o||h)&&w.read([m]);n={items:[],recursive:a&&!1!==a.recursive,inside:!!h,overlapping:!!o,rect:u,path:o&&new U.Rectangle({rectangle:u,insert:!1})},a&&(i=c.filter({},i,{recursive:!0,inside:!0,overlapping:!0}))}var l=e._children,d=n.items;r=(u=n.rect)&&(r||new S);for(var f=0,p=l&&l.length;f<p;f++){var g=l[f],v=r&&r.appended(g._matrix),_=!0;if(u){var m=g.getBounds(v);if(!u.intersects(m))continue;u.contains(m)||n.overlapping&&(m.contains(u)||n.path.intersects(g,v))||(_=!1)}if(_&&g.matches(i)&&(d.push(g),s))break;if(!1!==n.recursive&&t(g,i,v,n,s),s&&d.length>0)break}return d}}},{importJSON:function(t){var e=c.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(h,t)},insertChild:function(t,e){var i=e?this.insertChildren(t,[e]):null;return i&&i[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var i=this._children;if(i&&e&&e.length>0){for(var r={},n=(e=c.slice(e)).length-1;n>=0;n--){var s=(u=e[n])&&u._id;!u||r[s]?e.splice(n,1):(u._remove(!1,!0),r[s]=!0)}c.splice(i,e,t,0);for(var a=this._project,o=a._changes,h=(n=0,e.length);n<h;n++){var u,l=(u=e[n])._name;u._parent=this,u._setProject(a,!0),l&&u.setName(l),o&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var i=t&&t._getOwner(),r=t!==this&&i?this:null;return r&&(r._remove(!1,!0),i._insertItem(t._index+e,r)),r},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(h,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(h,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var i=e[0].reduce(t);return this._parent?(i.insertAbove(this),this.remove()):i.remove(),i}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,i=t._namedChildren,r=this._name,n=i[r],s=n?n.indexOf(this):-1;-1!==s&&(e[r]==this&&delete e[r],n.splice(s,1),n.length?e[r]=n[0]:delete i[r])}},_remove:function(t,e){var i=this._getOwner(),r=this._project,n=this._index;return!!i&&(this._name&&this._removeNamed(),null!=n&&(r._activeLayer===this&&(r._activeLayer=this.getNextSibling()||this.getPreviousSibling()),c.splice(i._children,null,n,1)),this._installEvents(!1),t&&r._changes&&this._changed(5),e&&i._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=c.pick(e,this._children.length);for(var i=c.splice(this._children,null,t,e-t),r=i.length-1;r>=0;r--)i[r]._remove(!0,!1);return i.length>0&&this._changed(11),i},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var i=e(this),r=e(t),n=0,s=Math.min(i.length,r.length);n<s;n++)if(i[n]!=r[n])return i[n]._index<r[n]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?c:m).read(arguments),r=m.read(arguments,0,{readNull:!0});return this.transform((new S)[t](i,r||this.getPosition(!0)))}},{translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,i,r){var n=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!n.isIdentity()||s||e&&i&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&n.isInvertible()&&(n._backup=n.getValues()),n.prepend(t,!0);var o=this._style,h=o.getFillColor(!0),u=o.getStrokeColor(!0);h&&h.transform(t),u&&u.transform(t)}if(a&&(a=this._transformContent(n,i,r))){var l=this._pivot;l&&n._transformPoint(l,l,!0),n.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,d=this._position;(s||a)&&this._changed(9);var f=s&&c&&t.decompose();if(f&&f.skewing.isZero()&&f.rotation%90==0){for(var p in c){var g=c[p];if(g.nonscaling)delete c[p];else if(a||!g.internal){var v=g.rect;t._transformBounds(v,v)}}this._bounds=c;var _=c[this._getBoundsCacheKey(this._boundsOptions||{})];_&&(this._position=_.rect.getCenter(!0))}else s&&d&&this._pivot&&(this._position=t._transformPoint(d,d));return this},_transformContent:function(t,e,i){var r=this._children;if(r){for(var n=0,s=r.length;n<s;n++)r[n].transform(t,!0,e,i);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(m.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(m.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(m.read(arguments))},localToParent:function(){return this._matrix._transformPoint(m.read(arguments))},fitBounds:function(t,e){t=w.read(arguments);var i=this.getBounds(),r=i.height/i.width,n=t.height/t.width,s=(e?r>n:r<n)?t.width/i.width:t.height/i.height,a=new w(new m,new x(i.width*s,i.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,i){var r=this._style,n=this._matrix;if(r.hasFill()&&(t.fillStyle=r.getFillColor().toCanvasStyle(t,n)),r.hasStroke()){t.strokeStyle=r.getStrokeColor().toCanvasStyle(t,n),t.lineWidth=r.getStrokeWidth();var s=r.getStrokeJoin(),o=r.getStrokeCap(),h=r.getMiterLimit();if(s&&(t.lineJoin=s),o&&(t.lineCap=o),h&&(t.miterLimit=h),a.support.nativeDash){var u=r.getDashArray(),l=r.getDashOffset();u&&u.length&&("setLineDash"in t?(t.setLineDash(u),t.lineDashOffset=l):(t.mozDash=u,t.mozDashOffset=l))}}if(r.hasShadow()){var c=e.pixelRatio||1,d=i._shiftless().prepend((new S).scale(c,c)),f=d.transform(new m(r.getShadowBlur(),0)),p=d.transform(this.getShadowOffset());t.shadowColor=r.getShadowColor().toCanvasStyle(t),t.shadowBlur=f.getLength(),t.shadowOffsetX=p.x,t.shadowOffsetY=p.y}},draw:function(t,e,i){var r=this._updateVersion=this._project._updateVersion;if(this._visible&&0!==this._opacity){var n=e.matrices,s=e.viewMatrix,a=this._matrix,o=n[n.length-1].appended(a);if(o.isInvertible()){s=s?s.appended(o):o,n.push(o),e.updateMatrix&&(o._updateVersion=r,this._globalMatrix=o);var h,u,l,c=this._blendMode,d=this._opacity,f="normal"===c,p=ht.nativeModes[c],g=f&&1===d||e.dontStart||e.clip||(p||f&&d<1)&&this._canComposite(),v=e.pixelRatio||1;if(!g){var _=this.getStrokeBounds(s);if(!_.width||!_.height)return;l=e.offset,u=e.offset=_.getTopLeft().floor(),h=t,t=ot.getContext(_.getSize().ceil().add(1).multiply(v)),1!==v&&t.scale(v,v)}t.save();var m=i?i.appended(a):this._canScaleStroke&&!this.getStrokeScaling(!0)&&s,y=!g&&e.clipItem,x=!m||y;if(g?(t.globalAlpha=d,p&&(t.globalCompositeOperation=c)):x&&t.translate(-u.x,-u.y),x&&(g?a:s).applyToContext(t),y&&e.clipItem.draw(t,e.extend({clip:!0})),m){t.setTransform(v,0,0,v,0,0);var b=e.offset;b&&t.translate(-b.x,-b.y)}this._draw(t,e,s,m),t.restore(),n.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(ht.process(c,t,h,d,u.subtract(l).multiply(v)),ot.release(t),e.offset=l)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof z)return e._isUpdated(t);var i=this._updateVersion===t;return!i&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,i=!0),i},_drawSelection:function(t,e,i,r,n){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,h=4&s;if(this._drawSelected||(a=!1),(a||o||h)&&this._isUpdated(n)){var u,l=this.getSelectedColor(!0)||(u=this.getLayer())&&u.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),d=i/2;if(t.strokeStyle=t.fillStyle=l?l.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,r),h){var f=this.getPosition(!0),p=f.x,g=f.y;t.beginPath(),t.arc(p,g,d,0,2*Math.PI,!0),t.stroke();for(var v=[[0,-1],[1,0],[0,1],[-1,0]],_=d,m=i+1,y=0;y<4;y++){var x=v[y],b=x[0],w=x[1];t.moveTo(p+b*_,g+w*_),t.lineTo(p+b*m,g+w*m),t.stroke()}}if(o){var T=c._transformCorners(this.getInternalBounds());t.beginPath();for(y=0;y<8;y++)t[y?"lineTo":"moveTo"](T[y],T[++y]);t.closePath(),t.stroke();for(y=0;y<8;y++)t.fillRect(T[y]-d,T[++y]-d,i,i)}}},_canComposite:function(){return!1}},c.each(["down","drag","up","move"],function(t){this["removeOn"+c.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var i="mouse"+e,r=this._project,n=r._removeSets=r._removeSets||{};n[i]=n[i]||{},n[i][this._id]=this}return this}})),O=P.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(e){t.base.call(this,e),1026&e&&(this._clipItem=h)},_getClipItem:function(){var t=this._clipItem;if(t===h){t=null;for(var e=this._children,i=0,r=e.length;i<r;i++)if(e[i]._clipMask){t=e[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,i){var r=this._getClipItem();return r?r._getCachedBounds(e&&e.appended(r._matrix),c.set({},i,{stroke:!1})):t.base.call(this,e,i)},_hitTestChildren:function t(e,i,r){var n=this._getClipItem();return(!n||n.contains(e))&&t.base.call(this,e,i,r,n)},_draw:function(t,e){var i=e.clip,r=!i&&this._getClipItem();e=e.extend({clipItem:r,clip:!1}),i?(t.beginPath(),e.dontStart=e.dontFinish=!0):r&&r.draw(t,e.extend({clip:!0}));for(var n=this._children,s=0,a=n.length;s<a;s++){var o=n[s];o!==r&&o.draw(t,e)}}}),M=O.extend({_class:"Layer",initialize:function(){O.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),A=P.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&c.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new b(t.width,t.height,this,"setSize")},setSize:function(){var t=x.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,i=t.width,r=t.height;"rectangle"===e?this._radius.set(x.min(this._radius,t.divide(2))):"circle"===e?(i=r=(i+r)/2,this._radius=i/2):"ellipse"===e&&this._radius._set(i/2,r/2),this._size._set(i,r),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new b(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var i=2*t;this._radius=t,this._size._set(i,i)}else if(t=x.read(arguments),this._radius){if(this._radius.equals(t))return;if(this._radius.set(t),"rectangle"===e){i=x.max(this._size,t.multiply(2));this._size.set(i)}else"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var e=new(U[c.capitalize(this._type)])({center:new m,size:this._size,radius:this._radius,insert:!1});return e.copyAttributes(this),a.settings.applyMatrix&&e.setApplyMatrix(!0),(t===h||t)&&e.insertAbove(this),e},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,i,r){var n=this._style,s=n.hasFill(),a=n.hasStroke(),o=e.dontFinish||e.clip,h=!r;if(s||a||o){var u=this._type,l=this._radius,c="circle"===u;if(e.dontStart||t.beginPath(),h&&c)t.arc(0,0,l,0,2*Math.PI,!0);else{var d=c?l:l.width,f=c?l:l.height,p=this._size,g=p.width,v=p.height;if(h&&"rectangle"===u&&0===d&&0===f)t.rect(-g/2,-v/2,g,v);else{var _=g/2,m=v/2,y=.44771525016920644,x=d*y,b=f*y,w=[-_,-m+f,-_,-m+b,-_+x,-m,-_+d,-m,_-d,-m,_-x,-m,_,-m+b,_,-m+f,_,m-f,_,m-b,_-x,m,_-d,m,-_+d,m,-_+x,m,-_,m-b,-_,m-f];r&&r.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),_!==d&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),m!==f&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),_!==d&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,i),s&&(t.fill(n.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var i=new w(this._size).setCenter(0,0),r=this._style,n=e.stroke&&r.hasStroke()&&r.getStrokeWidth();return t&&(i=t._transformBounds(i)),n?i.expand(U._getStrokePadding(n,this._getStrokeMatrix(t,e))):i}},new function(){function t(t,e,i){var r=t._radius;if(!r.isZero())for(var n=t._size.divide(2),s=1;s<=4;s++){var a=new m(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(n),h=o.subtract(a.multiply(r));if(new w(i?o.add(a.multiply(i)):o,h).contains(e))return{point:h,quadrant:s}}}function e(t,e,i,r){var n=t.divide(e);return(!r||n.isInQuadrant(r))&&n.subtract(n.normalize()).multiply(e).divide(i).length<=1}return{_contains:function e(i){if("rectangle"===this._type){var r=t(this,i);return r?i.subtract(r.point).divide(this._radius).getLength()<=1:e.base.call(this,i)}return i.divide(this.size).getLength()<=.5},_hitTestSelf:function i(r,n,s,a){var o=!1,h=this._style,u=n.stroke&&h.hasStroke(),l=n.fill&&h.hasFill();if(u||l){var c=this._type,d=this._radius,f=u?h.getStrokeWidth()/2:0,p=n._tolerancePadding.add(U._getStrokePadding(f,!h.getStrokeScaling()&&a));if("rectangle"===c){var g=p.multiply(2),v=t(this,r,g);if(v)o=e(r.subtract(v.point),d,p,v.quadrant);else{var _=new w(this._size).setCenter(0,0),m=_.expand(g),y=_.expand(g.negate());o=m._containsPoint(r)&&!y._containsPoint(r)}}else o=e(r,d,p)}return o?new D(u?"stroke":"fill",this):i.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,i,r,n){var s=new A(c.getNamed(n),e);return s._type=t,s._size=i,s._radius=r,s}return{Circle:function(){var e=m.readNamed(arguments,"center"),i=c.readNamed(arguments,"radius");return t("circle",e,new x(2*i),i,arguments)},Rectangle:function(){var e=w.readNamed(arguments,"rectangle"),i=x.min(x.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),i,arguments)},Ellipse:function(){var e=A._readEllipse(arguments),i=e.radius;return t("ellipse",e.center,i.multiply(2),i,arguments)},_readEllipse:function(t){var e,i;if(c.hasNamed(t,"radius"))e=m.readNamed(t,"center"),i=x.readNamed(t,"radius");else{var r=w.readNamed(t,"rectangle");e=r.getCenter(!0),i=r.getSize(!0).divide(2)}return{center:e,radius:i}}}}}),I=P.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],initialize:function(t,e){if(!this._initialize(t,e!==h&&m.read(arguments,1))){var i="string"==typeof t?l.getElementById(t):t;i?this.setImage(i):this.setSource(t)}this._size||(this._size=new x,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,i=t._canvas;if(e)this._setImage(e);else if(i){var r=ot.getCanvas(t._size);r.getContext("2d").drawImage(i,0,0),this._setImage(r)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new b(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=x.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(ot.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&ot.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new m(0,0).transform(t),i=new m(1,0).transform(t).subtract(e),r=new m(0,1).transform(t).subtract(e);return new x(72/i.getLength(),72/r.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){var e=this;function i(t){var i=e.getView(),r=t&&t.type||"load";i&&e.responds(r)&&(a=i._scope,e.emit(r,new tt(t)))}this._setImage(t),this._loaded?setTimeout(i,0):t&&J.add(t,{load:function(r){e._setImage(t),i(r)},error:i})},_setImage:function(t){this._canvas&&ot.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new x(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(521)},getCanvas:function(){if(!this._canvas){var t=ot.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){ot.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(513)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(t){var e=new o.Image,i=this._crossOrigin;i&&(e.crossOrigin=i),e.src=t,this.setImage(e)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=w.read(arguments),e=ot.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=w.read(arguments),e=new I(P.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var i=this.getCanvas();return i?i.toDataURL.apply(i,arguments):null},drawImage:function(t){var e=m.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,i;if(t?t instanceof j?(i=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new w(t):"x"in t&&(e=new w(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var r=Math.min(e.width,32),n=Math.min(e.height,32),s=I._sampleContext;s?s.clearRect(0,0,33,33):s=I._sampleContext=ot.getContext(new x(32)),s.save();var a=(new S).scale(r/e.width,n/e.height).translate(-e.x,-e.y);a.applyToContext(s),i&&i.draw(s,new c({clip:!0,matrices:[a]})),this._matrix.applyToContext(s);var o=this.getElement(),h=this._size;o&&s.drawImage(o,-h.width/2,-h.height/2),s.restore();for(var u=s.getImageData(.5,.5,Math.ceil(r),Math.ceil(n)).data,l=[0,0,0],d=0,f=0,p=u.length;f<p;f+=4){var g=u[f+3];d+=g,g/=255,l[0]+=u[f]*g,l[1]+=u[f+1]*g,l[2]+=u[f+2]*g}for(f=0;f<3;f++)l[f]/=d;return d?W.read(l):null},getPixel:function(){var t=m.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new W("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=m.read(arguments),e=W.read(arguments),i=e._convert("rgb"),r=e._alpha,n=this.getContext(!0),s=n.createImageData(1,1),a=s.data;a[0]=255*i[0],a[1]=255*i[1],a[2]=255*i[2],a[3]=null!=r?255*r:255,n.putImageData(s,t.x,t.y)},createImageData:function(){var t=x.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=w.read(arguments);return t.isEmpty()&&(t=new w(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=m.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var i=new w(this._size).setCenter(0,0);return t?t._transformBounds(i):i},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new D("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t){var e=this.getElement();e&&(t.globalAlpha=this._opacity,t.drawImage(e,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),k=P.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,e){this._initialize(t,e!==h&&m.read(arguments,1))||this.setDefinition(t instanceof R?t:new R(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var i=this._definition._item;return i._getCachedBounds(i._matrix.prepended(t),e)},_hitTestSelf:function(t,e,i){var r=this._definition._item._hitTest(t,e,i);return r&&(r.item=this),r},_draw:function(t,e){this._definition._item.draw(t,e)}}),R=c.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=_.get(),this.project=a.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&P._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new m),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new k(this,t)},clone:function(){return new R(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),D=c.extend({_class:"HitResult",initialize:function(t,e,i){this.type=t,this.item=e,i&&this.inject(i)},statics:{getOptions:function(t){var e=t&&c.read(t);return c.set({type:null,tolerance:a.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),L=c.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,e,i,r,n,s){var a,o,u,l,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(a=t.point,o=t.handleIn,u=t.handleOut,l=t.selection):(a=t,o=e,u=i,l=r):(a=[t,e],o=i!==h?[i,r]:null,u=n!==h?[n,s]:null)),new N(a,this,"_point"),new N(o,this,"_handleIn"),new N(u,this,"_handleOut"),l&&this.setSelection(l)},_serialize:function(t,e){var i=this._point,r=this._selection,n=r||this.hasHandles()?[i,this._handleIn,this._handleOut]:i;return r&&n.push(r),c.serialize(n,t,!0,e)},_changed:function(t){var e=this._path;if(e){var i,r=e._curves,n=this._index;r&&(t&&t!==this._point&&t!==this._handleIn||!(i=n>0?r[n-1]:e._closed?r[r.length-1]:null)||i._changed(),t&&t!==this._point&&t!==this._handleOut||!(i=r[n])||i._changed()),e._changed(25)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(m.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(m.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(m.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,i=this._path;this._selection=t=t||0,i&&t!==e&&(i._updateSelection(this,e,t),i._changed(129))},_changeSelection:function(t,e){var i=this._selection;this.setSelection(e?i|t:i&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==h?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new B(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,e,i){var r=t||{},n=r.type,s=r.factor,a=this.getPrevious(),o=this.getNext(),u=(a||this)._point,l=this._point,c=(o||this)._point,d=u.getDistance(l),f=l.getDistance(c);if(n&&"catmull-rom"!==n){if("geometric"!==n)throw new Error("Smoothing method '"+n+"' not supported.");if(a&&o){var p=u.subtract(c),g=s===h?.4:s,v=g*d/(d+f);e||this.setHandleIn(p.multiply(v)),i||this.setHandleOut(p.multiply(v-g))}}else{var _=s===h?.5:s,y=Math.pow(d,_),x=y*y,b=Math.pow(f,_),w=b*b;if(!e&&a){var T=2*w+3*b*y+x,S=3*b*(b+y);this.setHandleIn(0!==S?new m((w*u._x+T*l._x-x*c._x)/S-l._x,(w*u._y+T*l._y-x*c._y)/S-l._y):new m)}if(!i&&o){T=2*x+3*y*b+w,S=3*y*(y+b);this.setHandleOut(0!==S?new m((x*c._x+T*l._x-w*u._x)/S-l._x,(x*c._y+T*l._y-w*u._y)/S-l._y):new m)}}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,i=t.clone();t.set(e),e.set(i)},reversed:function(){return new L(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new L(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,i){var r=1-i,n=i,s=t._point,a=e._point,o=t._handleIn,h=e._handleIn,u=e._handleOut,l=t._handleOut;this._point._set(r*s._x+n*a._x,r*s._y+n*a._y,!0),this._handleIn._set(r*o._x+n*h._x,r*o._y+n*h._y,!0),this._handleOut._set(r*l._x+n*u._x,r*l._y+n*u._y,!0),this._changed()},_transformCoordinates:function(t,e,i){var r=this._point,n=i&&this._handleIn.isZero()?null:this._handleIn,s=i&&this._handleOut.isZero()?null:this._handleOut,a=r._x,o=r._y,h=2;return e[0]=a,e[1]=o,n&&(e[h++]=n._x+a,e[h++]=n._y+o),s&&(e[h++]=s._x+a,e[h++]=s._y+o),t&&(t._transformCoordinates(e,e,h/2),a=e[0],o=e[1],i?(r._x=a,r._y=o,h=2,n&&(n._x=e[h++]-a,n._y=e[h++]-o),s&&(s._x=e[h++]-a,s._y=e[h++]-o)):(n||(e[h++]=a,e[h++]=o),s||(e[h++]=a,e[h++]=o))),e}}),N=m.extend({initialize:function(t,e,i){var r,n,s;if(t)if((r=t[0])!==h)n=t[1];else{var a=t;(r=a.x)===h&&(r=(a=m.read(arguments)).x),n=a.y,s=a.selected}else r=n=0;this._x=r,this._y=n,this._owner=e,e[i]=this,s&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=v.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),F=c.extend({_class:"Curve",beans:!0,initialize:function(t,e,i,r,n,s,a,o){var h,u,l,c,d,f,p=arguments.length;3===p?(this._path=t,h=e,u=i):p?1===p?"segment1"in t?(h=new L(t.segment1),u=new L(t.segment2)):"point1"in t?(l=t.point1,d=t.handle1,f=t.handle2,c=t.point2):Array.isArray(t)&&(l=[t[0],t[1]],c=[t[6],t[7]],d=[t[2]-t[0],t[3]-t[1]],f=[t[4]-t[6],t[5]-t[7]]):2===p?(h=new L(t),u=new L(e)):4===p?(l=t,d=e,f=i,c=r):8===p&&(l=[t,e],c=[a,o],d=[i-t,r-e],f=[n-a,s-o]):(h=new L,u=new L),this._segment1=h||new L(l,null,d),this._segment2=u||new L(c,f,null)},_serialize:function(t,e){return c.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=h},clone:function(){return new F(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return F.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,i=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(i)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(m.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(m.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(m.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(m.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return F.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],i=0;i<8;i+=2)e.push(new m(t[i],t[i+1]));return e}},{getLength:function(){return null==this._length&&(this._length=F.getLength(this.getValues(),0,1)),this._length},getArea:function(){return F.getArea(this.getValues())},getLine:function(){return new E(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new F(F.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return F.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var i=null;if(t>=1e-8&&t<=1-1e-8){var r=F.subdivide(this.getValues(),t),n=r[0],s=r[1],a=e||this.hasHandles(),o=this._segment1,h=this._segment2,u=this._path;a&&(o._handleOut._set(n[2]-n[0],n[3]-n[1]),h._handleIn._set(s[4]-s[6],s[5]-s[7]));var l=n[6],c=n[7],d=new L(new m(l,c),a&&new m(n[4]-l,n[5]-c),a&&new m(s[2]-l,s[3]-c));u?(u.insert(o._index+1,d),i=this.getNext()):(this._segment2=d,this._changed(),i=new F(d,h))}return i},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,e){return this.divideAtTime(t===h?.5:e?t:this.getTimeAt(t))},split:function(t,e){return this.splitAtTime(t===h?.5:e?t:this.getTimeAt(t))},reversed:function(){return new F(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,i,r){var n=t._point,s=t._handleOut,a=e._handleIn,o=e._point,h=n.x,u=n.y,l=o.x,c=o.y,d=r?[h,u,h,u,l,c,l,c]:[h,u,h+s._x,u+s._y,l+a._x,c+a._y,l,c];return i&&i._transformCoordinates(d,d,4),d},subdivide:function(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],u=t[6],l=t[7];e===h&&(e=.5);var c=1-e,d=c*i+e*n,f=c*r+e*s,p=c*n+e*a,g=c*s+e*o,v=c*a+e*u,_=c*o+e*l,m=c*d+e*p,y=c*f+e*g,x=c*p+e*v,b=c*g+e*_,w=c*m+e*x,T=c*y+e*b;return[[i,r,d,f,m,y,w,T],[w,T,x,b,v,_,u,l]]},getMonoCurves:function(t,e){var i=[],r=e?0:1,n=t[r+0],s=t[r+2],a=t[r+4],o=t[r+6];if(n>=s==s>=a&&s>=a==a>=o||F.isStraight(t))i.push(t);else{var h=3*(s-a)-n+o,u=2*(n+a)-4*s,l=s-n,c=[],d=v.solveQuadratic(h,u,l,c,1e-8,1-1e-8);if(d){c.sort();var f=c[0],p=F.subdivide(t,f);i.push(p[0]),d>1&&(f=(c[1]-f)/(1-f),p=F.subdivide(p[1],f),i.push(p[0])),i.push(p[1])}else i.push(t)}return i},solveCubic:function(t,e,i,r,n,s){var a=t[e],o=t[e+2],h=t[e+4],u=t[e+6],l=0;if(!(a<i&&u<i&&o<i&&h<i||a>i&&u>i&&o>i&&h>i)){var c=3*(o-a),d=3*(h-o)-c,f=u-a-c-d;l=v.solveCubic(f,d,c,a-i,r,n,s)}return l},getTimeOf:function(t,e){var i=new m(t[0],t[1]),r=new m(t[6],t[7]);if(null===(e.isClose(i,1e-12)?0:e.isClose(r,1e-12)?1:null))for(var n=[e.x,e.y],s=[],a=0;a<2;a++)for(var o=F.solveCubic(t,a,n[a],s,0,1),h=0;h<o;h++){var u=s[h];if(e.isClose(F.getPoint(t,u),1e-7))return u}return e.isClose(i,1e-7)?0:e.isClose(r,1e-7)?1:null},getNearestTime:function(t,e){if(F.isStraight(t)){var i=t[0],r=t[1],n=t[6]-i,s=t[7]-r,a=n*n+s*s;if(0===a)return 0;var o=((e.x-i)*n+(e.y-r)*s)/a;return o<1e-12?0:o>.999999999999?1:F.getTimeOf(t,new m(i+o*n,r+o*s))}var h=1/0,u=0;function l(i){if(i>=0&&i<=1){var r=e.getDistance(F.getPoint(t,i),!0);if(r<h)return h=r,u=i,!0}}for(var c=0;c<=100;c++)l(c/100);for(var d=.005;d>1e-8;)l(u-d)||l(u+d)||(d/=2);return u},getPart:function(t,e,i){var r=e>i;if(r){var n=e;e=i,i=n}return e>0&&(t=F.subdivide(t,e)[1]),i<1&&(t=F.subdivide(t,(i-e)/(1-e))[0]),r?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var i=t[0],r=t[1],n=t[2],s=t[3],a=t[4],o=t[5],h=t[6],u=t[7],l=3*n-2*i-h,c=3*s-2*r-u,d=3*a-2*h-i,f=3*o-2*u-r;return Math.max(l*l,d*d)+Math.max(c*c,f*f)<=16*e*e},getArea:function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],h=t[7];return 3*((h-i)*(r+s)-(o-e)*(n+a)+n*(e-s)-r*(i-a)+h*(s+e/3)-o*(a+i/3))/20},getBounds:function(t){for(var e=t.slice(0,2),i=e.slice(),r=[0,0],n=0;n<2;n++)F._addBounds(t[n],t[n+2],t[n+4],t[n+6],n,0,e,i,r);return new w(e[0],e[1],i[0]-e[0],i[1]-e[1])},_addBounds:function(t,e,i,r,n,s,a,o,h){function u(t,e){var i=t-e,r=t+e;i<a[n]&&(a[n]=i),r>o[n]&&(o[n]=r)}s/=2;var l=a[n]-s,c=o[n]+s;if(t<l||e<l||i<l||r<l||t>c||e>c||i>c||r>c)if(e<t!=e<r&&i<t!=i<r)u(t,s),u(r,s);else{var d=3*(e-i)-t+r,f=2*(t+i)-4*e,p=e-t,g=v.solveQuadratic(d,f,p,h);u(r,0);for(var _=0;_<g;_++){var m=h[_],y=1-m;1e-8<=m&&m<=1-1e-8&&u(y*y*y*t+3*y*y*m*e+3*y*m*m*i+m*m*m*r,s)}}}}},c.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=U[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),c.each({isStraight:function(t,e,i,r){if(e.isZero()&&i.isZero())return!0;var n=r.subtract(t);if(n.isZero())return!1;if(n.isCollinear(e)&&n.isCollinear(i)){var s=new E(t,r);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(r.add(i))<1e-7){var a=n.dot(n),o=n.dot(e)/a,h=n.dot(i)/a;return o>=0&&o<=1&&h<=0&&h>=-1}}return!1},isLinear:function(t,e,i,r){var n=r.subtract(t).divide(3);return e.equals(n)&&i.negate().equals(n)}},function(t,e){this[e]=function(e){var i=this._segment1,r=this._segment2;return t(i._point,i._handleOut,r._handleIn,r._point,e)},this.statics[e]=function(e,i){var r=e[0],n=e[1],s=e[6],a=e[7];return t(new m(r,n),new m(e[2]-r,e[3]-n),new m(e[4]-s,e[5]-a),new m(s,a),i)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new B(this,t):null},getTimeAt:function(t,e){return F.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(m.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return F.getTimeOf(this.getValues(),m.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=m.read(arguments),e=this.getValues(),i=F.getNearestTime(e,t),r=F.getPoint(e,i);return new B(this,i,r,null,t.getDistance(r))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return c.each(t,function(t){this[t+"At"]=function(e,i){var r=this.getValues();return F[t](r,i?e:F.getTimeAt(r,e))},this[t+"AtTime"]=function(e){return F[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=9*(r-s)+3*(t[6]-e),h=6*(e+s)-12*r,u=3*(r-e),l=9*(n-a)+3*(t[7]-i),c=6*(i+a)-12*n,d=3*(n-i);return function(t){var e=(o*t+h)*t+u,i=(l*t+c)*t+d;return Math.sqrt(e*e+i*i)}}function e(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,i,r){if(null==e||e<0||e>1)return null;var n=t[0],s=t[1],a=t[2],o=t[3],h=t[4],u=t[5],l=t[6],c=t[7],d=v.isZero;d(a-n)&&d(o-s)&&(a=n,o=s),d(h-l)&&d(u-c)&&(h=l,u=c);var f,p,g=3*(a-n),_=3*(h-a)-g,y=l-n-g-_,x=3*(o-s),b=3*(u-o)-x,w=c-s-x-b;if(0===i)f=0===e?n:1===e?l:((y*e+_)*e+g)*e+n,p=0===e?s:1===e?c:((w*e+b)*e+x)*e+s;else{if(e<1e-8?(f=g,p=x):e>1-1e-8?(f=3*(l-h),p=3*(c-u)):(f=(3*y*e+2*_)*e+g,p=(3*w*e+2*b)*e+x),r){0===f&&0===p&&(e<1e-8||e>1-1e-8)&&(f=h-a,p=u-o);var T=Math.sqrt(f*f+p*p);T&&(f/=T,p/=T)}if(3===i){h=6*y*e+2*_,u=6*w*e+2*b;var S=Math.pow(f*f+p*p,1.5);f=0!==S?(f*u-p*h)/S:0,p=0}}return 2===i?new m(p,-f):new m(f,p)}return{statics:{classify:function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=t[6],u=t[7],l=r*(i-u)+n*(o-e)+e*u-i*o,c=3*(s*(n-i)+a*(e-r)+r*i-n*e),d=c-l,f=d-l+(e*(u-a)+i*(s-o)+o*a-u*s),p=Math.sqrt(f*f+d*d+c*c),g=0!==p?1/p:0,_=v.isZero;function m(t,e,i){var r=e!==h,n=r&&e>0&&e<1,s=r&&i>0&&i<1;return!r||(n||s)&&("loop"!==t||n&&s)||(t="arch",n=s=!1),{type:t,roots:n||s?n&&s?e<i?[e,i]:[i,e]:[n?e:i]:null}}if(d*=g,c*=g,_(f*=g))return _(d)?m(_(c)?"line":"quadratic"):m("serpentine",c/(3*d));var y=3*d*d-4*f*c;if(_(y))return m("cusp",d/(2*f));var x=y>0?Math.sqrt(y/3):Math.sqrt(-y),b=2*f;return m(y>0?"serpentine":"loop",(d+x)/b,(d-x)/b)},getLength:function(i,r,n,s){if(r===h&&(r=0),n===h&&(n=1),F.isStraight(i)){var a=i;n<1&&(a=F.subdivide(a,n)[0],r/=n),r>0&&(a=F.subdivide(a,r)[1]);var o=a[6]-a[0],u=a[7]-a[1];return Math.sqrt(o*o+u*u)}return v.integrate(s||t(i),r,n,e(r,n))},getTimeAt:function(i,r,n){if(n===h&&(n=r<0?1:0),0===r)return n;var s=Math.abs,a=r>0,o=a?n:0,u=a?1:n,l=t(i),c=F.getLength(i,o,u,l),d=s(r)-c;if(s(d)<1e-12)return a?u:o;if(d>1e-12)return null;var f=r/c,p=0;return v.findRoot(function(t){return p+=v.integrate(l,n,t,e(n,t)),n=t,p-r},l,n+f,o,u,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=3*r-e-3*s+t[6],h=3*e-6*r+3*s,u=-3*e+3*r,l=3*n-i-3*a+t[7],c=3*i-6*n+3*a,d=-3*i+3*n,f=[];return v.solveCubic(9*(o*o+l*l),9*(o*h+c*l),2*(h*h+c*c)+3*(u*o+d*l),u*h+c*d,f,1e-8,1-1e-8),f.sort()}}}},new function(){function t(t,e,i,r,n,s,a){var o=!a&&i.getPrevious()===n,h=!a&&i!==n&&i.getNext()===n;if(null!==r&&r>=(o?1e-8:0)&&r<=(h?1-1e-8:1)&&null!==s&&s>=(h?1e-8:0)&&s<=(o?1-1e-8:1)){var u=new B(i,r,null,a),l=new B(n,s,null,a);u._intersection=l,l._intersection=u,e&&!e(u)||B.insert(t,u,!0)}}function e(t,e,r,n){return t[0][1]<r?i(t,!0,r):e[0][1]>n?i(e,!1,n):t[0][0]}function i(t,e,i){for(var r=t[0][0],n=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],h=t[s][1];if(e?h>=i:h<=i)return h===i?o:r+(i-n)*(o-r)/(h-n);r=o,n=h}return null}function r(t,e,i,r,n){var s=v.isZero;if(s(r)&&s(n)){var a=F.getTimeOf(t,new m(e,i));return null===a?[]:[a]}for(var o=Math.atan2(-n,r),h=Math.sin(o),u=Math.cos(o),l=[],c=[],d=0;d<8;d+=2){var f=t[d]-e,p=t[d+1]-i;l.push(f*u-p*h,f*h+p*u)}return F.solveCubic(l,1,0,c,0,1),c}function n(i,n,s,o,h,u){var l=Math.min,c=Math.max;if(c(i[0],i[2],i[4],i[6])+1e-12>l(n[0],n[2],n[4],n[6])&&l(i[0],i[2],i[4],i[6])-1e-12<c(n[0],n[2],n[4],n[6])&&c(i[1],i[3],i[5],i[7])+1e-12>l(n[1],n[3],n[5],n[7])&&l(i[1],i[3],i[5],i[7])-1e-12<c(n[1],n[3],n[5],n[7])){var d=a(i,n);if(d)for(var f=0;f<2;f++){var p=d[f];t(h,u,s,p[0],o,p[1],!0)}else{var g=F.isStraight(i),v=F.isStraight(n),_=g&&v,y=g&&!v,x=h.length;if((_?function(e,i,r,n,s,a){var o=E.intersect(e[0],e[1],e[6],e[7],i[0],i[1],i[6],i[7]);o&&t(s,a,r,F.getTimeOf(e,o),n,F.getTimeOf(i,o))}:g||v?function(e,i,n,s,a,o,h){for(var u=i[0],l=i[1],c=r(e,u,l,i[6]-u,i[7]-l),d=0,f=c.length;d<f;d++){var p=c[d],g=F.getPoint(e,p),v=F.getTimeOf(i,g);null!==v&&t(a,o,h?s:n,h?v:p,h?n:s,h?p:v)}}:function i(r,n,s,a,o,h,u,l,c,d,f,p,g){if(++c>=4096||++l>=40)return c;var v,_,m=n[0],y=n[1],x=n[6],b=n[7],w=E.getSignedDistance,T=w(m,y,x,b,n[2],n[3]),S=w(m,y,x,b,n[4],n[5]),C=T*S>0?.75:4/9,P=C*Math.min(0,T,S),O=C*Math.max(0,T,S),M=w(m,y,x,b,r[0],r[1]),A=w(m,y,x,b,r[2],r[3]),I=w(m,y,x,b,r[4],r[5]),k=w(m,y,x,b,r[6],r[7]),R=function(t,e,i,r){var n,s=[0,t],a=[1/3,e],o=[2/3,i],h=[1,r],u=e-(2*t+r)/3,l=i-(t+2*r)/3;if(u*l<0)n=[[s,a,h],[s,o,h]];else{var c=u/l;n=[c>=2?[s,a,h]:c<=.5?[s,o,h]:[s,a,o,h],[s,h]]}return(u||l)<0?n.reverse():n}(M,A,I,k),D=R[0],L=R[1];if(0===T&&0===S&&0===M&&0===A&&0===I&&0===k||null==(v=e(D,L,P,O))||null==(_=e(D.reverse(),L.reverse(),P,O)))return c;var N=d+(f-d)*v,B=d+(f-d)*_;if(Math.max(g-p,B-N)<1e-9){var j=(N+B)/2,U=(p+g)/2;t(o,h,u?a:s,u?U:j,u?s:a,u?j:U)}else if(r=F.getPart(r,v,_),_-v>.8)if(B-N>g-p)j=(N+B)/2,c=i(n,(z=F.subdivide(r,.5))[0],a,s,o,h,!u,l,c,p,g,N,j),c=i(n,z[1],a,s,o,h,!u,l,c,p,g,j,B);else{var z;U=(p+g)/2,c=i((z=F.subdivide(n,.5))[0],r,a,s,o,h,!u,l,c,p,U,N,B),c=i(z[1],r,a,s,o,h,!u,l,c,U,g,N,B)}else c=g-p>=1e-9?i(n,r,a,s,o,h,!u,l,c,p,g,N,B):i(r,n,s,a,o,h,u,l,c,N,B,p,g);return c})(y?n:i,y?i:n,y?o:s,y?s:o,h,u,y,0,0,0,1,0,1),!_||h.length===x)for(f=0;f<4;f++){var b=f>>1,w=1&f,T=6*b,S=6*w,C=new m(i[T],i[T+1]),P=new m(n[S],n[S+1]);C.isClose(P,1e-12)&&t(h,u,s,b,o,w)}}}return h}function s(e,i,r,n){var s=F.classify(e);if("loop"===s.type){var a=s.roots;t(r,n,i,a[0],i,a[1])}return r}function a(t,e){function i(t){var e=t[6]-t[0],i=t[7]-t[1];return e*e+i*i}var r=Math.abs,n=E.getDistance,s=F.isStraight(t),a=F.isStraight(e),o=s&&a,h=i(t)<i(e),u=h?e:t,l=h?t:e,c=u[0],d=u[1],f=u[6]-c,p=u[7]-d;if(n(c,d,f,p,l[0],l[1],!0)<1e-7&&n(c,d,f,p,l[6],l[7],!0)<1e-7)!o&&n(c,d,f,p,u[2],u[3],!0)<1e-7&&n(c,d,f,p,u[4],u[5],!0)<1e-7&&n(c,d,f,p,l[2],l[3],!0)<1e-7&&n(c,d,f,p,l[4],l[5],!0)<1e-7&&(s=a=o=!0);else if(o)return null;if(s^a)return null;for(var g=[t,e],v=[],_=0;_<4&&v.length<2;_++){var y=1&_,x=1^y,b=_>>1,w=F.getTimeOf(g[y],new m(g[x][b?6:0],g[x][b?7:1]));if(null!=w){var T=y?[b,w]:[w,b];(!v.length||r(T[0]-v[0][0])>1e-8&&r(T[1]-v[0][1])>1e-8)&&v.push(T)}if(_>2&&!v.length)break}if(2!==v.length)v=null;else if(!o){var S=F.getPart(t,v[0][0],v[1][0]),C=F.getPart(e,v[0][1],v[1][1]);(r(C[2]-S[2])>1e-7||r(C[3]-S[3])>1e-7||r(C[4]-S[4])>1e-7||r(C[5]-S[5])>1e-7)&&(v=null)}return v}return{getIntersections:function(t){var e=this.getValues(),i=t&&t!==this&&t.getValues();return i?n(e,i,this,t,[]):s(e,this,[])},statics:{getOverlaps:a,getIntersections:function(t,e,i,r,a,o){var h=!e;h&&(e=t);for(var u,l,c=t.length,d=e.length,f=[],p=[],g=0;g<d;g++)f[g]=e[g].getValues(a);for(g=0;g<c;g++){var v=t[g],_=h?f[g]:v.getValues(r),m=v.getPath();m!==l&&(l=m,u=[],p.push(u)),h&&s(_,v,u,i);for(var y=h?g+1:0;y<d;y++){if(o&&u.length)return u;n(_,f[y],v,e[y],u,i)}}u=[],g=0;for(var x=p.length;g<x;g++)u.push.apply(u,p[g]);return u},getCurveLineIntersections:r}}}),B=c.extend({_class:"CurveLocation",initialize:function(t,e,i,r,n){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=i||t.getPointAtTime(e),this._overlap=r,this._distance=n,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),i=this.getTime();0===i?t=e._segment1:1===i?t=e._segment2:null!=i&&(t=e.getPartLength(0,i)<e.getPartLength(i,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){var t=this._path,e=this;function i(t){var i=t&&t.getCurve();if(i&&null!=(e._time=i.getTimeOf(e._point)))return e._setCurve(i),i}return t&&t._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||i(this._segment)||i(this._segment1)||i(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),i=this.getIndex();if(e&&null!=i)for(var r=e.getCurves(),n=0;n<i;n++)t+=r[n].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),i=this.getTime();this._curveOffset=t=null!=i&&e&&e.getPartLength(0,i)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,i=t&&t.splitAtTime(this.getTime());return i&&this._setSegment(e.getLastSegment()),i},equals:function(t,e){var i=this===t;if(!i&&t instanceof B){var r=this.getCurve(),n=t.getCurve(),s=r._path;if(s===n._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),h=!e&&this._intersection,u=!e&&t._intersection;i=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!h&&!u||h&&u&&h.equals(u,!0))}}return i},toString:function(){var t=[],e=this.getPoint(),i=g.instance;e&&t.push("point: "+e);var r=this.getIndex();null!=r&&t.push("index: "+r);var n=this.getTime();return null!=n&&t.push("time: "+i.number(n)),null!=this._distance&&t.push("distance: "+i.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),i=t.getCurve();return!(e.isStraight()&&i.isStraight()&&e.getLine().intersect(i.getLine()))}return!1},isCrossing:function(){var t=this._intersection;if(!t)return!1;var e=this.getTime(),i=t.getTime(),r=e>=1e-8&&e<=1-1e-8,n=i>=1e-8&&i<=1-1e-8;if(r&&n)return!this.isTouching();var s=this.getCurve(),a=e<1e-8?s.getPrevious():s,o=t.getCurve(),h=i<1e-8?o.getPrevious():o;if(e>1-1e-8&&(s=s.getNext()),i>1-1e-8&&(o=o.getNext()),!(a&&s&&h&&o))return!1;var u=[];function l(t,e){var i=t.getValues(),r=F.classify(i).roots||F.getPeaks(i),n=r.length,s=e&&n>1?r[n-1]:n>0?r[0]:.5;u.push(F.getLength(i,e?s:0,e?1:s)/2)}function c(t,e,i){return e<i?t>e&&t<i:t>e||t<i}r||(l(a,!0),l(s,!1)),n||(l(h,!0),l(o,!1));var d=this.getPoint(),f=Math.min.apply(Math,u),p=r?s.getTangentAtTime(e):s.getPointAt(f).subtract(d),g=r?p.negate():a.getPointAt(-f).subtract(d),v=n?o.getTangentAtTime(i):o.getPointAt(f).subtract(d),_=n?v.negate():h.getPointAt(-f).subtract(d),m=g.getAngle(),y=p.getAngle(),x=_.getAngle(),b=v.getAngle();return!!(r?c(m,x,b)^c(y,x,b)&&c(m,b,x)^c(y,b,x):c(x,m,y)^c(b,m,y)&&c(x,y,m)^c(b,y,m))},hasOverlap:function(){return!!this._overlap}},c.each(F._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),i=this.getTime();return null!=i&&t&&t[e](i,!0)}},{preserve:!0}),new function(){function t(t,e,i){var r=t.length,n=0,s=r-1;function a(i,n){for(var s=i+n;s>=-1&&s<=r;s+=n){var a=t[(s%r+r)%r];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(;n<=s;){var o,h=n+s>>>1,u=t[h];if(i&&(o=e.equals(u)?u:a(h,-1)||a(h,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var l=e.getPath(),c=u.getPath();(l!==c?l._id-c._id:e.getIndex()+e.getTime()-(u.getIndex()+u.getTime()))<0?s=h-1:n=h+1}return t.splice(n,0,e),e}return{statics:{insert:t,expand:function(e){for(var i=e.slice(),r=e.length-1;r>=0;r--)t(i,e[r]._intersection,!1);return i}}}}),j=P.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,i,r;if(c.isPlainObject(t)?(i=t.segments,e=t.pathData):Array.isArray(t)?i=t:"string"==typeof t&&(e=t),i){var n=i[0];r=n&&Array.isArray(n[0])}else e&&(r=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(r?z:U)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){var e,i,r,n=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),s=!1,a=new m,o=new m;function h(t,i){var r=+e[t];return s&&(r+=a[i]),r}function u(t){return new m(h(t,"x"),h(t+1,"y"))}this.clear();for(var l=0,c=n&&n.length;l<c;l++){var d=n[l],f=d[0],p=f.toLowerCase(),g=(e=d.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&e.length;switch(s=f===p,"z"!==i||/[mz]/.test(p)||this.moveTo(a),p){case"m":case"l":for(var v="m"===p,_=0;_<g;_+=2)this[v?"moveTo":"lineTo"](a=u(_)),v&&(o=a,v=!1);r=a;break;case"h":case"v":var y="h"===p?"x":"y";a=a.clone();for(_=0;_<g;_++)a[y]=h(_,y),this.lineTo(a);r=a;break;case"c":for(_=0;_<g;_+=6)this.cubicCurveTo(u(_),r=u(_+2),a=u(_+4));break;case"s":for(_=0;_<g;_+=4)this.cubicCurveTo(/[cs]/.test(i)?a.multiply(2).subtract(r):a,r=u(_),a=u(_+2)),i=p;break;case"q":for(_=0;_<g;_+=4)this.quadraticCurveTo(r=u(_),a=u(_+2));break;case"t":for(_=0;_<g;_+=2)this.quadraticCurveTo(r=/[qt]/.test(i)?a.multiply(2).subtract(r):a,a=u(_)),i=p;break;case"a":for(_=0;_<g;_+=7)this.arcTo(a=u(_+5),new x(+e[_],+e[_+1]),+e[_+2],+e[_+4],+e[_+3]);break;case"z":this.closePath(1e-12),a=o}i=p}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,i,r){var n=this===t||!t,s=this._matrix._orNullIfIdentity(),a=n?s:(i||t._matrix)._orNullIfIdentity();return n||this.getBounds(s).intersects(t.getBounds(a),1e-12)?F.getIntersections(this.getCurves(),!n&&t.getCurves(),e,s,a,r):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=m.read(arguments),e=this.getCurves(),i=1/0,r=null,n=0,s=e.length;n<s;n++){var a=e[n].getNearestLocation(t);a._distance<i&&(i=a._distance,r=a)}return r},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,i){var r=!this._children,n=r?"_segments":"_children",s=t[n],a=e[n],o=this[n];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var h=o.length,u=a.length;if(h<u)for(var l=r?L:U,c=h;c<u;c++)this.add(new l);else h>u&&this[r?"removeSegments":"removeChildren"](u,h);for(c=0;c<u;c++)o[c].interpolate(s[c],a[c],i);r&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var i=this._children||[this],r=t._children?t._children.slice():[t],n=i.length,s=r.length,a=[],o=0;e=!0;for(var h=n-1;h>=0&&e;h--){var u=i[h];e=!1;for(var l=s-1;l>=0&&!e;l--)u.compare(r[l])&&(a[l]||(a[l]=!0,o++),e=!0)}e=e&&o===s}return e}}),U=j.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var e=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==h||t.x===h&&t.point===h?null:arguments;e&&e.length>0?this.setSegments(e):(this._curves=h,this._segmentSelection=0,e||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!e&&t)},_equals:function(t){return this._closed===t._closed&&c.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(e){if(t.base.call(this,e),8&e){if(this._length=this._area=h,16&e)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 32&e&&(this._bounds=h)},getStyle:function(){var t=this._parent;return(t instanceof z?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var e=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=h,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(L.readList(t,0,{},i))}e&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var i=this._countCurves();t=this._curves=new Array(i);for(var r=0;r<i;r++)t[r]=new F(this,e[r],e[r+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new F(this,this._segments[e-1],this._segments[0]))}this._changed(25)}}},{beans:!0,getPathData:function(t,e){var i,r,n,s,a,o,h,u,l=this._segments,c=l.length,d=new g(e),f=new Array(6),p=!0,v=[];function _(e,l){if(e._transformCoordinates(t,f),i=f[0],r=f[1],p)v.push("M"+d.pair(i,r)),p=!1;else if(a=f[2],o=f[3],a===i&&o===r&&h===n&&u===s){if(!l){var c=i-n,g=r-s;v.push(0===c?"v"+d.number(g):0===g?"h"+d.number(c):"l"+d.pair(c,g))}}else v.push("c"+d.pair(h-n,u-s)+" "+d.pair(a-n,o-s)+" "+d.pair(i-n,r-s));n=i,s=r,h=f[4],u=f[5]}if(!c)return"";for(var m=0;m<c;m++)_(l[m]);return this._closed&&c>0&&(_(l[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,i=new Array(6),r=0,n=e.length;r<n;r++)e[r]._transformCoordinates(t,i,!0);return!0},_add:function(t,e){for(var i=this._segments,r=this._curves,n=t.length,s=null==e,a=(e=s?i.length:e,0);a<n;a++){var o=t[a];o._path&&(o=t[a]=o.clone()),o._path=this,o._index=e+a,o._selection&&this._updateSelection(o,0,o._selection)}if(s)i.push.apply(i,t);else{i.splice.apply(i,[e,0].concat(t));a=e+n;for(var h=i.length;a<h;a++)i[a]._index=a}if(r){var u=this._countCurves(),l=e>0&&e+n-1===u?e-1:e,c=l,d=Math.min(l+n,u);t._curves&&(r.splice.apply(r,[l,0].concat(t._curves)),c+=t._curves.length);for(a=c;a<d;a++)r.splice(a,0,new F(this,null,null));this._adjustCurves(l,d)}return this._changed(25),t},_adjustCurves:function(t,e){for(var i,r=this._segments,n=this._curves,s=t;s<e;s++)(i=n[s])._path=this,i._segment1=r[s],i._segment2=r[s+1]||r[0],i._changed();(i=n[this._closed&&!t?r.length-1:t-1])&&(i._segment2=r[t]||r[0],i._changed()),(i=n[e])&&(i._segment1=r[e],i._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(L.readList(arguments)):this._add([L.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(L.readList(arguments,1),t):this._add([L.read(arguments,1)],t)[0]},addSegment:function(){return this._add([L.read(arguments)])[0]},insertSegment:function(t){return this._add([L.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(L.readList(t))},insertSegments:function(t,e){return this._add(L.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,i){t=t||0,e=c.pick(e,this._segments.length);var r=this._segments,n=this._curves,s=r.length,a=r.splice(t,e-t),o=a.length;if(!o)return a;for(var h=0;h<o;h++){var u=a[h];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}h=t;for(var l=r.length;h<l;h++)r[h]._index=h;if(n){var d=t>0&&e===s+(this._closed?1:0)?t-1:t;for(h=(n=n.splice(d,o)).length-1;h>=0;h--)n[h]._path=null;i&&(a._curves=n.slice(1)),this._adjustCurves(d,d)}return this._changed(25),a},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,i=t.length;e<i;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,i=this._closed;t=0;for(var r=0,n=e.length;r<n;r++){var s=r+1===n;t+=F.getArea(F.getValues(e[r],e[s?0:r+1],null,s&&!i))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,i=e.length,r=t?7:0;this._segmentSelection=r*i;for(var n=0;n<i;n++)e[n]._selection=r},_updateSelection:function(t,e,i){t._selection=i,(this._segmentSelection+=i-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,i=this.getLocationAt(t);return i&&(e=i.getCurve().divideAt(i.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),i=e&&e.index,r=e&&e.time;r>1-1e-8&&(i++,r=0);var n=this.getCurves();if(i>=0&&i<n.length){r>=1e-8&&n[i++].divideAtTime(r);var s,a=this.removeSegments(i,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new U(P.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,e){var i,r=e===h?t:(i=this.getCurves()[t])&&i.getLocationAtTime(e);return null!=r?this.splitAt(r):null},join:function(t,e){var i=e||0;if(t&&t!==this){var r=t._segments,n=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;n&&n._point.isClose(s._point,i)&&t.reverse();var a=t.getFirstSegment();if(n&&n._point.isClose(a._point,i))n.setHandleOut(a._handleOut),this._add(r.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,i)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,i)?(o.setHandleIn(s._handleIn),this._add(r.slice(0,r.length-1),0)):this._add(r.slice())}t._closed&&this._add([r[0]]),t.remove()}var h=this.getFirstSegment(),u=this.getLastSegment();return h!==u&&h._point.isClose(u._point,i)&&(h.setHandleIn(u._handleIn),u.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),i=t&&t.simplify,r=i?1e-7:0,n=e.length-1;n>=0;n--){var s=e[n];!s.hasHandles()&&(!s.hasLength(r)||i&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var i=this._segments[t],r=i._handleIn;i._handleIn=i._handleOut,i._handleOut=r,i._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new V(this,t||.25,256,!0).parts,i=e.length,r=[],n=0;n<i;n++)r.push(new L(e[n].curve.slice(0,2)));!this._closed&&i>0&&r.push(new L(e[i-1].curve.slice(6))),this.setSegments(r)},simplify:function(t){var e=new X(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){var e=this,i=t||{},r=i.type||"asymmetric",n=this._segments,s=n.length,a=this._closed;function o(t,i){var r=t&&t.index;if(null!=r){var n=t.path;if(n&&n!==e)throw new Error(t._class+" "+r+" of "+n+" is not part of "+e);i&&t instanceof F&&r++}else r="number"==typeof t?t:i;return Math.min(r<0&&a?r%s:r<0?r+s:r,s-1)}var u=a&&i.from===h&&i.to===h,l=o(i.from,0),c=o(i.to,s-1);if(l>c)if(a)l-=s;else{var d=l;l=c,c=d}if(/^(?:asymmetric|continuous)$/.test(r)){var f="asymmetric"===r,p=Math.min,g=c-l+1,v=g-1,_=u?p(g,4):1,m=_,y=_,x=[];if(a||(m=p(1,l),y=p(1,s-c-1)),(v+=m+y)<=1)return;for(var b=0,w=l-m;b<=v;b++,w++)x[b]=n[(w<0?w+s:w)%s]._point;var T=x[0]._x+2*x[1]._x,S=x[0]._y+2*x[1]._y,E=2,C=v-1,P=[T],O=[S],M=[E],A=[],I=[];for(b=1;b<v;b++){var k=b<C,R=k?4:f?2:7,D=k?4:f?3:8,L=k?2:f?0:1,N=(k?1:f?1:2)/E;E=M[b]=R-N,T=P[b]=D*x[b]._x+L*x[b+1]._x-N*T,S=O[b]=D*x[b]._y+L*x[b+1]._y-N*S}A[C]=P[C]/M[C],I[C]=O[C]/M[C];for(b=v-2;b>=0;b--)A[b]=(P[b]-A[b+1])/M[b],I[b]=(O[b]-I[b+1])/M[b];A[v]=(3*x[v]._x-A[C])/2,I[v]=(3*x[v]._y-I[C])/2;b=m;var B=v-y;for(w=l;b<=B;b++,w++){var j=n[w<0?w+s:w],U=j._point,z=A[b]-U._x,V=I[b]-U._y;(u||b<B)&&j.setHandleOut(z,V),(u||b>m)&&j.setHandleIn(-z,-V)}}else for(b=l;b<=c;b++)n[b<0?b+s:b].smooth(i,!u&&b===l,!u&&b===c)},toShape:function(t){if(!this._closed)return null;var e,i,r,n,s,a,o,u=this._segments;function l(t,e){var i=u[t],r=i.getNext(),n=u[e],s=n.getNext();return i._handleOut.isZero()&&r._handleIn.isZero()&&n._handleOut.isZero()&&s._handleIn.isZero()&&r._point.subtract(i._point).isCollinear(s._point.subtract(n._point))}function c(t){var e=u[t],i=e.getNext(),r=e._handleOut,n=i._handleIn;if(r.isOrthogonal(n)){var s=e._point,a=i._point,o=new E(s,r,!0).intersect(new E(a,n,!0),!0);return o&&v.isZero(r.getLength()/o.subtract(s).getLength()-.5522847498307936)&&v.isZero(n.getLength()/o.subtract(a).getLength()-.5522847498307936)}return!1}function d(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this.hasHandles()&&4===u.length&&l(0,2)&&l(1,3)&&(s=u[1],a=s.getPrevious(),o=s.getNext(),a._handleOut.isZero()&&s._handleIn.isZero()&&s._handleOut.isZero()&&o._handleIn.isZero()&&s._point.subtract(a._point).isOrthogonal(o._point.subtract(s._point)))?(e=A.Rectangle,i=new x(d(0,3),d(0,1)),n=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&c(0)&&c(2)&&c(4)&&c(6)&&l(1,5)&&l(3,7)?(e=A.Rectangle,r=(i=new x(d(1,6),d(0,3))).subtract(new x(d(0,7),d(1,2))).divide(2),n=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&c(0)&&c(1)&&c(2)&&c(3)&&(v.isZero(d(0,2)-d(1,3))?(e=A.Circle,r=d(0,2)/2):(e=A.Ellipse,r=new x(d(2,0)/2,d(3,1)/2)),n=u[1]._point),e){var f=this.getPosition(!0),p=new e({center:f,size:i,radius:r,insert:!1});return p.copyAttributes(this,!0),p._matrix.prepend(this._matrix),p.rotate(n.subtract(f).getAngle()+90),(t===h||t)&&p.insertAbove(this),p}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof z)return t.base.call(this,e);var i=this.getCurves(),r=e.getCurves(),n=i.length,s=r.length;if(!n||!s)return n==s;for(var a,o,h=i[0].getValues(),u=[],l=0,c=0,d=0;d<s;d++){var f=r[d].getValues();if(u.push(f),v=F.getOverlaps(h,f)){a=!d&&v[0][0]>0?s-1:d,o=v[0][1];break}}var p,g=Math.abs;for(f=u[a];h&&f;){var v;if(v=F.getOverlaps(h,f))if(g(v[0][0]-c)<1e-8){1===(c=v[1][0])&&(h=++l<n?i[l].getValues():null,c=0);var _=v[0][1];if(g(_-o)<1e-8){if(p||(p=[a,_]),1===(o=v[1][1])&&(++a>=s&&(a=0),f=u[a]||r[a].getValues(),o=0),!h)return p[0]===a&&p[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,i,r){var n,s,a,o,h,u,l=this,c=this.getStyle(),d=this._segments,f=d.length,p=this._closed,g=e._tolerancePadding,v=g,_=e.stroke&&c.hasStroke(),m=e.fill&&c.hasFill(),y=e.curves,x=_?c.getStrokeWidth()/2:m&&e.tolerance>0||y?0:null;function b(e,i){return t.subtract(e).divide(i).length<=1}function w(t,i,r){if(!e.selected||i.isSelected()){var n=t._point;if(i!==n&&(i=i.add(n)),b(i,v))return new D(r,l,{segment:t,point:i})}}function T(t,i){return(i||e.segments)&&w(t,t._point,"segment")||!i&&e.handles&&(w(t,t._handleIn,"handle-in")||w(t,t._handleOut,"handle-out"))}function S(t){o.add(t)}function E(e){var i,h=p||e._index>0&&e._index<f-1;return"round"===(h?n:s)?b(e._point,v):(o=new U({internal:!0,closed:!0}),h?e.isSmooth()||U._addBevelJoin(e,n,x,a,null,r,S,!0):"square"===s&&U._addSquareCap(e,s,x,null,r,S,!0),o.isEmpty()?void 0:o.contains(t)||(i=o.getNearestLocation(t))&&b(i.getPoint(),g))}if(null!==x&&(x>0?(n=c.getStrokeJoin(),s=c.getStrokeCap(),a=c.getMiterLimit(),v=v.add(U._getStrokePadding(x,r))):n=s="round"),!e.ends||e.segments||p){if(e.segments||e.handles)for(var C=0;C<f;C++)if(u=T(d[C]))return u}else if(u=T(d[0],!0)||T(d[f-1],!0))return u;if(null!==x){if(h=this.getNearestLocation(t)){var P=h.getTime();0===P||1===P&&f>1?E(h.getSegment())||(h=null):b(h.getPoint(),v)||(h=null)}if(!h&&"miter"===n&&f>1)for(C=0;C<f;C++){var O=d[C];if(t.getDistance(O._point)<=a*x&&E(O)){h=O.getLocation();break}}}return!h&&m&&this._contains(t)||h&&!_&&!y?new D("fill",this):h?new D(_?"stroke":"curve",this,{location:h,point:h.getPoint()}):null}},c.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this.getLocationAt(e);return i&&i[t]()}},{beans:!1,getLocationOf:function(){for(var t=m.read(arguments),e=this.getCurves(),i=0,r=e.length;i<r;i++){var n=e[i].getLocationOf(t);if(n)return n}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),i=0,r=0,n=e.length;r<n;r++){var s=i,a=e[r];if((i+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new B(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null}}),new function(){function t(t,e,i){var r,n,s,a,o,h,u,l,c=e._segments,d=c.length,f=new Array(6),p=!0;function g(e){if(i)e._transformCoordinates(i,f),r=f[0],n=f[1];else{var c=e._point;r=c._x,n=c._y}if(p)t.moveTo(r,n),p=!1;else{if(i)o=f[2],h=f[3];else{var d=e._handleIn;o=r+d._x,h=n+d._y}o===r&&h===n&&u===s&&l===a?t.lineTo(r,n):t.bezierCurveTo(u,l,o,h,r,n)}if(s=r,a=n,i)u=f[4],l=f[5];else{d=e._handleOut;u=s+d._x,l=a+d._y}}for(var v=0;v<d;v++)g(c[v]);e._closed&&d>0&&g(c[0])}return{_draw:function(e,i,r,n){var s=i.dontStart,o=i.dontFinish||i.clip,h=this.getStyle(),u=h.hasFill(),l=h.hasStroke(),c=h.getDashArray(),d=!a.support.nativeDash&&l&&c&&c.length;function f(t){return c[(t%d+d)%d]}if(s||e.beginPath(),(u||l&&!d||o)&&(t(e,this,n),this._closed&&e.closePath()),!o&&(u||l)&&(this._setStyles(e,i,r),u&&(e.fill(h.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),l)){if(d){s||e.beginPath();var p,g=new V(this,.25,32,!1,n),v=g.length,_=-h.getDashOffset(),m=0;for(_%=v;_>0;)_-=f(m--)+f(m--);for(;_<v;)p=_+f(m++),(_>0||p>0)&&g.drawPart(e,Math.max(_,0),Math.max(p,0)),_=p+f(m++)}e.stroke()}},_drawSelected:function(e,i){e.beginPath(),t(e,this,i),e.stroke(),function(t,e,i,r){var n,s,a=r/2,o=new Array(6);function h(e){var i=o[e],r=o[e+1];n==i&&s==r||(t.beginPath(),t.moveTo(n,s),t.lineTo(i,r),t.stroke(),t.beginPath(),t.arc(i,r,a,0,2*Math.PI,!0),t.fill())}for(var u=0,l=e.length;u<l;u++){var c=e[u],d=c._selection;if(c._transformCoordinates(i,o),n=o[0],s=o[1],2&d&&h(2),4&d&&h(4),t.fillRect(n-a,s-a,r,r),!(1&d)){var f=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(n-a+1,s-a+1,r-2,r-2),t.fillStyle=f}}}(e,this._segments,i,a.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new L(m.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new L(m.read(arguments))])},cubicCurveTo:function(){var e=m.read(arguments),i=m.read(arguments),r=m.read(arguments),n=t(this);n.setHandleOut(e.subtract(n._point)),this._add([new L(r,i.subtract(r))])},quadraticCurveTo:function(){var e=m.read(arguments),i=m.read(arguments),r=t(this)._point;this.cubicCurveTo(e.add(r.subtract(e).multiply(1/3)),e.add(i.subtract(e).multiply(1/3)),i)},curveTo:function(){var e=m.read(arguments),i=m.read(arguments),r=c.pick(c.read(arguments),.5),n=1-r,s=t(this)._point,a=e.subtract(s.multiply(n*n)).subtract(i.multiply(r*r)).divide(2*r*n);if(a.isNaN())throw new Error("Cannot put a curve through points with parameter = "+r);this.quadraticCurveTo(a,i)},arcTo:function(){var e,i,r,n,s=Math.abs,a=Math.sqrt,o=t(this),h=o._point,u=m.read(arguments),l=c.peek(arguments);if("boolean"==typeof(_=c.pick(l,!0)))var d=(b=h.add(u).divide(2)).add(b.subtract(h).rotate(_?-90:90));else if(c.remain(arguments)<=2)d=u,u=m.read(arguments);else{var f=x.read(arguments),p=v.isZero;if(p(f.width)||p(f.height))return this.lineTo(u);var g=c.read(arguments),_=!!c.read(arguments),y=!!c.read(arguments),b=h.add(u).divide(2),w=(W=h.subtract(b).rotate(-g)).x,T=W.y,C=s(f.width),P=s(f.height),O=C*C,M=P*P,A=w*w,I=T*T,k=a(A/O+I/M);if(k>1&&(O=(C*=k)*C,M=(P*=k)*P),s(k=(O*M-O*I-M*A)/(O*I+M*A))<1e-12&&(k=0),k<0)throw new Error("Cannot create an arc with the given arguments");e=new m(C*T/P,-P*w/C).multiply((y===_?-1:1)*a(k)).rotate(g).add(b),i=(r=(n=(new S).translate(e).rotate(g).scale(C,P))._inverseTransform(h)).getDirectedAngle(n._inverseTransform(u)),!_&&i>0?i-=360:_&&i<0&&(i+=360)}if(d){var R=new E(h.add(d).divide(2),d.subtract(h).rotate(90),!0),D=new E(d.add(u).divide(2),u.subtract(d).rotate(90),!0),N=new E(h,u),F=N.getSide(d);if(!(e=R.intersect(D,!0))){if(!F)return this.lineTo(u);throw new Error("Cannot create an arc with the given arguments")}i=(r=h.subtract(e)).getDirectedAngle(u.subtract(e));var B=N.getSide(e);0===B?i=F*s(i):F===B&&(i+=i<0?360:-360)}for(var j=s(i),U=j>=360?4:Math.ceil((j-1e-7)/90),z=i/U,V=z*Math.PI/360,X=4/3*Math.sin(V)/(1+Math.cos(V)),H=[],G=0;G<=U;G++){var W=u,q=null;if(G<U&&(q=r.rotate(90).multiply(X),n?(W=n._transformPoint(r),q=n._transformPoint(r.add(q)).subtract(W)):W=e.add(r)),G){var Y=r.rotate(-90).multiply(X);n&&(Y=n._transformPoint(r.add(Y)).subtract(W)),H.push(new L(W,Y,q))}else o.setHandleOut(q);r=r.rotate(z)}this._add(H)},lineBy:function(){var e=m.read(arguments),i=t(this)._point;this.lineTo(i.add(e))},curveBy:function(){var e=m.read(arguments),i=m.read(arguments),r=c.read(arguments),n=t(this)._point;this.curveTo(n.add(e),n.add(i),r)},cubicCurveBy:function(){var e=m.read(arguments),i=m.read(arguments),r=m.read(arguments),n=t(this)._point;this.cubicCurveTo(n.add(e),n.add(i),n.add(r))},quadraticCurveBy:function(){var e=m.read(arguments),i=m.read(arguments),r=t(this)._point;this.quadraticCurveTo(r.add(e),r.add(i))},arcBy:function(){var e=t(this)._point,i=e.add(m.read(arguments)),r=c.pick(c.peek(arguments),!0);"boolean"==typeof r?this.arcTo(i,r):this.arcTo(i,e.add(m.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){var i=e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds";return U[i](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,i,r,n,s){var a=t[0];if(!a)return new w;var o=new Array(6),h=a._transformCoordinates(r,new Array(6)),u=h.slice(0,2),l=u.slice(),c=new Array(2);function d(t){t._transformCoordinates(r,o);for(var e=0;e<2;e++)F._addBounds(h[e],h[e+4],o[e+2],o[e],e,s?s[e]:0,u,l,c);var i=h;h=o,o=i}for(var f=1,p=t.length;f<p;f++)d(t[f]);return e&&d(a),new w(u[0],u[1],l[0]-u[0],l[1]-u[1])},getStrokeBounds:function(t,e,i,r,n){var s=i.getStyle(),a=s.hasStroke(),o=s.getStrokeWidth(),h=a&&i._getStrokeMatrix(r,n),u=a&&U._getStrokePadding(o,h),l=U.getBounds(t,e,i,r,n,u);if(!a)return l;var c=o/2,d=s.getStrokeJoin(),f=s.getStrokeCap(),p=s.getMiterLimit(),g=new w(new x(u));function v(t){l=l.include(t)}function _(t){l=l.unite(g.setCenter(t._point.transform(r)))}function m(t,e){"round"===e||t.isSmooth()?_(t):U._addBevelJoin(t,e,c,p,r,h,v)}function y(t,e){"round"===e?_(t):U._addSquareCap(t,e,c,r,h,v)}for(var b=t.length-(e?0:1),T=1;T<b;T++)m(t[T],d);return e?m(t[0],d):b>0&&(y(t[0],f),y(t[t.length-1],f)),l},_getStrokePadding:function(t,e){if(!e)return[t,t];var i=new m(t,0).transform(e),r=new m(0,t).transform(e),n=i.getAngleInRadians(),s=i.getLength(),a=r.getLength(),o=Math.sin(n),h=Math.cos(n),u=Math.tan(n),l=Math.atan2(a*u,s),c=Math.atan2(a,u*s);return[Math.abs(s*Math.cos(l)*h+a*Math.sin(l)*o),Math.abs(a*Math.sin(c)*h+s*Math.cos(c)*o)]},_addBevelJoin:function(t,e,i,r,n,s,a,o){var h=t.getCurve(),u=h.getPrevious(),l=h.getPoint1().transform(n),c=u.getNormalAtTime(1).multiply(i).transform(s),d=h.getNormalAtTime(0).multiply(i).transform(s);if(c.getDirectedAngle(d)<0&&(c=c.negate(),d=d.negate()),o&&a(l),a(l.add(c)),"miter"===e){var f=new E(l.add(c),new m(-c.y,c.x),!0).intersect(new E(l.add(d),new m(-d.y,d.x),!0),!0);f&&l.getDistance(f)<=r*i&&a(f)}a(l.add(d))},_addSquareCap:function(t,e,i,r,n,s,a){var o=t._point.transform(r),h=t.getLocation(),u=h.getNormal().multiply(0===h.getTime()?i:-i).transform(n);"square"===e&&(a&&(s(o.subtract(u)),s(o.add(u))),o=o.add(u.rotate(-90))),s(o.add(u)),s(o.subtract(u))},getHandleBounds:function(t,e,i,r,n){var s,a,o=i.getStyle();if(n.stroke&&o.hasStroke()){var h=i._getStrokeMatrix(r,n),u=o.getStrokeWidth()/2,l=u;"miter"===o.getStrokeJoin()&&(l=u*o.getMiterLimit()),"square"===o.getStrokeCap()&&(l=Math.max(l,u*Math.SQRT2)),s=U._getStrokePadding(u,h),a=U._getStrokePadding(l,h)}for(var c=new Array(6),d=1/0,f=-d,p=d,g=f,v=0,_=t.length;v<_;v++){t[v]._transformCoordinates(r,c);for(var m=0;m<6;m+=2){var y=m?s:a,x=y?y[0]:0,b=y?y[1]:0,T=c[m],S=c[m+1],E=T-x,C=T+x,P=S-b,O=S+b;E<d&&(d=E),C>f&&(f=C),P<p&&(p=P),O>g&&(g=O)}}return new w(d,p,f-d,g-p)}}});U.inject({statics:new function(){var t=.5522847498307936,e=[new L([-1,0],[0,t],[0,-t]),new L([0,-1],[-t,0],[t,0]),new L([1,0],[0,-t],[0,t]),new L([0,1],[t,0],[-t,0])];function i(t,e,i){var r=c.getNamed(i),n=new U(r&&0==r.insert&&P.NO_INSERT);return n._add(t),n._closed=e,n.set(r,{insert:!0})}function r(t,r,n){for(var s=new Array(4),a=0;a<4;a++){var o=e[a];s[a]=new L(o._point.multiply(r).add(t),o._handleIn.multiply(r),o._handleOut.multiply(r))}return i(s,!0,n)}return{Line:function(){return i([new L(m.readNamed(arguments,"from")),new L(m.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=m.readNamed(arguments,"center"),e=c.readNamed(arguments,"radius");return r(t,new x(e),arguments)},Rectangle:function(){var e,r=w.readNamed(arguments,"rectangle"),n=x.readNamed(arguments,"radius",0,{readNull:!0}),s=r.getBottomLeft(!0),a=r.getTopLeft(!0),o=r.getTopRight(!0),h=r.getBottomRight(!0);if(!n||n.isZero())e=[new L(s),new L(a),new L(o),new L(h)];else{var u=(n=x.min(n,r.getSize(!0).divide(2))).width,l=n.height,c=u*t,d=l*t;e=[new L(s.add(u,0),null,[-c,0]),new L(s.subtract(0,l),[0,d]),new L(a.add(0,l),null,[0,-d]),new L(a.add(u,0),[-c,0],null),new L(o.subtract(u,0),null,[c,0]),new L(o.add(0,l),[0,-d],null),new L(h.subtract(0,l),null,[0,d]),new L(h.subtract(u,0),[c,0])]}return i(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=A._readEllipse(arguments);return r(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=m.readNamed(arguments,"from"),e=m.readNamed(arguments,"through"),i=m.readNamed(arguments,"to"),r=c.getNamed(arguments),n=new U(r&&0==r.insert&&P.NO_INSERT);return n.moveTo(t),n.arcTo(e,i),n.set(r)},RegularPolygon:function(){for(var t=m.readNamed(arguments,"center"),e=c.readNamed(arguments,"sides"),r=c.readNamed(arguments,"radius"),n=360/e,s=e%3==0,a=new m(0,s?-r:r),o=s?-1:.5,h=new Array(e),u=0;u<e;u++)h[u]=new L(t.add(a.rotate((u+o)*n)));return i(h,!0,arguments)},Star:function(){for(var t=m.readNamed(arguments,"center"),e=2*c.readNamed(arguments,"points"),r=c.readNamed(arguments,"radius1"),n=c.readNamed(arguments,"radius2"),s=360/e,a=new m(0,-1),o=new Array(e),h=0;h<e;h++)o[h]=new L(t.add(a.rotate(s*h).multiply(h%2?n:r)));return i(o,!0,arguments)}}}});var z=j.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,i){var r=i,n=r[0];n&&"number"==typeof n[0]&&(r=[r]);for(var s=i.length-1;s>=0;s--){var a=r[s];r!==i||a instanceof U||(r=c.slice(r)),Array.isArray(a)?r[s]=new U({segments:a,insert:!1}):a instanceof z&&(r.splice.apply(r,[s,1].concat(a.removeChildren())),a.remove())}return t.base.call(this,e,r)},reduce:function t(e){for(var i=this._children,r=i.length-1;r>=0;r--){var n;(n=i[r].reduce(e)).isEmpty()&&n.remove()}return i.length?t.base.call(this):((n=new U(P.NO_INSERT)).copyAttributes(this),n.insertAbove(this),this.remove(),n)},isClosed:function(){for(var t=this._children,e=0,i=t.length;e<i;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,i=0,r=e.length;i<r;i++)e[i].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],i=0,r=t.length;i<r;i++)e.push.apply(e,t[i].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getArea();return e},getLength:function(){for(var t=this._children,e=0,i=0,r=t.length;i<r;i++)e+=t[i].getLength();return e},getPathData:function(t,e){for(var i=this._children,r=[],n=0,s=i.length;n<s;n++){var a=i[n],o=a._matrix;r.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return r.join("")},_hitTestChildren:function t(e,i,r){return t.base.call(this,e,i.class===U||"path"===i.type?i:c.set({},i,{fill:!1}),r)},_draw:function(t,e,i,r){var n=this._children;if(n.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=n.length;s<a;s++)n[s].draw(t,e,r);if(!e.clip){this._setStyles(t,e,i);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,i){for(var r=this._children,n=0,s=r.length;n<s;n++){var a=r[n],o=a._matrix;i[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var i=t._children;if(e&&!i.length)throw new Error("Use a moveTo() command first");return i[i.length-1]}return c.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var i=t(this,!0);i[e].apply(i,arguments)}},{moveTo:function(){var e=t(this),i=e&&e.isEmpty()?e:new U(P.NO_INSERT);i!==e&&this.addChild(i),i.moveTo.apply(i,arguments)},moveBy:function(){var e=t(this,!0),i=e&&e.getLastSegment(),r=m.read(arguments);this.moveTo(i?r.add(i._point):r)},closePath:function(e){t(this,!0).closePath(e)}})},c.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var i,r=this._children,n=0,s=r.length;n<s;n++)i=r[n][t](e)||i;return i}},{}));j.inject(new function(){var t=Math.min,e=Math.max,i=Math.abs,r={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function n(t,e){var i=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?i.resolveCrossings().reorient("nonzero"===i.getFillRule(),!0):i}function s(t,e,i,r,n){var s=new z(P.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),n&&0==n.insert||s.insertAbove(r&&i.isSibling(r)&&i.getIndex()<r.getIndex()?r:i),s.copyAttributes(i,!0),s}function a(t,e,i,a){if(a&&(0==a.trace||a.stroke)&&/^(subtract|intersect)$/.test(i))return o(t,e,i);var h=n(t,!0),u=e&&t!==e&&n(e,!0),l=r[i];l[i]=!0,u&&(l.subtract||l.exclude)^u.isClockwise()^h.isClockwise()&&u.reverse();var c,p=f(B.expand(h.getCrossings(u))),v=h._children||[h],m=u&&(u._children||[u]),y=[],x=[];function b(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];y.push.apply(y,r._segments),x.push.apply(x,r.getCurves()),r._overlapsOnly=!0}}if(p.length){b(v),m&&b(m);for(var w=0,T=p.length;w<T;w++)g(p[w]._segment,h,u,x,l);for(w=0,T=y.length;w<T;w++){var S=y[w],E=S._intersection;S._winding||g(S,h,u,x,l),E&&E._overlap||(S._path._overlapsOnly=!1)}c=_(y,l)}else c=d(m?v.concat(m):v.slice(),function(t){return!!l[t]});return s(c,!0,t,e,a)}function o(t,e,i){var r=n(t),a=n(e),o=r.getCrossings(a),h="subtract"===i,u="divide"===i,l={},c=[];function d(t){if(!l[t._id]&&(u||a.contains(t.getPointAt(t.getLength()/2))^h))return c.unshift(t),l[t._id]=!0}for(var f=o.length-1;f>=0;f--){var p=o[f].split();p&&(d(p)&&p.getFirstSegment().setHandleIn(0,0),r.getLastSegment().setHandleOut(0,0))}return d(r),s(c,!1,t,e)}function u(t,e){for(var i=t;i;){if(i===e)return;i=i._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function l(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function d(t,e,r){var n=t&&t.length;if(n){var s=c.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return i(e.getArea())-i(t.getArea())}),o=a[0];null==r&&(r=o.isClockwise());for(var h=0;h<n;h++){for(var u=a[h],l=s[u._id],d=u.getInteriorPoint(),f=0,p=h-1;p>=0;p--){var g=a[p];if(g.contains(d)){var v=s[g._id];f=v.winding,l.winding+=f,l.container=v.exclude?v.container:g;break}}if(e(l.winding)===e(f))l.exclude=!0,t[l.index]=null;else{var _=l.container;u.setClockwise(_?!_.isClockwise():r)}}}return t}function f(t,e,i){var r,n,s,a=e&&[],o=!1,h=i||[],c=i&&{};function d(t){return t._path._id+"."+t._segment1._index}for(var f=(i&&i.length)-1;f>=0;f--){(p=i[f])._path&&(c[d(p)]=!0)}for(f=t.length-1;f>=0;f--){var p,g,v=t[f],_=v._time,m=_,y=e&&!e(v);if((p=v._curve)&&(p!==n?(o=!p.hasHandles()||c&&c[d(p)],r=[],s=null,n=p):s>=1e-8&&(_/=s)),y)r&&r.push(v);else{if(e&&a.unshift(v),s=m,_<1e-8)g=p._segment1;else if(_>1-1e-8)g=p._segment2;else{var x=p.divideAtTime(_,!0);o&&h.push(p,x),g=x._segment1;for(var b=r.length-1;b>=0;b--){var w=r[b];w._time=(w._time-_)/(1-_)}}v._setSegment(g);var T=g._intersection,S=v._intersection;if(T){u(T,S);for(var E=T;E;)u(E._intersection,T),E=E._next}else g._intersection=S}}return i||l(h),a||t}function p(r,n,s,a,o){var h,u,l=s?1:0,c=1^l,d=[r.x,r.y],f=d[l],g=d[c],v=1e-6,_=f-1e-9,m=f+1e-9,y=0,x=0,b=0,w=0,T=!1,S=!1,E=1,C=[];function P(i){var u=i[c+0],d=i[c+6];if(!(g<t(u,d)||g>e(u,d))){var y=i[l+0],x=i[l+2],S=i[l+4],P=i[l+6];if(u!==d){var O=g===u?0:g===d?1:_>e(y,x,S,P)||m<t(y,x,S,P)?1:F.solveCubic(i,c,g,C,0,1)>0?C[0]:1,M=0===O?y:1===O?P:F.getPoint(i,O)[s?"y":"x"],A=u>d?1:-1,I=h[c]>h[c+6]?1:-1,k=h[l+6];return g!==u?(M<_?b+=A:M>m?w+=A:T=!0,M>f-v&&M<f+v&&(E/=2)):(A!==I?y<_?b+=A:y>m&&(w+=A):y!=k&&(k<m&&M>m?(w+=A,T=!0):k>_&&M<_&&(b+=A,T=!0)),E=0),h=i,!o&&M>_&&M<m&&0===F.getTangent(i,O)[s?"x":"y"]&&p(r,n,!s,a,!0)}(y<m&&P>_||P<m&&y>_)&&(T=!0)}}function O(i){var r=i[c+0],n=i[c+2],a=i[c+4],o=i[c+6];if(g<=e(r,n,a,o)&&g>=t(r,n,a,o))for(var h,u=i[l+0],d=i[l+2],f=i[l+4],p=i[l+6],v=_>e(u,d,f,p)||m<t(u,d,f,p)?[i]:F.getMonoCurves(i,s),y=0,x=v.length;y<x;y++)if(h=P(v[y]))return h}for(var M=0,A=n.length;M<A;M++){var I,k=n[M],R=k._path,D=k.getValues();if(!(M&&n[M-1]._path===R||(h=null,R._closed||(u=F.getValues(R.getLastCurve().getSegment2(),k.getSegment1(),null,!a))[c]!==u[c+6]&&(h=u),h))){h=D;for(var L=R.getLastCurve();L&&L!==k;){var N=L.getValues();if(N[c]!==N[c+6]){h=N;break}L=L.getPrevious()}}if(I=O(D))return I;if(M+1===A||n[M+1]._path!==R){if(u&&(I=O(u)))return I;!T||b||w||(b=w=R.isClockwise(a)^s?1:-1),y+=b,x+=w,b=w=0,T&&(S=!0,T=!1),u=null}}return y=i(y),x=i(x),{winding:e(y,x),windingL:y,windingR:x,quality:E,onPath:S}}function g(t,e,r,n,s){var a=[],o=t,h=0;do{var u=(y=t.getCurve()).getLength();a.push({segment:t,curve:y,length:u}),h+=u,t=t.getNext()}while(t&&!t._intersection&&t!==o);for(var l=[.5,.25,.75],c={winding:0,quality:-1},d=0;d<l.length&&c.quality<.5;d++){u=h*l[d];for(var f=0,g=a.length;f<g;f++){var _=a[f],m=_.length;if(u<=m){var y,x=(y=_.curve)._path,b=x._parent,w=b instanceof z?b:x,T=v.clamp(y.getTimeAt(u),1e-8,1-1e-8),S=y.getPointAtTime(T),E=i(y.getTangentAtTime(T).y)<Math.SQRT1_2,C=s.subtract&&r&&(w===e&&r._getWinding(S,E,!0).winding||w===r&&!e._getWinding(S,E,!0).winding)?{winding:0,quality:1}:p(S,n,E,!0);C.quality>c.quality&&(c=C);break}u-=m}}for(f=a.length-1;f>=0;f--)a[f].segment._winding=c}function _(t,e){var i,r=[];function n(t){var i;return!(!t||t._visited||e&&(!e[(i=t._winding||{}).winding]||e.unite&&2===i.winding&&i.windingL&&i.windingR))}function s(t){if(t)for(var e=0,r=i.length;e<r;e++)if(t===i[e])return!0;return!1}function a(t){for(var e=t._segments,i=0,r=e.length;i<r;i++)e[i]._visited=!0}function o(t,e){var r=t._intersection,a=r,o=[];function h(r,a){for(;r&&r!==a;){var h=r._segment,u=h&&h._path;if(u){var l=h.getNext()||u.getFirstSegment(),c=l._intersection;h!==t&&(s(h)||s(l)||l&&n(h)&&(n(l)||c&&n(c._segment)))&&o.push(h),e&&i.push(h)}r=r._next}}if(e&&(i=[t]),r){for(h(r);r&&r._prev;)r=r._prev;h(r,a)}return o}t.sort(function(t,e){var i=t._intersection,r=e._intersection,n=!(!i||!i._overlap),s=!(!r||!r._overlap),a=t._path,o=e._path;return n^s?n?1:-1:!i^!r?i?1:-1:a!==o?a._id-o._id:t._index-e._index});for(var h=0,u=t.length;h<u;h++){var l,c,d,f=t[h],p=n(f),g=null,v=!1,_=!0,m=[];if(p&&f._path._overlapsOnly){var y=f._path,x=f._intersection._segment._path;y.compare(x)&&(y.getArea()&&r.push(y.clone(!1)),a(y),a(x),p=!1)}for(;p;){var b=!g,w=o(f,b),T=w.shift(),S=!(v=!b&&(s(f)||s(T)))&&T;if(b&&(g=new U(P.NO_INSERT),l=null),v){(f.isFirst()||f.isLast())&&(_=f._path._closed),f._visited=!0;break}if(S&&l&&(m.push(l),l=null),l||(S&&w.push(f),l={start:g._segments.length,crossings:w,visited:c=[],handleIn:d}),S&&(f=T),!n(f)){g.removeSegments(l.start);for(var E=0,C=c.length;E<C;E++)c[E]._visited=!1;c.length=0;do{(f=l&&l.crossings.shift())&&f._path||(f=null,(l=m.pop())&&(c=l.visited,d=l.handleIn))}while(l&&!n(f));if(!f)break}var O=f.getNext();g.add(new L(f._point,d,O&&f._handleOut)),f._visited=!0,c.push(f),f=O||f._path.getFirstSegment(),d=O&&O._handleIn}v&&(_&&(g.getFirstSegment().setHandleIn(d),g.setClosed(_)),0!==g.getArea()&&r.push(g))}return r}return{_getWinding:function(t,e,i){return p(t,this.getCurves(),e,i)},unite:function(t,e){return a(this,t,"unite",e)},intersect:function(t,e){return a(this,t,"intersect",e)},subtract:function(t,e){return a(this,t,"subtract",e)},exclude:function(t,e){return a(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?o(this,t,"divide"):s([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){var t=this._children,e=t||[this];function i(t,e){var i=t&&t._intersection;return i&&i._overlap&&i._path===e}var r=!1,n=!1,s=this.getIntersections(null,function(t){return t.hasOverlap()&&(r=!0)||t.isCrossing()&&(n=!0)}),a=r&&n&&[];if(s=B.expand(s),r)for(var o=f(s,function(t){return t.hasOverlap()},a),h=o.length-1;h>=0;h--){var u=o[h],d=u._path,p=u._segment,g=p.getPrevious(),v=p.getNext();i(g,d)&&i(v,d)&&(p.remove(),g._handleOut._set(0,0),v._handleIn._set(0,0),g===p||g.getCurve().hasLength()||(v._handleIn.set(g._handleIn),g.remove()))}n&&(f(s,r&&function(t){var e=t.getCurve(),i=t.getSegment(),r=t._intersection,n=r._curve,s=r._segment;if(e&&n&&e._path&&n._path)return!0;i&&(i._intersection=null),s&&(s._intersection=null)},a),a&&l(a),e=_(c.each(e,function(t){this.push.apply(this,t._segments)},[])));var m,y=e.length;return y>1&&t?(e!==t&&this.setChildren(e),m=this):1!==y||t||(e[0]!==this&&this.setSegments(e[0].removeSegments()),m=this),m||((m=new z(P.NO_INSERT)).addChildren(e),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,e){var i=this._children;return i&&i.length?this.setChildren(d(this.removeChildren(),function(e){return!!(t?e:1&e)},e)):e!==h&&this.setClockwise(e),this},getInteriorPoint:function(){var i=this.getBounds().getCenter(!0);if(!this.contains(i)){for(var r=this.getCurves(),n=i.y,s=[],a=[],o=0,h=r.length;o<h;o++){var u=r[o].getValues(),l=u[1],c=u[3],d=u[5],f=u[7];if(n>=t(l,c,d,f)&&n<=e(l,c,d,f))for(var p=F.getMonoCurves(u),g=0,v=p.length;g<v;g++){var _=p[g],m=_[1],y=_[7];if(m!==y&&(n>=m&&n<=y||n>=y&&n<=m)){var x=n===m?_[0]:n===y?_[6]:1===F.solveCubic(_,1,n,a,0,1)?F.getPoint(_,a[0]).x:(_[0]+_[6])/2;s.push(x)}}}s.length>1&&(s.sort(function(t,e){return t-e}),i.x=(s[0]+s[1])/2)}return i}}});var V=c.extend({_class:"PathFlattener",initialize:function(t,e,i,r,n){var s,a=[],o=[],h=0,u=1/(i||32),l=t._segments,c=l[0];function d(t,i){var s=F.getValues(t,i,n);a.push(s),function t(i,n,s,a){if(!(a-s>u)||r&&F.isStraight(i)||F.isFlatEnough(i,e||.25)){var l=i[6]-i[0],c=i[7]-i[1],d=Math.sqrt(l*l+c*c);d>0&&(h+=d,o.push({offset:h,curve:i,index:n,time:a}))}else{var f=F.subdivide(i,.5),p=(s+a)/2;t(f[0],n,s,p),t(f[1],n,p,a)}}(s,t._index,0,1)}for(var f=1,p=l.length;f<p;f++)d(c,s=l[f]),c=s;t._closed&&d(s,l[0]),this.curves=a,this.parts=o,this.length=h,this.index=0},_get:function(t){for(var e,i=this.parts,r=i.length,n=this.index;e=n,n&&!(i[--n].offset<t););for(;e<r;e++){var s=i[e];if(s.offset>=t){this.index=e;var a=i[e-1],o=a&&a.index===s.index?a.time:0,h=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-h)/(s.offset-h)}}}return{index:i[r-1].index,time:1}},drawPart:function(t,e,i){for(var r=this._get(e),n=this._get(i),s=r.index,a=n.index;s<=a;s++){var o=F.getPart(this.curves[s],s===r.index?r.time:0,s===n.index?n.time:1);s===r.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},c.each(F._evaluateMethods,function(t){this[t+"At"]=function(e){var i=this._get(e);return F[t](this.curves[i.index],i.time)}},{})),X=c.extend({initialize:function(t){for(var e,i=this.points=[],r=t._segments,n=t._closed,s=0,a=r.length;s<a;s++){var o=r[s].point;e&&e.equals(o)||i.push(e=o.clone())}n&&(i.unshift(i[i.length-1]),i.push(i[1])),this.closed=n},fit:function(t){var e=this.points,i=e.length,r=null;return i>0&&(r=[new L(e[0])],i>1&&(this.fitCubic(r,t,0,i-1,e[1].subtract(e[0]),e[i-2].subtract(e[i-1])),this.closed&&(r.shift(),r.pop()))),r},fitCubic:function(t,e,i,r,n,s){var a=this.points;if(r-i!=1){for(var o,h=this.chordLengthParameterize(i,r),u=Math.max(e,e*e),l=!0,c=0;c<=4;c++){var d=this.generateBezier(i,r,h,n,s),f=this.findMaxError(i,r,d,h);if(f.error<e&&l)return void this.addCurve(t,d);if(o=f.index,f.error>=u)break;l=this.reparameterize(i,r,h,d),u=f.error}var p=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,i,o,n,p),this.fitCubic(t,e,o,r,p.negate(),s)}else{var g=a[i],v=a[r],_=g.getDistance(v)/3;this.addCurve(t,[g,g.add(n.normalize(_)),v.add(s.normalize(_)),v])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new L(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,i,r,n){for(var s=Math.abs,a=this.points,o=a[t],h=a[e],u=[[0,0],[0,0]],l=[0,0],c=0,d=e-t+1;c<d;c++){var f=i[c],p=1-f,g=3*f*p,v=p*p*p,_=g*p,m=g*f,y=f*f*f,x=r.normalize(_),b=n.normalize(m),w=a[t+c].subtract(o.multiply(v+_)).subtract(h.multiply(m+y));u[0][0]+=x.dot(x),u[0][1]+=x.dot(b),u[1][0]=u[0][1],u[1][1]+=b.dot(b),l[0]+=x.dot(w),l[1]+=b.dot(w)}var T,S,E=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(s(E)>1e-12){var C=u[0][0]*l[1]-u[1][0]*l[0];T=(l[0]*u[1][1]-l[1]*u[0][1])/E,S=C/E}else{var P=u[0][0]+u[0][1],O=u[1][0]+u[1][1];T=S=s(P)>1e-12?l[0]/P:s(O)>1e-12?l[1]/O:0}var M,A,I=h.getDistance(o),k=1e-12*I;if(T<k||S<k)T=S=I/3;else{var R=h.subtract(o);M=r.normalize(T),A=n.normalize(S),M.dot(R)-A.dot(R)>I*I&&(T=S=I/3,M=A=null)}return[o,o.add(M||r.normalize(T)),h.add(A||n.normalize(S)),h]},reparameterize:function(t,e,i,r){for(var n=t;n<=e;n++)i[n-t]=this.findRoot(r,this.points[n],i[n-t]);n=1;for(var s=i.length;n<s;n++)if(i[n]<=i[n-1])return!1;return!0},findRoot:function(t,e,i){for(var r=[],n=[],s=0;s<=2;s++)r[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)n[s]=r[s+1].subtract(r[s]).multiply(2);var a=this.evaluate(3,t,i),o=this.evaluate(2,r,i),h=this.evaluate(1,n,i),u=a.subtract(e),l=o.dot(o)+u.dot(h);return v.isZero(l)?i:i-u.dot(o)/l},evaluate:function(t,e,i){for(var r=e.slice(),n=1;n<=t;n++)for(var s=0;s<=t-n;s++)r[s]=r[s].multiply(1-i).add(r[s+1].multiply(i));return r[0]},chordLengthParameterize:function(t,e){for(var i=[0],r=t+1;r<=e;r++)i[r-t]=i[r-t-1]+this.points[r].getDistance(this.points[r-1]);r=1;for(var n=e-t;r<=n;r++)i[r]/=i[n];return i},findMaxError:function(t,e,i,r){for(var n=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,i,r[a-t]).subtract(this.points[a]),h=o.x*o.x+o.y*o.y;h>=s&&(s=h,n=a)}return{error:s,index:n}}}),H=P.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var e=t&&c.isPlainObject(t)&&t.x===h&&t.y===h;this._initialize(e&&t,!e&&m.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(265)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),G=H.extend({_class:"PointText",initialize:function(){H.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new y(t.x,t.y,this,"setPoint")},setPoint:function(){var t=m.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,i){if(this._content){this._setStyles(t,e,i);var r=this._lines,n=this._style,s=n.hasFill(),a=n.hasStroke(),o=n.getLeading(),h=t.shadowColor;t.font=n.getFontStyle(),t.textAlign=n.getJustification();for(var u=0,l=r.length;u<l;u++){t.shadowColor=h;var c=r[u];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var i=this._style,r=this._lines,n=r.length,s=i.getJustification(),a=i.getLeading(),o=this.getView().getTextWidth(i.getFontStyle(),r),h=0;"left"!==s&&(h-=o/("center"===s?2:1));var u=new w(h,n?-.75*a:0,o,n*a);return t?t._transformBounds(u,u):u}}),W=c.extend(new function(){var t,e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},i={},r={};var n=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],s={"rgb-hsb":function(t,e,i){var r=Math.max(t,e,i),n=r-Math.min(t,e,i);return[0===n?0:60*(r==t?(e-i)/n+(e<i?6:0):r==e?(i-t)/n+2:(t-e)/n+4),0===r?0:n/r,r]},"hsb-rgb":function(t,e,i){var r,s=(t=(t/60%6+6)%6)-(r=Math.floor(t)),a=[i,i*(1-e),i*(1-e*s),i*(1-e*(1-s))];return[a[(r=n[r])[0]],a[r[1]],a[r[2]]]},"rgb-hsl":function(t,e,i){var r=Math.max(t,e,i),n=Math.min(t,e,i),s=r-n,a=0===s,o=(r+n)/2;return[a?0:60*(r==t?(e-i)/s+(e<i?6:0):r==e?(i-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(r+n):s/(2-r-n),o]},"hsl-rgb":function(t,e,i){if(t=(t/360%1+1)%1,0===e)return[i,i,i];for(var r=[t+1/3,t,t-1/3],n=i<.5?i*(1+e):i+e-i*e,s=2*i-n,a=[],o=0;o<3;o++){var h=r[o];h<0&&(h+=1),h>1&&(h-=1),a[o]=6*h<1?s+6*(n-s)*h:2*h<1?n:3*h<2?s+(n-s)*(2/3-h)*6:s}return a},"rgb-gray":function(t,e,i){return[.2989*t+.587*e+.114*i]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return c.each(e,function(t,r){i[r]=[],c.each(t,function(t,n){var s=c.capitalize(t),a=/^(hue|saturation)$/.test(t),o=i[r][n]="gradient"===t?function(t){var e=this._components[0];return e!==(t=q.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:"gradient"===r?function(){return m.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:t};this["get"+s]=function(){return this._type===r||a&&/^hs[bl]$/.test(this._type)?this._components[n]:this._convert(r)[n]},this["set"+s]=function(t){this._type===r||a&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(r),this._properties=e[r],this._type=r),this._components[n]=o.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function n(s){var a,o,h,l,d=arguments,f=this.__read,p=0;Array.isArray(s)&&(s=(d=s)[0]);var g=null!=s&&typeof s;if("string"===g&&s in e&&(a=s,s=d[1],Array.isArray(s)?(o=s,h=d[2]):(f&&(p=1),d=c.slice(d,1),g=typeof s)),!o){if(l="number"===g?d:"object"===g&&null!=s.length?s:null){a||(a=l.length>=3?"rgb":"gray");var v=e[a].length;h=l[v],f&&(p+=l===arguments?v+(null!=h?1:0):1),l.length>v&&(l=c.slice(l,0,v))}else if("string"===g)a="rgb",4===(o=function(e){var i,n=e.match(/^#(\w{1,2})(\w{1,2})(\w{1,2})$/);if(n){i=[0,0,0];for(var s=0;s<3;s++){var a=n[s+1];i[s]=parseInt(1==a.length?a+a:a,16)/255}}else if(n=e.match(/^rgba?\((.*)\)$/)){s=0;for(var o=(i=n[1].split(",")).length;s<o;s++)a=+i[s],i[s]=s<3?a/255:a}else if(u){var h=r[e];if(!h){t||((t=ot.getContext(1,1)).globalCompositeOperation="copy"),t.fillStyle="rgba(0,0,0,0)",t.fillStyle=e,t.fillRect(0,0,1,1);var l=t.getImageData(0,0,1,1).data;h=r[e]=[l[0]/255,l[1]/255,l[2]/255]}i=h.slice()}else i=[0,0,0];return i}(s)).length&&(h=o[3],o.length--);else if("object"===g)if(s.constructor===n){if(a=s._type,o=s._components.slice(),h=s._alpha,"gradient"===a)for(var _=1,m=o.length;_<m;_++){var y=o[_];y&&(o[_]=y.clone())}}else if(s.constructor===q)a="gradient",l=d;else{var x=e[a="hue"in s?"lightness"in s?"hsl":"hsb":"gradient"in s||"stops"in s||"radial"in s?"gradient":"gray"in s?"gray":"rgb"],b=i[a];this._components=o=[];for(_=0,m=x.length;_<m;_++){null==(w=s[x[_]])&&!_&&"gradient"===a&&"stops"in s&&(w={stops:s.stops,radial:s.radial}),null!=(w=b[_].call(this,w))&&(o[_]=w)}h=s.alpha}f&&a&&(p=1)}if(this._type=a||"rgb",!o){this._components=o=[];for(_=0,m=(b=i[this._type]).length;_<m;_++){var w;null!=(w=b[_].call(this,l&&l[_]))&&(o[_]=w)}}return this._components=o,this._properties=e[this._type],this._alpha=h,f&&(this.__read=p),this},set:"#initialize",_serialize:function(t,e){var i=this.getComponents();return c.serialize(/^(gray|rgb)$/.test(this._type)?i:[this._type].concat(i),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(65)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=s[this._type+"-"+t])?e.apply(this,this._components):s["rgb-"+t].apply(this,s[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new W(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=e[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=c.isPlainValue(t,!0)?W.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&c.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],i="gradient"===this._type,r=g.instance,n=0,s=t.length;n<s;n++){var a=this._components[n];null!=a&&e.push(t[n]+": "+(i?a:r.number(a)))}return null!=this._alpha&&e.push("alpha: "+r.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){var e=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;function r(t){return Math.round(255*(t<0?0:t>1?1:t))}return e=[r(e[0]),r(e[1]),r(e[2])],i<1&&e.push(i<0?0:i),t?"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1):(4==e.length?"rgba(":"rgb(")+e.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var i,r=this._components,n=r[0],s=n._stops,a=r[1],o=r[2],h=r[3],u=e&&e.inverted();if(u&&(a=u._transformPoint(a),o=u._transformPoint(o),h&&(h=u._transformPoint(h))),n._radial){var l=o.getDistance(a);if(h){var c=h.subtract(a);c.getLength()>l&&(h=a.add(c.normalize(l-.1)))}var d=h||a;i=t.createRadialGradient(d.x,d.y,0,a.x,a.y,l)}else i=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var f=0,p=s.length;f<p;f++){var g=s[f],v=g._offset;i.addColorStop(null==v?f/(p-1):v,g._color.toCanvasStyle())}return this._canvasStyle=i},transform:function(t){if("gradient"===this._type){for(var e=this._components,i=1,r=e.length;i<r;i++){var n=e[i];t._transformPoint(n,n,!0)}this._changed()}},statics:{_types:e,random:function(){var t=Math.random;return new W(t(),t(),t())}}})},new function(){return c.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(e){e=W.read(arguments);for(var i=this._type,r=this._components,n=e._convert(i),s=0,a=r.length;s<a;s++)n[s]=t(r[s],n[s]);return new W(i,n,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),q=c.extend({_class:"Gradient",initialize:function(t,e){this._id=_.get(),t&&c.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return c.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var e=this._owners?this._owners.indexOf(t):-1;-1!=e&&(this._owners.splice(e,1),this._owners.length||(this._owners=h))},clone:function(){for(var t=[],e=0,i=this._stops.length;e<i;e++)t[e]=this._stops[e].clone();return new q(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var e=this._stops;if(e)for(var i=0,r=e.length;i<r;i++)e[i]._owner=h;for(i=0,r=(e=this._stops=Y.readList(t,0,{clone:!0})).length;i<r;i++)e[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,i=t._stops,r=e.length;if(r===i.length){for(var n=0;n<r;n++)if(!e[n].equals(i[n]))return!1;return!0}}return!1}}),Y=c.extend({_class:"GradientStop",initialize:function(t,e){var i=t,r=e;"object"==typeof t&&e===h&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new Y(this._color.clone(),this._offset)},_serialize:function(t,e){var i=this._color,r=this._offset;return c.serialize(null==r?[i]:[i,r],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(65)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=W.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),Z=c.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new m,selectedColor:null},e=c.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=c.set({},e,{fillColor:new W}),r={strokeWidth:97,strokeCap:97,strokeJoin:97,strokeScaling:105,miterLimit:97,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},n={beans:!0},s={_class:"Style",beans:!0,initialize:function(r,n,s){this._values={},this._owner=n,this._project=n&&n._project||s||a.project,this._defaults=!n||n instanceof O?e:n instanceof H?i:t,r&&this.set(r)}};return c.each(e,function(t,e){var i=/Color$/.test(e),a="shadowOffset"===e,o=c.capitalize(e),u=r[e],l="set"+o,d="get"+o;s[l]=function(t){var r=this._owner,n=r&&r._children;if(n&&n.length>0&&!(r instanceof z))for(var s=0,a=n.length;s<a;s++)n[s]._style[l](t);else if(e in this._defaults){var o=this._values[e];o!==t&&(i&&(o&&o._owner!==h&&(o._owner=h),t&&t.constructor===W&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[e]=t,r&&r._changed(u||65))}},s[d]=function(t){var r,n=this._owner,s=n&&n._children;if(e in this._defaults&&(!s||!s.length||t||n instanceof z))if((r=this._values[e])===h)(r=this._defaults[e])&&r.clone&&(r=r.clone());else{var o=i?W:a?m:null;!o||r&&r.constructor===o||(this._values[e]=r=o.read([r],0,{readNull:!0,clone:!0}),r&&i&&(r._owner=n))}else if(s)for(var u=0,l=s.length;u<l;u++){var f=s[u]._style[d]();if(u){if(!c.equals(r,f))return h}else r=f}return r},n[d]=function(t){return this._style[d](t)},n[l]=function(t){this._style[l](t)}}),c.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var i="get"+e,r="set"+e;s[i]=n[i]="#get"+t,s[r]=n[r]="#set"+t}),P.inject(n),s},{set:function(t){var e=t instanceof Z,i=e?t._values:t;if(i)for(var r in i)if(r in this._defaults){var n=i[r];this[r]=n&&e&&n.clone?n.clone():n}},equals:function(t){function e(t,e,i){var r=t._values,n=e._values,s=e._defaults;for(var a in r){var o=r[a],u=n[a];if(!(i&&a in n||c.equals(o,u===h?s[a]:u)))return!1}return!0}return t===this||t&&this._class===t._class&&e(this,t)&&e(t,this,!0)||!1},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),i=this.getFontSize();return/pt|em|%|px/.test(i)&&(i=this.getView().getPixelSize(i)),null!=e?e:1.2*i}}),K=new function(){function t(t,e,i,r){for(var n=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=n[a],h=o?o+s:e;if(h in t){if(!i)return t[h];t[h]=r;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,i=e&&e.defaultView;return i&&i.getComputedStyle(t,"")},getBounds:function(t,e){var i,r=t.ownerDocument,n=r.body,s=r.documentElement;try{i=t.getBoundingClientRect()}catch(t){i={left:0,top:0,width:0,height:0}}var a=i.left-(s.clientLeft||n.clientLeft||0),o=i.top-(s.clientTop||n.clientTop||0);if(!e){var h=r.defaultView;a+=h.pageXOffset||s.scrollLeft||n.scrollLeft,o+=h.pageYOffset||s.scrollTop||n.scrollTop}return new w(a,o,i.width,i.height)},getViewportBounds:function(t){var e=t.ownerDocument,i=e.defaultView,r=e.documentElement;return new w(0,0,i.innerWidth||r.clientWidth,i.innerHeight||r.clientHeight)},getOffset:function(t,e){return K.getBounds(t,e).getPoint()},getSize:function(t){return K.getBounds(t,!0).getSize()},isInvisible:function(t){return K.getSize(t).equals(new x(0,0))},isInView:function(t){return!K.isInvisible(t)&&K.getViewportBounds(t).intersects(K.getBounds(t,!0))},isInserted:function(t){return l.body.contains(t)},getPrefixed:function(e,i){return e&&t(e,i)},setPrefixed:function(e,i,r){if("object"==typeof i)for(var n in i)t(e,n,!0,i[n]);else t(e,i,!0,r)}}},J={add:function(t,e){if(t)for(var i in e)for(var r=e[i],n=i.split(/[\s,]+/g),s=0,a=n.length;s<a;s++)t.addEventListener(n[s],r,!1)},remove:function(t,e){if(t)for(var i in e)for(var r=e[i],n=i.split(/[\s,]+/g),s=0,a=n.length;s<a;s++)t.removeEventListener(n[s],r,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new m(e.pageX||e.clientX+l.documentElement.scrollLeft,e.pageY||e.clientY+l.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return J.getPoint(t).subtract(K.getOffset(e||J.getTarget(t)))}};J.requestAnimationFrame=new function(){var t,e=K.getPrefixed(u,"requestAnimationFrame"),i=!1,r=[];function n(){var t=r;r=[];for(var s=0,a=t.length;s<a;s++)t[s]();(i=e&&r.length)&&e(n)}return function(s){r.push(s),e?i||(e(n),i=!0):t||(t=setInterval(n,1e3/60))}};var $=c.extend(d,{_class:"View",initialize:function t(e,i){function r(t){return i[t]||parseInt(i.getAttribute(t),10)}function n(){var t=K.getSize(i);return t.isNaN()||t.isZero()?new x(r("width"),r("height")):t}var s;if(u&&i){this._id=i.getAttribute("id"),null==this._id&&i.setAttribute("id",this._id="view-"+t._id++),J.add(i,this._viewEvents);if(K.setPrefixed(i.style,{userDrag:"none",userSelect:"none",touchCallout:"none",contentZooming:"none",tapHighlightColor:"rgba(0,0,0,0)"}),f.hasAttribute(i,"resize")){var o=this;J.add(u,this._windowEvents={resize:function(){o.setViewSize(n())}})}if(s=n(),f.hasAttribute(i,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var h=this._stats.domElement,c=h.style,d=K.getOffset(i);c.position="absolute",c.left=d.x+"px",c.top=d.y+"px",l.body.appendChild(h)}}else s=new x(i),i=null;this._project=e,this._scope=e._scope,this._element=i,this._pixelRatio||(this._pixelRatio=u&&u.devicePixelRatio||1),this._setElementSize(s.width,s.height),this._viewSize=s,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new S)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!a.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;$._focused===this&&($._focused=null),$._views.splice($._views.indexOf(this),1),delete $._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),J.remove(this._element,this._viewEvents),J.remove(u,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:c.each(P._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;J.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;K.getPrefixed(l,"hidden")&&"true"!==f.getAttribute(e,"keepalive")||!K.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){a=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new c({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var i=this._frameItems;e?(i[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete i[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var i=this._frameItems[e];i.item.emit("frame",new c(t,{time:i.time+=t.delta,count:i.count++}))}},_changed:function(){this._project._changed(2049),this._bounds=this._decomposed=h},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new b(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=x.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var i=this._element;i&&(i.width!==t&&(i.width=t),i.height!==e&&(i.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new w(new m,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return K.isInView(this._element)},isInserted:function(){return K.isInserted(this._element)},getPixelSize:function(t){var e,i=this._element;if(i){var r=i.parentNode,n=l.createElement("div");n.style.fontSize=t,r.appendChild(n),e=parseFloat(K.getStyles(n).fontSize),r.removeChild(n)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},c.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var i=(e?c:m).read(arguments),r=m.read(arguments,0,{readNull:!0});return this.transform((new S)[t](i,r||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new S;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=m.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose(),e=t&&t.scaling;return e?(e.x+e.y)/2:0},setZoom:function(t){this.transform((new S).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){var t=this._decompose();return t&&t.rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return e?new y(e.x,e.y,this,"setScaling"):h},setScaling:function(){var t=this.getScaling(),e=m.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(m.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(m.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(m.read(arguments))},getEventPoint:function(t){return this.viewToProject(J.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return l&&"string"==typeof e&&(e=l.getElementById(e)),new(u?Q:$)(t,e)}}},new function(){if(u){var t,e,i,r,n,s=!1,o=!1,h=u.navigator;h.pointerEnabled||h.msPointerEnabled?(i="pointerdown MSPointerDown",r="pointermove MSPointerMove",n="pointerup pointercancel MSPointerUp MSPointerCancel"):(i="touchstart",r="touchmove",n="touchend touchcancel","ontouchstart"in u&&h.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(i+=" mousedown",r+=" mousemove",n+=" mouseup"));var c={},d={mouseout:function(t){var e=$._focused,i=J.getRelatedTarget(t);if(e&&(!i||"HTML"===i.nodeName)){var r=J.getOffset(t,e._element),n=r.x,s=Math.abs,a=s(n),o=a-(1<<25);r.x=s(o)<a?o*(n<0?-1:1):n,O(e,t,e.viewToProject(r))}},scroll:P};c[i]=function(t){var e=$._focused=C(t);s||(s=!0,e._handleMouseEvent("mousedown",t))},d[r]=function(i){var r=$._focused;if(!o){var n=C(i);n?r!==n&&(r&&O(r,i),t||(t=r),r=$._focused=e=n):e&&e===r&&(t&&!t.isInserted()&&(t=null),r=$._focused=t,t=null,P())}r&&O(r,i)},d[i]=function(){o=!0},d[n]=function(t){var e=$._focused;e&&s&&e._handleMouseEvent("mouseup",t),o=s=!1},J.add(l,d),J.add(u,{load:P});var f,p,g,v,_,m,y,x,b=!1,w=!1,T={doubleclick:"click",mousedrag:"mousemove"},S=!1,E={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:c,_handleMouseEvent:function(t,e,i){var r=this._itemEvents,n=r.native[t],a="mousemove"===t,o=this._scope.tool,h=this;function u(t){return r.virtual[t]||h.responds(t)||o&&o.responds(t)}a&&s&&u("mousedrag")&&(t="mousedrag"),i||(i=this.getEventPoint(e));var l=this.getBounds().contains(i),c=n&&l&&h._project.hitTest(i,{tolerance:0,fill:!0,stroke:!0}),d=c&&c.item||null,T=!1,E={};if(E[t.substr(5)]=!0,n&&d!==v&&(v&&M(v,null,"mouseleave",e,i),d&&M(d,null,"mouseenter",e,i),v=d),S^l&&(M(this,null,l?"mouseenter":"mouseleave",e,i),l?this:null,T=!0),!l&&!E.drag||i.equals(p)||(A(this,d,a?t:"mousemove",e,i,p),T=!0),S=l,E.down&&l||E.up&&f){if(A(this,d,t,e,i,f),E.down){if(x=d===m&&Date.now()-y<300,g=m=d,!w&&d){for(var C=d;C&&!C.responds("mousedrag");)C=C._parent;C&&(_=d)}f=i}else E.up&&(w||d!==g||(y=Date.now(),A(this,d,x?"doubleclick":"click",e,i,f),x=!1),g=_=null);S=!1,T=!0}p=i,T&&o&&(b=o._handleMouseEvent(t,e,i,E)||b),(b&&!E.move||E.down&&u("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,i,r){var n,s=this._scope,o=s.tool;function h(o){o.responds(t)&&(a=s,o.emit(t,n=n||new et(t,e,i,r)))}this.isVisible()&&(h(this),o&&o.responds(t)&&h(o))},_countItemEvent:function(t,e){var i=this._itemEvents,r=i.native,n=i.virtual;for(var s in E)r[s]=(r[s]||0)+(E[s][t]||0)*e;n[t]=(n[t]||0)+e},statics:{updateFocus:P}}}function C(t){var e=J.getTarget(t);return e.getAttribute&&$._viewsById[e.getAttribute("id")]}function P(){var t=$._focused;if(!t||!t.isVisible())for(var i=0,r=$._views.length;i<r;i++)if((t=$._views[i]).isVisible()){$._focused=e=t;break}}function O(t,e,i){t._handleMouseEvent("mousemove",e,i)}function M(t,e,i,r,n,s,a){var o,h=!1;function u(t,i){if(t.responds(i)){if(o||(o=new rt(i,r,n,e||t,s?n.subtract(s):null)),t.emit(i,o)&&(b=!0,o.prevented&&(w=!0),o.stopped))return h=!0}else{var a=T[i];if(a)return u(t,a)}}for(;t&&t!==a&&!u(t,i);)t=t._parent;return h}function A(t,e,i,r,n,s){return t._project.removeOn(i),w=b=!1,_&&M(_,null,i,r,n,s)||e&&e!==_&&!e.isDescendant(_)&&M(e,null,i,r,n,s,_)||M(t,_||e||t,i,r,n,s)}}),Q=$.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof u.HTMLCanvasElement)){var i=x.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+c.slice(arguments,1));e=ot.getCanvas(i)}var r=this._context=e.getContext("2d");if(r.save(),this._pixelRatio=1,!/^off|false$/.test(f.getAttribute(e,"hidpi"))){var n=u.devicePixelRatio||1,s=K.getPrefixed(r,"backingStorePixelRatio")||1;this._pixelRatio=n/s}$.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,i){var r=this._pixelRatio;if(t.base.call(this,e*r,i*r),1!==r){var n=this._element,s=this._context;if(!f.hasAttribute(n,"resize")){var a=n.style;a.width=e+"px",a.height=i+"px"}s.restore(),s.save(),s.scale(r,r)}},getPixelSize:function t(e){var i,r=a.agent;if(r&&r.firefox)i=t.base.call(this,e);else{var n=this._context,s=n.font;n.font=e+" serif",i=parseFloat(n.font),n.font=s}return i},getTextWidth:function(t,e){var i=this._context,r=i.font,n=0;i.font=t;for(var s=0,a=e.length;s<a;s++)n=Math.max(n,i.measureText(e[s]).width);return i.font=r,n},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,i=this._viewSize;return e.clearRect(0,0,i.width+1,i.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),tt=c.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return it.modifiers}}),et=tt.extend({_class:"KeyEvent",initialize:function(t,e,i,r){this.type=t,this.event=e,this.key=i,this.character=r},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),it=new function(){var t,e,i={"\t":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},r={tab:"\t",space:" ",enter:"\r"},n={},s={},o=new c({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=a&&a.agent;return t&&t.mac?this.meta:this.control}}});function d(t){var e=t.key||t.keyIdentifier;return e=/^U\+/.test(e)?String.fromCharCode(parseInt(e.substr(2),16)):/^Arrow[A-Z]/.test(e)?e.substr(5):"Unidentified"===e||e===h?String.fromCharCode(t.keyCode):e,i[e]||(e.length>1?c.hyphenate(e):e.toLowerCase())}function f(e,i,r,h){var u,l=$._focused;if(n[i]=e,e?s[i]=r:delete s[i],i.length>1&&(u=c.camelize(i))in o){o[u]=e;var d=a&&a.agent;if("meta"===u&&d&&d.mac)if(e)t={};else{for(var p in t)p in s&&f(!1,p,t[p],h);t=null}}else e&&t&&(t[i]=r);l&&l._handleKeyEvent(e?"keydown":"keyup",h,i,r)}return J.add(l,{keydown:function(t){var i=d(t),n=a&&a.agent;i.length>1||n&&n.chrome&&(t.altKey||n.mac&&t.metaKey||!n.mac&&t.ctrlKey)?f(!0,i,r[i]||(i.length>1?"":i),t):e=i},keypress:function(t){if(e){var i=d(t),r=t.charCode,n=r>=32?String.fromCharCode(r):i.length>1?"":i;i!==e&&(i=n.toLowerCase()),f(!0,i,n,t),e=null}},keyup:function(t){var e=d(t);e in s&&f(!1,e,s[e],t)}}),J.add(u,{blur:function(t){for(var e in s)f(!1,e,s[e],t)}}),{modifiers:o,isDown:function(t){return!!n[t]}}},rt=tt.extend({_class:"MouseEvent",initialize:function(t,e,i,r,n){this.type=t,this.event=e,this.point=i,this.target=r,this.delta=n},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),nt=tt.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,i){this.tool=t,this.type=e,this.event=i},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,i=e._parent;/^(Group|CompoundPath)$/.test(i._class);)e=i,i=i._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),st=p.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){p.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,i,r){a=this._scope,r.drag&&!this.responds(t)&&(t="mousemove");var n=r.move||r.drag,s=this.responds(t),o=this.minDistance,h=this.maxDistance,u=!1,l=this;function c(t,e){var s=i,a=n?l._point:l._downPoint||s;if(n){if(l._moveCount&&s.equals(a))return!1;if(a&&(null!=t||null!=e)){var o=s.subtract(a),h=o.getLength();if(h<(t||0))return!1;e&&(s=a.add(o.normalize(Math.min(h,e))))}l._moveCount++}return l._point=s,l._lastPoint=a||s,r.down&&(l._moveCount=-1,l._downPoint=s,l._downCount++),!0}function d(){s&&(u=l.emit(t,new nt(l,t,e))||u)}if(r.down)c(),d();else if(r.up)c(null,h),d();else if(s)for(;c(o,h);)d();return u}}),at={request:function(t){var e=new o.XMLHttpRequest;return e.open((t.method||"get").toUpperCase(),t.url,c.pick(t.async,!0)),t.mimeType&&e.overrideMimeType(t.mimeType),e.onload=function(){var i=e.status;0===i||200===i?t.onLoad&&t.onLoad.call(e,e.responseText):e.onerror()},e.onerror=function(){var i=e.status,r='Could not load "'+t.url+'" (Status: '+i+")";if(!t.onError)throw new Error(r);t.onError(r,i)},e.send(null)}},ot={canvases:[],getCanvas:function(t,e){if(!u)return null;var i,r=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?i=this.canvases.pop():(i=l.createElement("canvas"),r=!1);var n=i.getContext("2d");if(!n)throw new Error("Canvas "+i+" is unable to provide a 2D context.");return i.width===t&&i.height===e?r&&n.clearRect(0,0,t+1,e+1):(i.width=t,i.height=e),n.save(),i},getContext:function(t,e){var i=this.getCanvas(t,e);return i?i.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},ht=new function(){var t,e,i,r,n,s,a,o,h,u,l,d=Math.min,f=Math.max,p=Math.abs;function g(t,e,i){return.2989*t+.587*e+.114*i}function v(t,e,i,r){var n=r-g(t,e,i),s=(r=g(h=t+n,u=e+n,l=i+n),d(h,u,l)),a=f(h,u,l);if(s<0){var o=r-s;h=r+(h-r)*r/o,u=r+(u-r)*r/o,l=r+(l-r)*r/o}if(a>255){var c=255-r,p=a-r;h=r+(h-r)*c/p,u=r+(u-r)*c/p,l=r+(l-r)*c/p}}function _(t,e,i){return f(t,e,i)-d(t,e,i)}function m(t,e,i,r){var n,s=[t,e,i],a=f(t,e,i),o=d(t,e,i);n=0===d(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===f(o,a)?2:1:0,s[a]>s[o]?(s[n]=(s[n]-s[o])*r/(s[a]-s[o]),s[a]=r):s[n]=s[a]=0,s[o]=0,h=s[0],u=s[1],l=s[2]}var y={multiply:function(){h=n*t/255,u=s*e/255,l=a*i/255},screen:function(){h=n+t-n*t/255,u=s+e-s*e/255,l=a+i-a*i/255},overlay:function(){h=n<128?2*n*t/255:255-2*(255-n)*(255-t)/255,u=s<128?2*s*e/255:255-2*(255-s)*(255-e)/255,l=a<128?2*a*i/255:255-2*(255-a)*(255-i)/255},"soft-light":function(){var r=t*n/255;h=r+n*(255-(255-n)*(255-t)/255-r)/255,u=(r=e*s/255)+s*(255-(255-s)*(255-e)/255-r)/255,l=(r=i*a/255)+a*(255-(255-a)*(255-i)/255-r)/255},"hard-light":function(){h=t<128?2*t*n/255:255-2*(255-t)*(255-n)/255,u=e<128?2*e*s/255:255-2*(255-e)*(255-s)/255,l=i<128?2*i*a/255:255-2*(255-i)*(255-a)/255},"color-dodge":function(){h=0===n?0:255===t?255:d(255,255*n/(255-t)),u=0===s?0:255===e?255:d(255,255*s/(255-e)),l=0===a?0:255===i?255:d(255,255*a/(255-i))},"color-burn":function(){h=255===n?255:0===t?0:f(0,255-255*(255-n)/t),u=255===s?255:0===e?0:f(0,255-255*(255-s)/e),l=255===a?255:0===i?0:f(0,255-255*(255-a)/i)},darken:function(){h=n<t?n:t,u=s<e?s:e,l=a<i?a:i},lighten:function(){h=n>t?n:t,u=s>e?s:e,l=a>i?a:i},difference:function(){(h=n-t)<0&&(h=-h),(u=s-e)<0&&(u=-u),(l=a-i)<0&&(l=-l)},exclusion:function(){h=n+t*(255-n-n)/255,u=s+e*(255-s-s)/255,l=a+i*(255-a-a)/255},hue:function(){m(t,e,i,_(n,s,a)),v(h,u,l,g(n,s,a))},saturation:function(){m(n,s,a,_(t,e,i)),v(h,u,l,g(n,s,a))},luminosity:function(){v(n,s,a,g(t,e,i))},color:function(){v(t,e,i,g(n,s,a))},add:function(){h=d(n+t,255),u=d(s+e,255),l=d(a+i,255)},subtract:function(){h=f(n-t,0),u=f(s-e,0),l=f(a-i,0)},average:function(){h=(n+t)/2,u=(s+e)/2,l=(a+i)/2},negation:function(){h=255-p(255-t-n),u=255-p(255-e-s),l=255-p(255-i-a)}},x=this.nativeModes=c.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=ot.getContext(1,1);b&&(c.each(y,function(t,e){var i="darken"===e,r=!1;b.save();try{b.fillStyle=i?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=i?"#a00":"#300",b.fillRect(0,0,1,1),r=b.getImageData(0,0,1,1).data[0]!==i?170:51)}catch(t){}b.restore(),x[e]=r}),ot.release(b)),this.process=function(c,d,f,p,g){var v=d.canvas,_="normal"===c;if(_||x[c])f.save(),f.setTransform(1,0,0,1,0,0),f.globalAlpha=p,_||(f.globalCompositeOperation=c),f.drawImage(v,g.x,g.y),f.restore();else{var m=y[c];if(!m)return;for(var b=f.getImageData(g.x,g.y,v.width,v.height),w=b.data,T=d.getImageData(0,0,v.width,v.height).data,S=0,E=w.length;S<E;S+=4){t=T[S],n=w[S],e=T[S+1],s=w[S+1],i=T[S+2],a=w[S+2],r=T[S+3],o=w[S+3],m();var C=r*p/255,P=1-C;w[S]=C*h+P*n,w[S+1]=C*u+P*s,w[S+2]=C*l+P*a,w[S+3]=r*p+P*o}f.putImageData(b,g.x,g.y)}}},ut=new function(){var t="http://www.w3.org/2000/svg",e="http://www.w3.org/2000/xmlns",i="http://www.w3.org/1999/xlink",r={href:i,xlink:e,xmlns:e+"/","xmlns:xlink":e+"/"};function n(t,e,i){for(var n in e){var s=e[n],a=r[n];"number"==typeof s&&i&&(s=i.number(s)),a?t.setAttributeNS(a,n,s):t.setAttribute(n,s)}return t}return{svg:t,xmlns:e,xlink:i,create:function(e,i,r){return n(l.createElementNS(t,e),i,r)},get:function(t,e){var i=r[e],n=i?t.getAttributeNS(i,e):t.getAttribute(e);return"null"===n?null:n},set:n}},lt=c.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof j||t instanceof A||t instanceof H)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var i=c.capitalize(e),r=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:r,fromSVG:r&&c.each(r,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+i,set:"set"+i}},{});return new function(){var t;function e(e,i,r){var n=new c,s=e.getTranslation();if(i){var a=(e=e._shiftless())._inverseTransform(s);n[r?"cx":"x"]=a.x,n[r?"cy":"y"]=a.y,s=null}if(!e.isIdentity()){var o=e.decompose();if(o){var h=[],u=o.rotation,l=o.scaling,d=o.skewing;s&&!s.isZero()&&h.push("translate("+t.point(s)+")"),u&&h.push("rotate("+t.number(u)+")"),v.isZero(l.x-1)&&v.isZero(l.y-1)||h.push("scale("+t.point(l)+")"),d.x&&h.push("skewX("+t.number(d.x)+")"),d.y&&h.push("skewY("+t.number(d.y)+")"),n.transform=h.join(" ")}else n.transform="matrix("+e.getValues().join(",")+")"}return n}function i(i,r){for(var n=e(i._matrix),s=i._children,a=ut.create("g",n,t),o=0,h=s.length;o<h;o++){var l=s[o],c=d(l,r);if(c)if(l.isClipMask()){var f=ut.create("clipPath");f.appendChild(c),u(l,f,"clip"),ut.set(a,{"clip-path":"url(#"+f.id+")"})}else a.appendChild(c)}return a}function r(i){var r=i._type,n=i._radius,s=e(i._matrix,!0,"rectangle"!==r);if("rectangle"===r){r="rect";var a=i._size,o=a.width,h=a.height;s.x-=o/2,s.y-=h/2,s.width=o,s.height=h,n.isZero()&&(n=null)}return n&&("circle"===r?s.r=n:(s.rx=n.width,s.ry=n.height)),ut.create(r,s,t)}var n,s={Group:i,Layer:i,Raster:function(i,r){var n=e(i._matrix,!0),s=i.getSize(),a=i.getImage();return n.x-=s.width/2,n.y-=s.height/2,n.width=s.width,n.height=s.height,n.href=0==r.embedImages&&a&&a.src||i.toDataURL(),ut.create("image",n,t)},Path:function(i,n){var s=n.matchShapes;if(s){var a=i.toShape(!1);if(a)return r(a)}var o,h=i._segments,u=h.length,l=e(i._matrix);if(s&&u>=2&&!i.hasHandles())if(u>2){o=i._closed?"polygon":"polyline";for(var c=[],d=0;d<u;d++)c.push(t.point(h[d]._point));l.points=c.join(" ")}else{o="line";var f=h[0]._point,p=h[1]._point;l.set({x1:f.x,y1:f.y,x2:p.x,y2:p.y})}else o="path",l.d=i.getPathData(null,n.precision);return ut.create(o,l,t)},Shape:r,CompoundPath:function(i,r){var n=e(i._matrix),s=i.getPathData(null,r.precision);return s&&(n.d=s),ut.create("path",n,t)},SymbolItem:function(i,r){var n=e(i._matrix,!0),s=i._definition,a=h(s,"symbol"),o=s._item,l=o.getBounds();return a||((a=ut.create("symbol",{viewBox:t.rectangle(l)})).appendChild(d(o,r)),u(s,a,"symbol")),n.href="#"+a.id,n.x+=l.x,n.y+=l.y,n.width=l.width,n.height=l.height,n.overflow="visible",ut.create("use",n,t)},PointText:function(i){var r=ut.create("text",e(i._matrix,!0),t);return r.textContent=i._content,r}};function a(e,i,r){var n={},s=!r&&e.getParent(),a=[];return null!=e._name&&(n.id=e._name),c.each(lt,function(i){var r=i.get,o=i.type,l=e[r]();if(i.exportFilter?i.exportFilter(e,l):!s||!c.equals(s[r](),l)){if("color"===o&&null!=l){var d=l.getAlpha();d<1&&(n[i.attribute+"-opacity"]=d)}"style"===o?a.push(i.attribute+": "+l):n[i.attribute]=null==l?"none":"color"===o?l.gradient?function(e){var i=h(e,"color");if(!i){var r,n=e.getGradient(),s=n._radial,a=e.getOrigin(),o=e.getDestination();if(s){r={cx:a.x,cy:a.y,r:a.getDistance(o)};var l=e.getHighlight();l&&(r.fx=l.x,r.fy=l.y)}else r={x1:a.x,y1:a.y,x2:o.x,y2:o.y};r.gradientUnits="userSpaceOnUse",i=ut.create((s?"radial":"linear")+"Gradient",r,t);for(var c=n._stops,d=0,f=c.length;d<f;d++){var p=c[d],g=p._color,v=g.getAlpha(),_=p._offset;r={offset:null==_?d/(f-1):_},g&&(r["stop-color"]=g.toCSS(!0)),v<1&&(r["stop-opacity"]=v),i.appendChild(ut.create("stop",r,t))}u(e,i,"color")}return"url(#"+i.id+")"}(l):l.toCSS(!0):"array"===o?l.join(","):"lookup"===o?i.toSVG[l]:l}}),a.length&&(n.style=a.join(";")),1===n.opacity&&delete n.opacity,e._visible||(n.visibility="hidden"),ut.set(i,n,t)}function h(t,e){return n||(n={ids:{},svgs:{}}),t&&n.svgs[e+"-"+(t._id||t.__id||(t.__id=_.get("svg")))]}function u(t,e,i){n||h();var r=n.ids[i]=(n.ids[i]||0)+1;e.id=i+"-"+r,n.svgs[i+"-"+(t._id||t.__id)]=e}function l(t,e){var i=t,r=null;if(n){for(var s in i="svg"===t.nodeName.toLowerCase()&&t,n.svgs)r||(i||(i=ut.create("svg")).appendChild(t),r=i.insertBefore(ut.create("defs"),i.firstChild)),r.appendChild(n.svgs[s]);n=null}return e.asString?(new o.XMLSerializer).serializeToString(i):i}function d(t,e,i){var r=s[t._class],n=r&&r(t,e);if(n){var o=e.onExport;o&&(n=o(t,n,e)||n);var h=JSON.stringify(t._data);h&&"{}"!==h&&"null"!==h&&n.setAttribute("data-paper-data",h)}return n&&a(t,n,i)}function f(e){return e||(e={}),t=new g(e.precision),e}P.inject({exportSVG:function(t){return l(d(this,t=f(t),!0),t)}}),C.inject({exportSVG:function(i){i=f(i);var r=this._children,n=this.getView(),s=c.pick(i.bounds,"view"),a=i.matrix||"view"===s&&n._matrix,o=a&&S.read([a]),h="view"===s?new w([0,0],n.getViewSize()):"content"===s?P._getBounds(r,o,{stroke:!0}).rect:w.read([s],0,{readNull:!0}),u={version:"1.1",xmlns:ut.svg,"xmlns:xlink":ut.xlink};h&&(u.width=h.width,u.height=h.height,(h.x||h.y)&&(u.viewBox=t.rectangle(h)));var p=ut.create("svg",u,t),g=p;o&&!o.isIdentity()&&(g=p.appendChild(ut.create("g",e(o),t)));for(var v=0,_=r.length;v<_;v++)g.appendChild(d(r[v],i,!0));return l(p,i)}})},new function(){var t,e={};function i(e,i,r,n,s){var a=ut.get(e,i),o=null==a?n?null:r?"":0:r?a:parseFloat(a);return/%\s*$/.test(a)?o/100*(s?1:t[/x|^width/.test(i)?"width":"height"]):o}function r(t,e,r,n,s){return e=i(t,e||"x",!1,n,s),r=i(t,r||"y",!1,n,s),!n||null!=e&&null!=r?new m(e,r):null}function n(t,e,r,n,s){return e=i(t,e||"width",!1,n,s),r=i(t,r||"height",!1,n,s),!n||null!=e&&null!=r?new x(e,r):null}function s(t,e,i){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?E(t)||t:"lookup"===e?i[t]:t}function d(t,e,i,r){var n=t.childNodes,s="clippath"===e,a="defs"===e,o=new O,h=o._project,u=h._currentStyle,l=[];if(s||a||(o=T(o,t,r),h._currentStyle=o._style.clone()),r)for(var c=t.querySelectorAll("defs"),d=0,f=c.length;d<f;d++)M(c[d],i,!1);for(d=0,f=n.length;d<f;d++){var p,g=n[d];1!==g.nodeType||/^defs$/i.test(g.nodeName)||!(p=M(g,i,!1))||p instanceof R||l.push(p)}return o.addChildren(l),s&&(o=T(o.reduce(),t,r)),h._currentStyle=u,(s||a)&&(o.remove(),o=null),o}function f(t,e){for(var i=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),r=[],n=0,s=i.length;n<s;n+=2)r.push(new m(parseFloat(i[n]),parseFloat(i[n+1])));var a=new U(r);return"polygon"===e&&a.closePath(),a}function p(t,n){var s,a=(i(t,"href",!0)||"").substring(1),o="radialgradient"===n;if(a)(s=e[a].getGradient())._radial^o&&((s=s.clone())._radial=o);else{for(var h=t.childNodes,u=[],l=0,c=h.length;l<c;l++){var d=h[l];1===d.nodeType&&u.push(T(new Y,d))}s=new q(u,o)}var f,p,g,v="userSpaceOnUse"!==i(t,"gradientUnits",!0);return o?(p=(f=r(t,"cx","cy",!1,v)).add(i(t,"r",!1,!1,v),0),g=r(t,"fx","fy",!0,v)):(f=r(t,"x1","y1",!1,v),p=r(t,"x2","y2",!1,v)),T(new W(s,f,p,g),t)._scaleToBounds=v,null}var g={"#document":function(t,e,i,r){for(var n=t.childNodes,s=0,a=n.length;s<a;s++){var o=n[s];if(1===o.nodeType)return M(o,i,r)}},g:d,svg:d,clippath:d,polygon:f,polyline:f,path:function(t){return j.create(t.getAttribute("d"))},lineargradient:p,radialgradient:p,image:function(t){var e=new I(i(t,"href",!0));return e.on("load",function(){var e=n(t);this.setSize(e);var i=this._matrix._transformPoint(r(t).add(e.divide(2)));this.translate(i)}),e},symbol:function(t,e,i,r){return new R(d(t,e,i,r),!0)},defs:d,use:function(t){var n=(i(t,"href",!0)||"").substring(1),s=e[n],a=r(t);return s?s instanceof R?s.place(a):s.clone().translate(a):null},circle:function(t){return new A.Circle(r(t,"cx","cy"),i(t,"r"))},ellipse:function(t){return new A.Ellipse({center:r(t,"cx","cy"),radius:n(t,"rx","ry")})},rect:function(t){return new A.Rectangle(new w(r(t),n(t)),n(t,"rx","ry"))},line:function(t){return new U.Line(r(t,"x1","y1"),r(t,"x2","y2"))},text:function(t){var e=new G(r(t).add(r(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}};function v(t,e,i,r){if(t.transform){for(var n=(r.getAttribute(i)||"").split(/\)\s*/g),s=new S,a=0,o=n.length;a<o;a++){var h=n[a];if(!h)break;for(var u=h.split(/\(\s*/),l=u[0],c=u[1].split(/[\s,]+/g),d=0,f=c.length;d<f;d++)c[d]=parseFloat(c[d]);switch(l){case"matrix":s.append(new S(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1],c[2]);break;case"translate":s.translate(c[0],c[1]);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function _(t,e,i){var r="fill-opacity"===i?"getFillColor":"getStrokeColor",n=t[r]&&t[r]();n&&n.setAlpha(parseFloat(e))}var y=c.set(c.each(lt,function(t){this[t.attribute]=function(e,i){if(e[t.set]&&(e[t.set](s(i,t.type,t.fromSVG)),"color"===t.type)){var r=e[t.get]();if(r&&r._scaleToBounds){var n=e.getBounds();r.transform((new S).translate(n.getPoint()).scale(n.getSize()))}}}},{}),{id:function(t,i){e[i]=t,t.setName&&t.setName(i)},"clip-path":function(t,e){var i=E(e);if(i){if((i=i.clone()).setClipMask(!0),!(t instanceof O))return new O(i,t);t.insertChild(0,i)}},gradientTransform:v,transform:v,"fill-opacity":_,"stroke-opacity":_,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var i=e.match(/(.*)%$/);t.setOffset(i?i[1]/100:parseFloat(e))}},viewBox:function(t,e,i,r,a){var o,h=new w(s(e,"array")),u=n(r,null,null,!0);if(t instanceof O){var l=u?u.divide(h.getSize()):1,c=(new S).scale(l).translate(h.getPoint().negate());o=t}else t instanceof R&&(u&&h.setSize(u),o=t._item);if(o){if("visible"!==b(r,"overflow",a)){var d=new A.Rectangle(h);d.setClipMask(!0),o.addChild(d)}c&&o.transform(c)}}});function b(t,e,i){var r=t.attributes[e],n=r&&r.value;if(!n){var s=c.camelize(e);(n=t.style[s])||i.node[s]===i.parent[s]||(n=i.node[s])}return n?"none"===n?null:n:h}function T(t,e,i){if(e.style){var r=e.parentNode,n={node:K.getStyles(e)||{},parent:!i&&!/^defs$/i.test(r.tagName)&&K.getStyles(r)||{}};c.each(y,function(i,r){var s=b(e,r,n);t=s!==h&&i(t,s,r,e,n)||t})}return t}function E(t){var i=t&&t.match(/\((?:["'#]*)([^"')]+)/),r=i&&i[1],n=r&&e[u?r.replace(u.location.href.split("#")[0]+"#",""):r];return n&&n._scaleToBounds&&((n=n.clone())._scaleToBounds=!0),n}function M(i,r,s){var o,h,u,d=i.nodeName.toLowerCase(),f="#document"!==d,p=l.body;s&&f&&(t=a.getView().getSize(),t=n(i,null,null,!0)||t,o=ut.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),h=i.parentNode,u=i.nextSibling,o.appendChild(i),p.appendChild(o));var v=a.settings,_=v.applyMatrix,m=v.insertItems;v.applyMatrix=!1,v.insertItems=!1;var y=g[d],x=y&&y(i,d,r,s)||null;if(v.insertItems=m,v.applyMatrix=_,x){!f||x instanceof O||(x=T(x,i,s));var b=r.onImport,w=f&&i.getAttribute("data-paper-data");b&&(x=b(i,x,r)||x),r.expandShapes&&x instanceof A&&(x.remove(),x=x.toPath()),w&&(x._data=JSON.parse(w))}return o&&(p.removeChild(o),h&&(u?h.insertBefore(i,u):h.appendChild(i))),s&&(e={},x&&c.pick(r.applyMatrix,_)&&x.matrix.apply(!0,!0)),x}function k(t,e,i){if(!t)return null;e="function"==typeof e?{onLoad:e}:e||{};var r=a,n=null;function s(s){try{var l="object"==typeof s?s:(new o.DOMParser).parseFromString(s,"image/svg+xml");if(!l.nodeName)throw l=null,new Error("Unsupported SVG source: "+t);a=r,n=M(l,e,!0),e&&!1===e.insert||i._insertItem(h,n);var c=e.onLoad;c&&c(n,s)}catch(t){u(t)}}function u(t,i){var r=e.onError;if(!r)throw new Error(t);r(t,i)}if("string"!=typeof t||/^.*</.test(t)){if("undefined"!=typeof File&&t instanceof File){var c=new FileReader;return c.onload=function(){s(c.result)},c.onerror=function(){u(c.error)},c.readAsText(t)}s(t)}else{var d=l.getElementById(t);d?s(d):at.request({url:t,async:!0,onLoad:s,onError:u})}return n}P.inject({importSVG:function(t,e){return k(t,e,this)}}),C.inject({importSVG:function(t,e){return this.activate(),k(t,e,this)}})},c.exports.PaperScript=function(){var t,e,d,p=this,g=p.acorn;if(!g)try{g=i(94)}catch(t){}g||(g=t=e={},d=function(t){"use strict";var e,i,r,n;t.version="0.5.0",t.parse=function(t,n){return i=String(t),r=i.length,a(n),Wt(),function(t){_=m=o,e.locations&&(y=new Gt);x=w=null,b=[],$t();var i=t||le(),r=!0;t||(i.body=[]);for(;d!==A;){var n=we();i.body.push(n),r&&fe(n)&&oe(!0),r=!1}return de(i,"Program")}(e.program)};var s=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function a(t){for(var i in e=t||{},s)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=s[i]);n=e.sourceFile||null}var o,h,u,l,c,d,f,p,g,v,_,m,y,x,b,w,T=t.getLineInfo=function(t,e){for(var i=1,r=0;;){Vt.lastIndex=r;var n=Vt.exec(t);if(!(n&&n.index<e))break;++i,r=n.index+n[0].length}return{line:i,column:e-r}};function S(t,e){var r=T(i,t);e+=" ("+r.line+":"+r.column+")";var n=new SyntaxError(e);throw n.pos=t,n.loc=r,n.raisedAt=o,n}t.tokenize=function(t,n){i=String(t),r=i.length,a(n),Wt();var s={};function _(t){return m=u,$t(t),s.start=h,s.end=u,s.startLoc=l,s.endLoc=c,s.type=d,s.value=f,s}return _.jumpTo=function(t,r){var n;if(o=t,e.locations)for(g=1,v=Vt.lastIndex=0;(n=Vt.exec(i))&&n.index<t;)++g,v=n.index+n[0].length;p=r,Kt()},_};var E=[],C={type:"num"},P={type:"regexp"},O={type:"string"},M={type:"name"},A={type:"eof"},I={keyword:"break"},k={keyword:"case",beforeExpr:!0},R={keyword:"catch"},D={keyword:"continue"},L={keyword:"debugger"},N={keyword:"default"},F={keyword:"do",isLoop:!0},B={keyword:"else",beforeExpr:!0},j={keyword:"finally"},U={keyword:"for",isLoop:!0},z={keyword:"function"},V={keyword:"if"},X={keyword:"return",beforeExpr:!0},H={keyword:"switch"},G={keyword:"throw",beforeExpr:!0},W={keyword:"try"},q={keyword:"var"},Y={keyword:"while",isLoop:!0},Z={keyword:"with"},K={keyword:"new",beforeExpr:!0},J={keyword:"this"},$={keyword:"null",atomValue:null},Q={keyword:"true",atomValue:!0},tt={keyword:"false",atomValue:!1},et={keyword:"in",binop:7,beforeExpr:!0},it={break:I,case:k,catch:R,continue:D,debugger:L,default:N,do:F,else:B,finally:j,for:U,function:z,if:V,return:X,switch:H,throw:G,try:W,var:q,while:Y,with:Z,null:$,true:Q,false:tt,new:K,in:et,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:J,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},rt={type:"[",beforeExpr:!0},nt={type:"]"},st={type:"{",beforeExpr:!0},at={type:"}"},ot={type:"(",beforeExpr:!0},ht={type:")"},ut={type:",",beforeExpr:!0},lt={type:";",beforeExpr:!0},ct={type:":",beforeExpr:!0},dt={type:"."},ft={type:"?",beforeExpr:!0},pt={binop:10,beforeExpr:!0},gt={isAssign:!0,beforeExpr:!0},vt={isAssign:!0,beforeExpr:!0},_t={postfix:!0,prefix:!0,isUpdate:!0},mt={prefix:!0,beforeExpr:!0},yt={binop:1,beforeExpr:!0},xt={binop:2,beforeExpr:!0},bt={binop:3,beforeExpr:!0},wt={binop:4,beforeExpr:!0},Tt={binop:5,beforeExpr:!0},St={binop:6,beforeExpr:!0},Et={binop:7,beforeExpr:!0},Ct={binop:8,beforeExpr:!0},Pt={binop:9,prefix:!0,beforeExpr:!0},Ot={binop:10,beforeExpr:!0};for(var Mt in t.tokTypes={bracketL:rt,bracketR:nt,braceL:st,braceR:at,parenL:ot,parenR:ht,comma:ut,semi:lt,colon:ct,dot:dt,question:ft,slash:pt,eq:gt,name:M,eof:A,num:C,regexp:P,string:O},it)t.tokTypes["_"+Mt]=it[Mt];function At(t){t=t.split(" ");var e="",i=[];t:for(var r=0;r<t.length;++r){for(var n=0;n<i.length;++n)if(i[n][0].length==t[r].length){i[n].push(t[r]);continue t}i.push([t[r]])}function s(t){if(1==t.length)return e+="return str === "+JSON.stringify(t[0])+";";e+="switch(str){";for(var i=0;i<t.length;++i)e+="case "+JSON.stringify(t[i])+":";e+="return true}return false;"}if(i.length>3){i.sort(function(t,e){return e.length-t.length}),e+="switch(str.length){";for(r=0;r<i.length;++r){var a=i[r];e+="case "+a[0].length+":",s(a)}e+="}"}else s(t);return new Function("str",e)}var It,kt=At("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Rt=At("class enum extends super const export import"),Dt=At("implements interface let package private protected public static yield"),Lt=At("eval arguments"),Nt=At("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ft=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Bt="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",jt=new RegExp("["+Bt+"]"),Ut=new RegExp("["+Bt+"̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿]"),zt=/[\n\r\u2028\u2029]/,Vt=/\r\n|[\n\r\u2028\u2029]/g,Xt=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&jt.test(String.fromCharCode(t)))},Ht=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Ut.test(String.fromCharCode(t))))};function Gt(){this.line=g,this.column=o-v}function Wt(){g=1,o=v=0,p=!0,Kt()}function qt(t,i){u=o,e.locations&&(c=new Gt),d=t,Kt(),f=i,p=t.beforeExpr}function Yt(){var t,r=e.onComment&&e.locations&&new Gt,n=o,s=i.indexOf("*/",o+=2);if(-1===s&&S(o-2,"Unterminated comment"),o=s+2,e.locations)for(Vt.lastIndex=n;(t=Vt.exec(i))&&t.index<o;)++g,v=t.index+t[0].length;e.onComment&&e.onComment(!0,i.slice(n+2,s),n,o,r,e.locations&&new Gt)}function Zt(){for(var t=o,n=e.onComment&&e.locations&&new Gt,s=i.charCodeAt(o+=2);o<r&&10!==s&&13!==s&&8232!==s&&8233!==s;)++o,s=i.charCodeAt(o);e.onComment&&e.onComment(!1,i.slice(t+2,o),t,o,n,e.locations&&new Gt)}function Kt(){for(;o<r;){var t=i.charCodeAt(o);if(32===t)++o;else if(13===t){++o,10===(n=i.charCodeAt(o))&&++o,e.locations&&(++g,v=o)}else if(10===t||8232===t||8233===t)++o,e.locations&&(++g,v=o);else if(t>8&&t<14)++o;else if(47===t){var n;if(42===(n=i.charCodeAt(o+1)))Yt();else{if(47!==n)break;Zt()}}else if(160===t)++o;else{if(!(t>=5760&&Ft.test(String.fromCharCode(t))))break;++o}}}function Jt(t){switch(t){case 46:return function(){var t=i.charCodeAt(o+1);return t>=48&&t<=57?ie(!0):(++o,qt(dt))}();case 40:return++o,qt(ot);case 41:return++o,qt(ht);case 59:return++o,qt(lt);case 44:return++o,qt(ut);case 91:return++o,qt(rt);case 93:return++o,qt(nt);case 123:return++o,qt(st);case 125:return++o,qt(at);case 58:return++o,qt(ct);case 63:return++o,qt(ft);case 48:var n=i.charCodeAt(o+1);if(120===n||88===n)return function(){o+=2;var t=ee(16);null==t&&S(h+2,"Expected hexadecimal number");Xt(i.charCodeAt(o))&&S(o,"Identifier directly after number");return qt(C,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return ie(!1);case 34:case 39:return function(t){o++;for(var n="";;){o>=r&&S(h,"Unterminated string constant");var s=i.charCodeAt(o);if(s===t)return++o,qt(O,n);if(92===s){s=i.charCodeAt(++o);var a=/^[0-7]+/.exec(i.slice(o,o+3));for(a&&(a=a[0]);a&&parseInt(a,8)>255;)a=a.slice(0,-1);if("0"===a&&(a=null),++o,a)w&&S(o-2,"Octal literal in strict mode"),n+=String.fromCharCode(parseInt(a,8)),o+=a.length-1;else switch(s){case 110:n+="\n";break;case 114:n+="\r";break;case 120:n+=String.fromCharCode(re(2));break;case 117:n+=String.fromCharCode(re(4));break;case 85:n+=String.fromCharCode(re(8));break;case 116:n+="\t";break;case 98:n+="\b";break;case 118:n+="\v";break;case 102:n+="\f";break;case 48:n+="\0";break;case 13:10===i.charCodeAt(o)&&++o;case 10:e.locations&&(v=o,++g);break;default:n+=String.fromCharCode(s)}}else 13!==s&&10!==s&&8232!==s&&8233!==s||S(h,"Unterminated string constant"),n+=String.fromCharCode(s),++o}}(t);case 47:return function(){var t=i.charCodeAt(o+1);return p?(++o,te()):61===t?Qt(vt,2):Qt(pt,1)}();case 37:case 42:return 61===i.charCodeAt(o+1)?Qt(vt,2):Qt(Ot,1);case 124:case 38:return function(t){var e=i.charCodeAt(o+1);return e===t?Qt(124===t?yt:xt,2):61===e?Qt(vt,2):Qt(124===t?bt:Tt,1)}(t);case 94:return 61===i.charCodeAt(o+1)?Qt(vt,2):Qt(wt,1);case 43:case 45:return function(t){var e=i.charCodeAt(o+1);return e===t?45==e&&62==i.charCodeAt(o+2)&&zt.test(i.slice(m,o))?(o+=3,Zt(),Kt(),$t()):Qt(_t,2):61===e?Qt(vt,2):Qt(Pt,1)}(t);case 60:case 62:return function(t){var e=i.charCodeAt(o+1),r=1;return e===t?(r=62===t&&62===i.charCodeAt(o+2)?3:2,61===i.charCodeAt(o+r)?Qt(vt,r+1):Qt(Ct,r)):33==e&&60==t&&45==i.charCodeAt(o+2)&&45==i.charCodeAt(o+3)?(o+=4,Zt(),Kt(),$t()):(61===e&&(r=61===i.charCodeAt(o+2)?3:2),Qt(Et,r))}(t);case 61:case 33:return function(t){return 61===i.charCodeAt(o+1)?Qt(St,61===i.charCodeAt(o+2)?3:2):Qt(61===t?gt:mt,1)}(t);case 126:return Qt(mt,1)}return!1}function $t(t){if(t?o=h+1:h=o,e.locations&&(l=new Gt),t)return te();if(o>=r)return qt(A);var n=i.charCodeAt(o);if(Xt(n)||92===n)return se();var s=Jt(n);if(!1===s){var a=String.fromCharCode(n);if("\\"===a||jt.test(a))return se();S(o,"Unexpected character '"+a+"'")}return s}function Qt(t,e){var r=i.slice(o,o+e);o+=e,qt(t,r)}function te(){for(var t,e,n=o;;){o>=r&&S(n,"Unterminated regular expression");var s=i.charAt(o);if(zt.test(s)&&S(n,"Unterminated regular expression"),t)t=!1;else{if("["===s)e=!0;else if("]"===s&&e)e=!1;else if("/"===s&&!e)break;t="\\"===s}++o}var a=i.slice(n,o);++o;var h=ne();h&&!/^[gmsiy]*$/.test(h)&&S(n,"Invalid regexp flag");try{var u=new RegExp(a,h)}catch(t){t instanceof SyntaxError&&S(n,t.message),S(t)}return qt(P,u)}function ee(t,e){for(var r=o,n=0,s=0,a=null==e?1/0:e;s<a;++s){var h,u=i.charCodeAt(o);if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;++o,n=n*t+h}return o===r||null!=e&&o-r!==e?null:n}function ie(t){var e=o,r=!1,n=48===i.charCodeAt(o);t||null!==ee(10)||S(e,"Invalid number"),46===i.charCodeAt(o)&&(++o,ee(10),r=!0);var s=i.charCodeAt(o);69!==s&&101!==s||(43!==(s=i.charCodeAt(++o))&&45!==s||++o,null===ee(10)&&S(e,"Invalid number"),r=!0),Xt(i.charCodeAt(o))&&S(o,"Identifier directly after number");var a,h=i.slice(e,o);return r?a=parseFloat(h):n&&1!==h.length?/[89]/.test(h)||w?S(e,"Invalid number"):a=parseInt(h,8):a=parseInt(h,10),qt(C,a)}function re(t){var e=ee(16,t);return null===e&&S(h,"Bad character escape sequence"),e}function ne(){It=!1;for(var t,e=!0,r=o;;){var n=i.charCodeAt(o);if(Ht(n))It&&(t+=i.charAt(o)),++o;else{if(92!==n)break;It||(t=i.slice(r,o)),It=!0,117!=i.charCodeAt(++o)&&S(o,"Expecting Unicode escape sequence \\uXXXX"),++o;var s=re(4),a=String.fromCharCode(s);a||S(o-1,"Invalid Unicode escape"),(e?Xt(s):Ht(s))||S(o-4,"Invalid Unicode escape"),t+=a}e=!1}return It?t:i.slice(r,o)}function se(){var t=ne(),e=M;return!It&&Nt(t)&&(e=it[t]),qt(e,t)}function ae(){_=h,m=u,y=c,$t()}function oe(t){if(w=t,o=h,e.locations)for(;o<v;)v=i.lastIndexOf("\n",v-2)+1,--g;Kt(),$t()}function he(){this.type=null,this.start=h,this.end=null}function ue(){this.start=l,this.end=null,null!==n&&(this.source=n)}function le(){var t=new he;return e.locations&&(t.loc=new ue),e.directSourceFile&&(t.sourceFile=e.directSourceFile),e.ranges&&(t.range=[h,0]),t}function ce(t){var i=new he;return i.start=t.start,e.locations&&(i.loc=new ue,i.loc.start=t.loc.start),e.ranges&&(i.range=[t.range[0],0]),i}function de(t,i){return t.type=i,t.end=m,e.locations&&(t.loc.end=y),e.ranges&&(t.range[1]=m),t}function fe(t){return e.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function pe(t){if(d===t)return ae(),!0}function ge(){return!e.strictSemicolons&&(d===A||d===at||zt.test(i.slice(m,h)))}function ve(){pe(lt)||ge()||me()}function _e(t){d===t?ae():me()}function me(){S(h,"Unexpected token")}function ye(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&S(t.start,"Assigning to rvalue"),w&&"Identifier"===t.type&&Lt(t.name)&&S(t.start,"Assigning to "+t.name+" in strict mode")}var xe={kind:"loop"},be={kind:"switch"};function we(){(d===pt||d===vt&&"/="==f)&&$t(!0);var t=d,r=le();switch(t){case I:case D:ae();var n=t===I;pe(lt)||ge()?r.label=null:d!==M?me():(r.label=Ne(),ve());for(var s=0;s<b.length;++s){var a=b[s];if(null==r.label||a.name===r.label.name){if(null!=a.kind&&(n||"loop"===a.kind))break;if(r.label&&n)break}}return s===b.length&&S(r.start,"Unsyntactic "+t.keyword),de(r,n?"BreakStatement":"ContinueStatement");case L:return ae(),ve(),de(r,"DebuggerStatement");case F:return ae(),b.push(xe),r.body=we(),b.pop(),_e(Y),r.test=Te(),ve(),de(r,"DoWhileStatement");case U:if(ae(),b.push(xe),_e(ot),d===lt)return Ee(r,null);if(d===q){var o=le();return ae(),Pe(o,!0),de(o,"VariableDeclaration"),1===o.declarations.length&&pe(et)?Ce(r,o):Ee(r,o)}o=Oe(!1,!0);return pe(et)?(ye(o),Ce(r,o)):Ee(r,o);case z:return ae(),De(r,!0);case V:return ae(),r.test=Te(),r.consequent=we(),r.alternate=pe(B)?we():null,de(r,"IfStatement");case X:return x||e.allowReturnOutsideFunction||S(h,"'return' outside of function"),ae(),pe(lt)||ge()?r.argument=null:(r.argument=Oe(),ve()),de(r,"ReturnStatement");case H:ae(),r.discriminant=Te(),r.cases=[],_e(st),b.push(be);for(var u,l;d!=at;)if(d===k||d===N){var c=d===k;u&&de(u,"SwitchCase"),r.cases.push(u=le()),u.consequent=[],ae(),c?u.test=Oe():(l&&S(_,"Multiple default clauses"),l=!0,u.test=null),_e(ct)}else u||me(),u.consequent.push(we());return u&&de(u,"SwitchCase"),ae(),b.pop(),de(r,"SwitchStatement");case G:return ae(),zt.test(i.slice(m,h))&&S(m,"Illegal newline after throw"),r.argument=Oe(),ve(),de(r,"ThrowStatement");case W:if(ae(),r.block=Se(),r.handler=null,d===R){var p=le();ae(),_e(ot),p.param=Ne(),w&&Lt(p.param.name)&&S(p.param.start,"Binding "+p.param.name+" in strict mode"),_e(ht),p.guard=null,p.body=Se(),r.handler=de(p,"CatchClause")}return r.guardedHandlers=E,r.finalizer=pe(j)?Se():null,r.handler||r.finalizer||S(r.start,"Missing catch or finally clause"),de(r,"TryStatement");case q:return ae(),Pe(r),ve(),de(r,"VariableDeclaration");case Y:return ae(),r.test=Te(),b.push(xe),r.body=we(),b.pop(),de(r,"WhileStatement");case Z:return w&&S(h,"'with' in strict mode"),ae(),r.object=Te(),r.body=we(),de(r,"WithStatement");case st:return Se();case lt:return ae(),de(r,"EmptyStatement");default:var g=f,v=Oe();if(t===M&&"Identifier"===v.type&&pe(ct)){for(s=0;s<b.length;++s)b[s].name===g&&S(v.start,"Label '"+g+"' is already declared");var y=d.isLoop?"loop":d===H?"switch":null;return b.push({name:g,kind:y}),r.body=we(),b.pop(),r.label=v,de(r,"LabeledStatement")}return r.expression=v,ve(),de(r,"ExpressionStatement")}}function Te(){_e(ot);var t=Oe();return _e(ht),t}function Se(t){var e,i=le(),r=!0,n=!1;for(i.body=[],_e(st);!pe(at);){var s=we();i.body.push(s),r&&t&&fe(s)&&(e=n,oe(n=!0)),r=!1}return n&&!e&&oe(!1),de(i,"BlockStatement")}function Ee(t,e){return t.init=e,_e(lt),t.test=d===lt?null:Oe(),_e(lt),t.update=d===ht?null:Oe(),_e(ht),t.body=we(),b.pop(),de(t,"ForStatement")}function Ce(t,e){return t.left=e,t.right=Oe(),_e(ht),t.body=we(),b.pop(),de(t,"ForInStatement")}function Pe(t,e){for(t.declarations=[],t.kind="var";;){var i=le();if(i.id=Ne(),w&&Lt(i.id.name)&&S(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=pe(gt)?Oe(!0,e):null,t.declarations.push(de(i,"VariableDeclarator")),!pe(ut))break}return t}function Oe(t,e){var i=Me(e);if(!t&&d===ut){var r=ce(i);for(r.expressions=[i];pe(ut);)r.expressions.push(Me(e));return de(r,"SequenceExpression")}return i}function Me(t){var e=function(t){var e=function(t){return function t(e,i,r){var n=d.binop;if(null!=n&&(!r||d!==et)&&n>i){var s=ce(e);s.left=e,s.operator=f;var a=d;ae(),s.right=t(Ae(),n,r);var o=de(s,a===yt||a===xt?"LogicalExpression":"BinaryExpression");return t(o,i,r)}return e}(Ae(),-1,t)}(t);if(pe(ft)){var i=ce(e);return i.test=e,i.consequent=Oe(!0),_e(ct),i.alternate=Oe(!0,t),de(i,"ConditionalExpression")}return e}(t);if(d.isAssign){var i=ce(e);return i.operator=f,i.left=e,ae(),i.right=Me(t),ye(e),de(i,"AssignmentExpression")}return e}function Ae(){if(d.prefix){var t=le(),e=d.isUpdate;return t.operator=f,t.prefix=!0,p=!0,ae(),t.argument=Ae(),e?ye(t.argument):w&&"delete"===t.operator&&"Identifier"===t.argument.type&&S(t.start,"Deleting local variable in strict mode"),de(t,e?"UpdateExpression":"UnaryExpression")}for(var i=Ie(ke());d.postfix&&!ge();){(t=ce(i)).operator=f,t.prefix=!1,t.argument=i,ye(i),ae(),i=de(t,"UpdateExpression")}return i}function Ie(t,e){var i;return pe(dt)?((i=ce(t)).object=t,i.property=Ne(!0),i.computed=!1,Ie(de(i,"MemberExpression"),e)):pe(rt)?((i=ce(t)).object=t,i.property=Oe(),i.computed=!0,_e(nt),Ie(de(i,"MemberExpression"),e)):!e&&pe(ot)?((i=ce(t)).callee=t,i.arguments=Le(ht,!1),Ie(de(i,"CallExpression"),e)):t}function ke(){switch(d){case J:var t=le();return ae(),de(t,"ThisExpression");case M:return Ne();case C:case O:case P:return(t=le()).value=f,t.raw=i.slice(h,u),ae(),de(t,"Literal");case $:case Q:case tt:return(t=le()).value=d.atomValue,t.raw=d.keyword,ae(),de(t,"Literal");case ot:var r=l,n=h;ae();var s=Oe();return s.start=n,s.end=u,e.locations&&(s.loc.start=r,s.loc.end=c),e.ranges&&(s.range=[n,u]),_e(ht),s;case rt:t=le();return ae(),t.elements=Le(nt,!0,!0),de(t,"ArrayExpression");case st:return function(){var t=le(),i=!0,r=!1;t.properties=[],ae();for(;!pe(at);){if(i)i=!1;else if(_e(ut),e.allowTrailingCommas&&pe(at))break;var n,s={key:Re()},a=!1;if(pe(ct)?(s.value=Oe(!0),n=s.kind="init"):e.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=r=!0,n=s.kind=s.key.name,s.key=Re(),d!==ot&&me(),s.value=De(le(),!1)):me(),"Identifier"===s.key.type&&(w||r))for(var o=0;o<t.properties.length;++o){var h=t.properties[o];if(h.key.name===s.key.name){var u=n==h.kind||a&&"init"===h.kind||"init"===n&&("get"===h.kind||"set"===h.kind);u&&!w&&"init"===n&&"init"===h.kind&&(u=!1),u&&S(s.key.start,"Redefinition of property")}}t.properties.push(s)}return de(t,"ObjectExpression")}();case z:t=le();return ae(),De(t,!1);case K:return function(){var t=le();ae(),t.callee=Ie(ke(),!0),pe(ot)?t.arguments=Le(ht,!1):t.arguments=E;return de(t,"NewExpression")}();default:me()}}function Re(){return d===C||d===O?ke():Ne(!0)}function De(t,e){d===M?t.id=Ne():e?me():t.id=null,t.params=[];var i=!0;for(_e(ot);!pe(ht);)i?i=!1:_e(ut),t.params.push(Ne());var r=x,n=b;if(x=!0,b=[],t.body=Se(!0),x=r,b=n,w||t.body.body.length&&fe(t.body.body[0]))for(var s=t.id?-1:0;s<t.params.length;++s){var a=s<0?t.id:t.params[s];if((Dt(a.name)||Lt(a.name))&&S(a.start,"Defining '"+a.name+"' in strict mode"),s>=0)for(var o=0;o<s;++o)a.name===t.params[o].name&&S(a.start,"Argument name clash in strict mode")}return de(t,e?"FunctionDeclaration":"FunctionExpression")}function Le(t,i,r){for(var n=[],s=!0;!pe(t);){if(s)s=!1;else if(_e(ut),i&&e.allowTrailingCommas&&pe(t))break;r&&d===ut?n.push(null):n.push(Oe(!0))}return n}function Ne(t){var r=le();return t&&"everywhere"==e.forbidReserved&&(t=!1),d===M?(!t&&(e.forbidReserved&&(3===e.ecmaVersion?kt:Rt)(f)||w&&Dt(f))&&-1==i.slice(h,u).indexOf("\\")&&S(h,"The keyword '"+f+"' is reserved"),r.name=f):t&&d.keyword?r.name=d.keyword:me(),p=!1,ae(),de(r,"Identifier")}},"object"==typeof t&&"object"==typeof e?d(t):(r=[t],(s="function"==typeof(n=d)?n.apply(t,r):n)===h||(e.exports=s)),g.version||(g=null));function v(t,e){return(p.acorn||g).parse(t,e)}var _={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},y={"-":"__negate","+":"__self"},b=c.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});function w(t,e,i){var r=_[e];if(t&&t[r]){var n=t[r](i);return"!="===e?!n:n}switch(e){case"+":return t+i;case"-":return t-i;case"*":return t*i;case"/":return t/i;case"%":return t%i;case"==":return t==i;case"!=":return t!=i}}function T(t,e){var i=y[t];if(e&&e[i])return e[i]();switch(t){case"+":return+e;case"-":return-e}}function S(t,e){if(!t)return"";var i=[];function r(t){for(var e=0,r=i.length;e<r;e++){var n=i[e];if(n[0]>=t)break;t+=n[1]}return t}function n(e){return t.substring(r(e.range[0]),r(e.range[1]))}function s(e,n){for(var s=r(e.range[0]),a=r(e.range[1]),o=0,h=i.length-1;h>=0;h--)if(s>i[h][0]){o=h+1;break}i.splice(o,0,[s,n.length-a+s]),t=t.substring(0,s)+n+t.substring(a)}var h,c=(e=e||{}).url||"",d=a.agent,f=d.versionNumber,p=!1,g=e.sourceMaps,m=e.source||t,x=/\r\n|\n|\r/gm,b=e.offset||0;if(g&&(d.chrome&&f>=30||d.webkit&&f>=537.76||d.firefox&&f>=23||d.node)){if(d.node)b-=2;else if(u&&c&&!u.location.href.indexOf(c)){var w=l.getElementsByTagName("html")[0].innerHTML;b=w.substr(0,w.indexOf(t)+1).match(x).length+1}var T=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var i=31&t;(t>>=5)&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[i]}return e}((p=b>0&&!(d.chrome&&f>=36||d.safari&&f>=600||d.firefox&&f>=40||d.node))?0:b)+"A"];T.length=(t.match(x)||[]).length+1+(p?b:0),h={version:3,file:c,names:[],mappings:T.join(";AACA"),sourceRoot:"",sources:[c],sourcesContent:[m]}}return function e(i,a){if(i){for(var o in i)if("range"!==o&&"loc"!==o){var h=i[o];if(Array.isArray(h))for(var u=0,l=h.length;u<l;u++)e(h[u],i);else h&&"object"==typeof h&&e(h,i)}switch(i.type){case"UnaryExpression":if(i.operator in y&&"Literal"!==i.argument.type){var c=n(i.argument);s(i,'$__("'+i.operator+'", '+c+")")}break;case"BinaryExpression":if(i.operator in _&&"Literal"!==i.left.type){var d=n(i.left),f=n(i.right),p=function(e,i){return t.substring(r(e.range[1]),r(i.range[0]))}(i.left,i.right),g=i.operator;s(i,"__$__("+d+","+p.replace(new RegExp("\\"+g),'"'+g+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var v=a&&a.type;if(!("ForStatement"===v||"BinaryExpression"===v&&/^[=!<>]/.test(a.operator)||"MemberExpression"===v&&a.computed))if("UpdateExpression"===i.type){var m=(c=n(i.argument))+" = "+(x="__$__("+c+', "'+i.operator[0]+'", 1)');i.prefix||"AssignmentExpression"!==v&&"VariableDeclarator"!==v||(n(a.left||a.id)===c&&(m=x),m=c+"; "+m),s(i,m)}else if(/^.=$/.test(i.operator)&&"Literal"!==i.left.type){d=n(i.left),f=n(i.right);var x=d+" = __$__("+d+', "'+i.operator[0]+'", '+f+")";s(i,/^\(.*\)$/.test(n(i))?"("+x+")":x)}}}}(v(t,{ranges:!0,preserveParens:!0})),h&&(p&&(t=new Array(b+1).join("\n")+t),/^(inline|both)$/.test(g)&&(t+="\n//# sourceMappingURL=data:application/json;base64,"+o.btoa(unescape(encodeURIComponent(JSON.stringify(h))))),t+="\n//# sourceURL="+(c||"paperscript")),{url:c,source:m,code:t,map:h}}function E(t,e,i){a=e;var r,n=e.getView(),s=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new st:null,o=s?s._events:[],h=["onFrame","onResize"].concat(o),u=[],d=[],f="object"==typeof t?t:S(t,i);function p(e,i){for(var r in e)!i&&/^_/.test(r)||!new RegExp("([\\b\\s\\W]|^)"+r.replace(/\$/g,"\\$")+"\\b").test(t)||(u.push(r),d.push(e[r]))}t=f.code,p({__$__:w,$__:T,paper:e,view:n,tool:s},!0),p(e),(h=c.each(h,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(u.push(e),this.push(e+": "+e))},[]).join(", "))&&(t+="\nreturn { "+h+" };");var g=a.agent;if(l&&(g.chrome||g.firefox&&g.versionNumber<40)){var v=l.createElement("script"),_=l.head||l.getElementsByTagName("head")[0];g.firefox&&(t="\n"+t),v.appendChild(l.createTextNode("paper._execute = function("+u+") {"+t+"\n}")),_.appendChild(v),r=a._execute,delete a._execute,_.removeChild(v)}else r=Function(u,t);var y=r.apply(e,d)||{};return c.each(o,function(t){var e=y[t];e&&(s[t]=e)}),n&&(y.onResize&&n.setOnResize(y.onResize),n.emit("resize",{size:n.size,delta:new m}),y.onFrame&&n.setOnFrame(y.onFrame),n.requestUpdate()),f}function C(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==f.getAttribute(t,"ignore")){var e=f.getAttribute(t,"canvas"),i=l.getElementById(e),r=t.src||t.getAttribute("data-src"),n=f.hasAttribute(t,"async");if(!i)throw new Error('Unable to find canvas with id "'+e+'"');var s=f.get(i.getAttribute("data-paper-scope"))||(new f).setup(i);return i.setAttribute("data-paper-scope",s._id),r?at.request({url:r,async:n,mimeType:"text/plain",onLoad:function(t){E(t,s,r)}}):E(t.innerHTML,s,t.baseURI),t.setAttribute("data-paper-ignore","true"),s}}function P(){c.each(l&&l.getElementsByTagName("script"),C)}return m.inject(b),x.inject(b),W.inject(b),u&&("complete"===l.readyState?setTimeout(P):J.add(u,{load:P})),{compile:S,execute:E,load:function(t){return t?C(t):P()},parse:v}}.call(this),(a=new(f.inject(c.exports,{Base:c,Numerical:v,Key:it,DomEvent:J,DomElement:K,document:l,window:u,Symbol:R,PlacedSymbol:k}))).agent.node&&i(93)(a),(s="function"==typeof(n=a)?n.call(e,i,e,t):n)===h||(t.exports=s),a}.call(this,"object"==typeof self?self:null)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(20);var a=16,o=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=a,r.canvas.height=a,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(h),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(((r=s)&&r.__esModule?r:{default:r}).default);function h(t,e){if(e instanceof n.BaseTexture){var i=e.source,r=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),s=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,r,s,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.default=o,n.CanvasRenderer.registerPlugin("prepare",o)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(20);var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r.renderer,r.registerFindHook(u),r.registerUploadHook(o),r.registerUploadHook(h),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=s)&&r.__esModule?r:{default:r}).default);function o(t,e){return e instanceof n.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function h(t,e){return e instanceof n.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function u(t,e){return t instanceof n.Graphics&&(e.push(t),!0)}e.default=a,n.WebGLRenderer.registerPlugin("prepare",a)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(99);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return h(r).default}});var n=i(98);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return h(n).default}});var s=i(20);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return h(s).default}});var a=i(37);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return h(a).default}});var o=i(97);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return h(o).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(5)),n=s(i(22));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var s=0;s<i.length;++s){var a=i[s];a={attribute:a.attribute,size:a.size,uploadFunction:a.uploadFunction,unsignedByte:a.unsignedByte,offset:a.offset},r[s]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,n.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var s=this.dynamicProperties[i];s.offset=e,e+=s.size,this.dynamicStride+=s.size}var a=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(a),this.dynamicDataUint32=new Uint32Array(a),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(t,a,t.STREAM_DRAW);var o=0;this.staticStride=0;for(var h=0;h<this.staticProperties.length;++h){var u=this.staticProperties[h];u.offset=o,o+=u.size,this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var f=0;f<this.staticProperties.length;++f){var p=this.staticProperties[f];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(12);var s=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=o(i(102)),s=o(i(101)),a=i(2);function o(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new r.Matrix,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new n.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,s=this.renderer,a=e.length;if(0!==a){a>i&&(a=i);var o=t._glBuffers[s.CONTEXT_UID];o||(o=t._glBuffers[s.CONTEXT_UID]=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha));var u=s.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(s._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha),this.shader.uniforms.uSampler=s.bindTexture(h);for(var c=!1,d=0,f=0;d<a;d+=n,f+=1){var p=a-d;if(p>n&&(p=n),f>=o.length){if(!t.autoResize)break;o.push(this._generateOneMoreBuffer(t))}var g=o[f];g.uploadDynamic(e,d,p);var v=t._bufferUpdateIDs[d]||0;(c=c||g._updateID<v)&&(g._updateID=t._updateID,g.uploadStatic(e,d,p)),s.bindVao(g.vao),g.vao.draw(u.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],r=t._maxSize,n=t._batchSize,a=t._properties,o=0;o<r;o+=n)i.push(new s.default(e,this.properties,a,n));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,r=t._properties;return new s.default(e,this.properties,r,i)},e.prototype.uploadVertices=function(t,e,i,r,n,s){for(var a=0,o=0,h=0,u=0,l=0;l<i;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,g=d.trim,v=d.orig;g?(a=(o=g.x-c.anchor.x*v.width)+g.width,h=(u=g.y-c.anchor.y*v.height)+g.height):(a=v.width*(1-c.anchor.x),o=v.width*-c.anchor.x,h=v.height*(1-c.anchor.y),u=v.height*-c.anchor.y),r[s]=o*f,r[s+1]=u*p,r[s+n]=a*f,r[s+n+1]=u*p,r[s+2*n]=a*f,r[s+2*n+1]=h*p,r[s+3*n]=o*f,r[s+3*n+1]=h*p,s+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,s){for(var a=0;a<i;a++){var o=t[e+a].position;r[s]=o.x,r[s+1]=o.y,r[s+n]=o.x,r[s+n+1]=o.y,r[s+2*n]=o.x,r[s+2*n+1]=o.y,r[s+3*n]=o.x,r[s+3*n+1]=o.y,s+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,s){for(var a=0;a<i;a++){var o=t[e+a].rotation;r[s]=o,r[s+n]=o,r[s+2*n]=o,r[s+3*n]=o,s+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,s){for(var a=0;a<i;++a){var o=t[e+a]._texture._uvs;o?(r[s]=o.x0,r[s+1]=o.y0,r[s+n]=o.x1,r[s+n+1]=o.y1,r[s+2*n]=o.x2,r[s+2*n+1]=o.y2,r[s+3*n]=o.x3,r[s+3*n+1]=o.y3,s+=4*n):(r[s]=0,r[s+1]=0,r[s+n]=0,r[s+n+1]=0,r[s+2*n]=0,r[s+2*n+1]=0,r[s+3*n]=0,r[s+3*n+1]=0,s+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,s){for(var o=0;o<i;++o){var h=t[e+o],u=h._texture.baseTexture.premultipliedAlpha,l=h.alpha,c=l<1&&u?(0,a.premultiplyTint)(h._tintRGB,l):h._tintRGB+(255*l<<24);r[s]=c,r[s+n]=c,r[s+2*n]=c,r[s+3*n]=c,s+=4*n}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(r.ObjectRenderer);e.default=h,r.WebGLRenderer.registerPlugin("particle",h)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(2);var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return s>16384&&(s=16384),s>i&&(s=i),o._properties=[!1,!0,!1,!1,!1],o._maxSize=i,o._batchSize=s,o._glBuffers={},o._bufferUpdateIDs=[],o._updateID=0,o.interactiveChildren=!1,o.blendMode=n.BLEND_MODES.NORMAL,o.autoResize=a,o.roundPixels=!0,o.baseTexture=null,o.setProperties(r),o._tint=0,o.tintRgb=new Float32Array(4),o.tint=16777215,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,s=0,a=0,o=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var l=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)r&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),r=!1),n=u.anchor.x*(-l.width*u.scale.x)+u.position.x+.5,s=u.anchor.y*(-l.height*u.scale.y)+u.position.y+.5,a=l.width*u.scale.x,o=l.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var c=u.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=u.anchor.x*-l.width+.5,s=u.anchor.y*-l.height+.5,a=l.width,o=l.height}var d=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,n*t.resolution,s*t.resolution,a*t.resolution,o*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,s.hex2rgb)(t,this.tintRgb)}}]),e}(n.Container);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=i(104);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return s(r).default}});var n=i(103);function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return s(n).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(10);var s=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var n=t.length,s=1;s<n;s++){var a=4*s,o=s/(n-1);e[a]=o,e[a+1]=0,e[a+2]=o,e[a+3]=1,r[a=2*s]=1,r[a+1]=1,i[a=2*s]=a,i[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,r=0,n=0,s=this.vertices,a=t.length,o=0;o<a;o++){var h=t[o],u=4*o;n=-((i=o<t.length-1?t[o+1]:h).x-e.x),r=i.y-e.y;var l=10*(1-o/(a-1));l>1&&(l=1);var c=Math.sqrt(r*r+n*n),d=this._texture.height/2;r/=c,n/=c,r*=d,n*=d,s[u]=h.x+r,s[u+1]=h.y+n,s[u+2]=h.x-r,s[u+3]=h.y-n,e=h}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=i(38);var a=10,o=function(t){function e(i,r,n,s,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4));return h._origWidth=i.orig.width,h._origHeight=i.orig.height,h._width=h._origWidth,h._height=h._origHeight,h.leftWidth=void 0!==r?r:a,h.rightWidth=void 0!==s?s:a,h.topHeight=void 0!==n?n:a,h.bottomHeight=void 0!==o?o:a,h.refresh(!0),h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var i=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);var n=this._texture.baseTexture,s=n.source,a=n.width*n.resolution,o=n.height*n.resolution;this.drawSegment(e,s,a,o,0,1,10,11),this.drawSegment(e,s,a,o,2,3,12,13),this.drawSegment(e,s,a,o,4,5,14,15),this.drawSegment(e,s,a,o,8,9,18,19),this.drawSegment(e,s,a,o,10,11,20,21),this.drawSegment(e,s,a,o,12,13,22,23),this.drawSegment(e,s,a,o,16,17,26,27),this.drawSegment(e,s,a,o,18,19,28,29),this.drawSegment(e,s,a,o,20,21,30,31)},e.prototype.drawSegment=function(t,e,i,r,n,s,a,o){var h=this.uvs,u=this.vertices,l=(h[a]-h[n])*i,c=(h[o]-h[s])*r,d=u[a]-u[n],f=u[o]-u[s];l<1&&(l=1),c<1&&(c=1),d<1&&(d=1),f<1&&(f=1),t.drawImage(e,h[n]*i,h[s]*r,l,c,u[n],u[s],d,f)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},n(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=i(10),a=(r=s)&&r.__esModule?r:{default:r};var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldTransform,n=e.resolution;e.roundPixels?i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===a.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var r=2*i;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,r=0;r<i;r+=3){var n=2*e[r],s=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,n,s,a)}},t.prototype._renderDrawTriangle=function(t,e,i,r){var n=this.renderer.context,s=t.uvs,a=t.vertices,o=t._texture;if(o.valid){var h=o.baseTexture,u=h.source,l=h.width,c=h.height,d=void 0,f=void 0,p=void 0,g=void 0,v=void 0,_=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;d=(s[e]*m.a+s[e+1]*m.c+m.tx)*h.width,f=(s[i]*m.a+s[i+1]*m.c+m.tx)*h.width,p=(s[r]*m.a+s[r+1]*m.c+m.tx)*h.width,g=(s[e]*m.b+s[e+1]*m.d+m.ty)*h.height,v=(s[i]*m.b+s[i+1]*m.d+m.ty)*h.height,_=(s[r]*m.b+s[r+1]*m.d+m.ty)*h.height}else d=s[e]*h.width,f=s[i]*h.width,p=s[r]*h.width,g=s[e+1]*h.height,v=s[i+1]*h.height,_=s[r+1]*h.height;var y=a[e],x=a[i],b=a[r],w=a[e+1],T=a[i+1],S=a[r+1],E=t.canvasPadding/this.renderer.resolution;if(E>0){var C=E/Math.abs(t.worldTransform.a),P=E/Math.abs(t.worldTransform.d),O=(y+x+b)/3,M=(w+T+S)/3,A=y-O,I=w-M,k=Math.sqrt(A*A+I*I);y=O+A/k*(k+C),w=M+I/k*(k+P),I=T-M,x=O+(A=x-O)/(k=Math.sqrt(A*A+I*I))*(k+C),T=M+I/k*(k+P),I=S-M,b=O+(A=b-O)/(k=Math.sqrt(A*A+I*I))*(k+C),S=M+I/k*(k+P)}n.save(),n.beginPath(),n.moveTo(y,w),n.lineTo(x,T),n.lineTo(b,S),n.closePath(),n.clip();var R=d*v+g*p+f*_-v*p-g*f-d*_,D=y*v+g*b+x*_-v*b-g*x-y*_,L=d*x+y*p+f*b-x*p-y*f-d*b,N=d*v*b+g*x*p+y*f*_-y*v*p-g*f*b-d*x*_,F=w*v+g*S+T*_-v*S-g*T-w*_,B=d*T+w*p+f*S-T*p-w*f-d*S,j=d*v*S+g*T*p+w*f*_-w*v*p-g*f*S-d*T*_;n.transform(D/R,F/R,L/R,B/R,N/R,j/R),n.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),n.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,r=i.length/2;e.beginPath();for(var n=1;n<r-2;++n){var s=2*n,a=i[s],o=i[s+1],h=i[s+2],u=i[s+3],l=i[s+4],c=i[s+5];e.moveTo(a,o),e.lineTo(h,u),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,n.CanvasRenderer.registerPlugin("mesh",o)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=a(i(5)),s=a(i(10));i(6);function a(t){return t&&t.__esModule?t:{default:t}}var o=r.Matrix.IDENTITY,h=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,a=t._texture;if(a.valid){var h=t._glDatas[e.CONTEXT_UID];h||(e.bindVao(null),(h={shader:this.shader,vertexBuffer:n.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:n.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:n.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty}).vao=new n.default.VertexArrayObject(i).addIndex(h.indexBuffer).addAttribute(h.vertexBuffer,h.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(h.uvBuffer,h.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=h),e.bindVao(h.vao),t.dirty!==h.dirty&&(h.dirty=t.dirty,h.uvBuffer.upload(t.uvs)),t.indexDirty!==h.indexDirty&&(h.indexDirty=t.indexDirty,h.indexBuffer.upload(t.indices)),h.vertexBuffer.upload(t.vertices),e.bindShader(h.shader),h.shader.uniforms.uSampler=e.bindTexture(a),e.state.setBlendMode(r.utils.correctBlendMode(t.blendMode,a.baseTexture.premultipliedAlpha)),h.shader.uniforms.uTransform&&(t.uploadUvTransform?h.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):h.shader.uniforms.uTransform=o.toArray(!0)),h.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),h.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,h.shader.uniforms.uColor,a.baseTexture.premultipliedAlpha);var u=t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;h.vao.draw(u,t.indices.length,0)}},e}(r.ObjectRenderer);e.default=h,r.WebGLRenderer.registerPlugin("mesh",h)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(10);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return u(r).default}});var n=i(109);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return u(n).default}});var s=i(108);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return u(s).default}});var a=i(38);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return u(a).default}});var o=i(107);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return u(o).default}});var h=i(106);function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return u(h).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===n.default.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=(h=o.createObjectURL(t.data),t.blob=t.data,t.data=new Image,t.data.src=h,t.type=n.default.TYPE.IMAGE,t.data.onload=function(){o.revokeObjectURL(h),t.data.onload=null,e()},{v:void 0});if("object"===(void 0===i?"undefined":r(i)))return i.v}}else{var a=t.xhr.getResponseHeader("content-type");if(a&&0===a.indexOf("image"))return t.data=new Image,t.data.src="data:"+a+";base64,"+s.default.encodeBinary(t.xhr.responseText),t.type=n.default.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}var h;e()}else e()}};var n=a(i(21)),s=a(i(41));function a(t){return t&&t.__esModule?t:{default:t}}var o=window.URL||window.webkitURL},function(t,e,i){"use strict";e.__esModule=!0;var r=u(i(11)),n=i(111),s=u(i(8)),a=u(i(39)),o=u(i(40)),h=u(i(45));function u(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));s.default.call(n);for(var a=0;a<e._pixiMiddleware.length;++a)n.use(e._pixiMiddleware[a]());return n.onStart.add(function(t){return n.emit("start",t)}),n.onProgress.add(function(t,e){return n.emit("progress",t,e)}),n.onError.add(function(t,e,i){return n.emit("error",t,e,i)}),n.onLoad.add(function(t,e){return n.emit("load",t,e)}),n.onComplete.add(function(t,e){return n.emit("complete",t,e)}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(r.default);for(var c in e.default=l,s.default.prototype)l.prototype[c]=s.default.prototype[c];l._pixiMiddleware=[n.blobMiddlewareFactory,a.default,o.default,h.default];var d=r.default.Resource;d.setExtensionXhrType("fnt",d.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=u(i(44)),a=u(i(43)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(42)),h=u(i(21));function u(t){return t&&t.__esModule?t:{default:t}}var l=/(#[\w-]+)?$/,c=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=o.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new s.default,this.onError=new s.default,this.onLoad=new s.default,this.onStart=new s.default,this.onComplete=new s.default}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var s=0;s<t.length;++s)this.add(t[s]);return this}if("object"===(void 0===t?"undefined":r(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new h.default(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var a=i.parentResource,o=[],u=0;u<a.children.length;++u)a.children[u].isComplete||o.push(a.children[u]);var l=a.progressChunk*(o.length+1)/(o.length+2);a.children.push(this.resources[t]),a.progressChunk=l;for(var c=0;c<o.length;++c)o[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,a.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=l.exec(i)[0];-1!==(i=i.substr(0,i.length-r.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=r}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,o.eachSeries(this._beforeMiddleware,function(e,r){e.call(i,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),o.eachSeries(this._afterMiddleware,function(i,r){i.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},n(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();e.default=c},function(t,e,i){"use strict";e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var r=i(45);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return u(r).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var n=i(40);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return u(n).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return n.getResourcePath}});var s=i(39);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return u(s).default}});var a=i(11);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return a.Resource}});var o=u(i(58)),h=u(i(112));function u(t){return t&&t.__esModule?t:{default:t}}e.Loader=h.default;var l=new h.default;l.destroy=function(){},e.shared=l;var c=o.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?l:new h.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},function(t,e,i){"use strict";e.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=l(i(49)),a=l(i(48)),o=l(i(47)),h=l(i(8)),u=l(i(46));function l(t){return t&&t.__esModule?t:{default:t}}n.utils.mixins.delayMixin(n.DisplayObject.prototype,u.default);var c=1,d={target:null,data:{global:null}},f=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r=r||{},o.renderer=i,o.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,o.interactionFrequency=r.interactionFrequency||10,o.mouse=new s.default,o.mouse.identifier=c,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[c]=o.mouse,o.interactionDataPool=[],o.eventData=new a.default,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.mouseOverRenderer=!1,o.supportsTouchEvents="ontouchstart"in window,o.supportsPointerEvents=!!window.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o._tempPoint=new n.Point,o.resolution=1,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return d.target=null,d.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(d,e,null,!0),d.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r,n){if(!e||!e.visible)return!1;var s=t.data.global,a=!1,o=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,h=!1)),o=!1):e._mask&&r&&(e._mask.containsPoint(s)||(r=!1,h=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;l>=0;l--){var c=u[l],d=this.processInteractive(t,c,i,r,o);if(d){if(!c.parent)continue;o=!1,d&&(t.target&&(r=!1),a=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),i&&i(t,e,!!a))),a},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);if(a.data.originalEvent=t,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===n.pointerType)this.emit("touchstart",a);else if("mouse"===n.pointerType||"pen"===n.pointerType){var o=2===n.button;this.emit(o?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new o.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;s?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,s=t.target!==this.interactionDOMElement?"outside":"",a=0;a<n;a++){var o=r[a],h=this.getInteractionDataForPointerId(o),u=this.configureInteractionEventForDOMEvent(this.eventData,o,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,u),"mouse"===o.pointerType||"pen"===o.pointerType){var l=2===o.button;this.emit(l?"rightup"+s:"mouseup"+s,u)}else"touch"===o.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,u),this.releaseInteractionDataForPointerId(o.pointerId,h))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,s=e.trackedPointers[n],a="touch"===r.pointerType;if("mouse"===r.pointerType||"pen"===r.pointerType){var h=2===r.button,u=o.default.FLAGS,l=h?u.RIGHT_DOWN:u.LEFT_DOWN,c=void 0!==s&&s.flags&l;i?(this.dispatchEvent(e,h?"rightup":"mouseup",t),c&&this.dispatchEvent(e,h?"rightclick":"click",t)):c&&this.dispatchEvent(e,h?"rightupoutside":"mouseupoutside",t),s&&(h?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),s&&(this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),a=this.configureInteractionEventForDOMEvent(this.eventData,n,s);a.data.originalEvent=t;var o="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,o),this.emit("pointermove",a),"touch"===n.pointerType&&this.emit("touchmove",a),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,s="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[n];i&&!a&&(a=e.trackedPointers[n]=new o.default(n)),void 0!==a&&(i&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(e,"pointerover",t),s&&this.dispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return e===c||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new s.default).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),n.twist=0,n.tangentialPressure=0,void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=c),void 0===t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(h.default);e.default=f,n.WebGLRenderer.registerPlugin("interaction",f),n.CanvasRenderer.registerPlugin("interaction",f)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(49);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return h(r).default}});var n=i(115);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return h(n).default}});var s=i(46);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return h(s).default}});var a=i(47);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return h(a).default}});var o=i(48);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return h(o).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var s=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=i,r.glShaderKey="alpha",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var s=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=t;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,t),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,s=(0,Math.sqrt)(n),a=[i+(1-i)*n,n*(1-i)-s*r,n*(1-i)+s*r,0,0,n*(1-i)+s*r,i+n*(1-i),n*(1-i)-s*r,0,0,n*(1-i)-s*r,n*(1-i)+s*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(a,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){t=t||.2,e=e||.15;var s=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,o=(255&i)/255,h=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,s,a,o,t,0,h,u,l,e,0,s-h,a-u,o-l,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);e.default=s,s.prototype.grayscale=s.prototype.greyscale},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=o(i(54)),a=o(i(50));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,r,o,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return u.blurXFilter=new s.default(i,r,o,h),u.blurYFilter=new a.default(i,r,o,h),u.padding=0,u.resolution=o||n.settings.RESOLUTION,u.quality=r||4,u.blur=i||8,u}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,i,!1),t.returnRenderTarget(r)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(n.Filter);e.default=h},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var s=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=new n.Matrix;i.renderable=!1;var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return a.maskSprite=i,a.maskMatrix=s,a.uniforms.mapSampler=i._texture,a.uniforms.filterMatrix=s,a.uniforms.scale={x:1,y:1},null!==r&&void 0!==r||(r=20),a.scale=new n.Point(r,r),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},r(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(n.Filter);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var s=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return n.noise=i,n.seed=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(n.Filter);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));i(6);var n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.Filter);e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var r=i(122);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return c(r).default}});var n=i(121);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return c(n).default}});var s=i(120);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return c(s).default}});var a=i(119);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return c(a).default}});var o=i(54);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return c(o).default}});var h=i(50);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return c(h).default}});var u=i(118);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(u).default}});var l=i(117);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return c(l).default}})},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=o(i(7)),s=o(i(9)),a=i(2);function o(t){return t&&t.__esModule?t:{default:t}}var h=r.DisplayObject,u=new r.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var l=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new l),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},h.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters){var o=this._filters[0].padding;i.pad(o)}var h=t._activeRenderTarget,l=t.filterManager.filterStack,c=r.RenderTexture.create(0|i.width,0|i.height),d="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=d,s.default.addToCache(c.baseTexture,d),n.default.addToCache(c,d);var f=u;f.tx=-i.x,f.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,f,!0),t.bindRenderTarget(h),t.filterManager.filterStack=l,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new r.Sprite(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-i.x/i.width,p.anchor.y=-i.y/i.height,p.alpha=e,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},h.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},h.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var o=t.context,h=r.RenderTexture.create(0|e.width,0|e.height),l="cacheAsBitmap_"+(0,a.uid)();this._cacheData.textureCacheId=l,s.default.addToCache(h.baseTexture,l),n.default.addToCache(h,l);var c=u;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,h,!0,c,!1),t.context=o,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d._bounds=this._bounds,d.alpha=i,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=d,this.containsPoint=d.containsPoint.bind(d)}},h.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,s.default.removeFromCache(this._cacheData.textureCacheId),n.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),s=h(i(87)),a=i(2),o=h(i(3));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},n.font=r.font,n._text=i,n._maxWidth=0,n._maxLineHeight=0,n._anchor=new s.default(function(){n.dirty=!0},n,0,0),n.dirty=!1,n.updateText(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new n.Point,s=[],a=[],o=null,h=0,u=0,l=0,c=-1,d=0,f=0,p=0,g=0;g<this.text.length;g++){var v=this.text.charCodeAt(g);if(/(\s)/.test(this.text.charAt(g))&&(c=g,d=h),/(?:\r\n|\r|\n)/.test(this.text.charAt(g)))a.push(h),u=Math.max(u,h),l++,r.x=0,r.y+=t.lineHeight,o=null;else if(-1!==c&&this._maxWidth>0&&r.x*i>this._maxWidth)n.utils.removeItems(s,c-f,g-c),g=c,c=-1,++f,a.push(d),u=Math.max(u,d),l++,r.x=0,r.y+=t.lineHeight,o=null;else{var _=t.chars[v];_&&(o&&_.kerning[o]&&(r.x+=_.kerning[o]),s.push({texture:_.texture,line:l,charCode:v,position:new n.Point(r.x+_.xOffset,r.y+_.yOffset)}),h=r.x+(_.texture.width+_.xOffset),r.x+=_.xAdvance,p=Math.max(p,_.yOffset+_.texture.height),o=v)}}a.push(h),u=Math.max(u,h);for(var m=[],y=0;y<=l;y++){var x=0;"right"===this._font.align?x=u-a[y]:"center"===this._font.align&&(x=(u-a[y])/2),m.push(x)}for(var b=s.length,w=this.tint,T=0;T<b;T++){var S=this._glyphs[T];S?S.texture=s[T].texture:(S=new n.Sprite(s[T].texture),this._glyphs.push(S)),S.position.x=(s[T].position.x+m[s[T].line])*i,S.position.y=s[T].position.y*i,S.scale.x=S.scale.y=i,S.tint=w,S.parent||this.addChild(S)}for(var E=b;E<this._glyphs.length;++E)this.removeChild(this._glyphs[E]);if(this._textWidth=u*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var C=0;C<b;C++)this._glyphs[C].x-=this._textWidth*this.anchor.x,this._glyphs[C].y-=this._textHeight*this.anchor.y;this._maxLineHeight=p*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var r={},s=t.getElementsByTagName("info")[0],h=t.getElementsByTagName("common")[0],u=t.getElementsByTagName("page")[0].getAttribute("file"),l=(0,a.getResolutionOfUrl)(u,o.default.RESOLUTION);r.font=s.getAttribute("face"),r.size=parseInt(s.getAttribute("size"),10),r.lineHeight=parseInt(h.getAttribute("lineHeight"),10)/l,r.chars={};for(var c=t.getElementsByTagName("char"),d=0;d<c.length;d++){var f=c[d],p=parseInt(f.getAttribute("id"),10),g=new n.Rectangle(parseInt(f.getAttribute("x"),10)/l+i.frame.x/l,parseInt(f.getAttribute("y"),10)/l+i.frame.y/l,parseInt(f.getAttribute("width"),10)/l,parseInt(f.getAttribute("height"),10)/l);r.chars[p]={xOffset:parseInt(f.getAttribute("xoffset"),10)/l,yOffset:parseInt(f.getAttribute("yoffset"),10)/l,xAdvance:parseInt(f.getAttribute("xadvance"),10)/l,kerning:{},texture:new n.Texture(i.baseTexture,g)}}for(var v=t.getElementsByTagName("kerning"),_=0;_<v.length;_++){var m=v[_],y=parseInt(m.getAttribute("first"),10)/l,x=parseInt(m.getAttribute("second"),10)/l,b=parseInt(m.getAttribute("amount"),10)/l;r.chars[x]&&(r.chars[x].kerning[y]=b)}return e.fonts[r.font]=r,r},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(n.Container);e.default=u,u.fonts={}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=i(0);i(6);var s=new r.Matrix,a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var a=i.vertices;a[0]=a[6]=t._width*-t.anchor.x,a[1]=a[3]=t._height*-t.anchor.y,a[2]=a[4]=t._width*(1-t.anchor.x),a[5]=a[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((a=i.uvs)[0]=a[6]=-t.anchor.x,a[1]=a[3]=-t.anchor.y,a[2]=a[4]=1-t.anchor.x,a[5]=a[7]=1-t.anchor.y),i.upload();var o=t._texture,h=o.baseTexture,u=t.tileTransform.localTransform,l=t.uvTransform,c=h.isPowerOfTwo&&o.frame.width===h.width&&o.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==n.WRAP_MODES.CLAMP:h.wrapMode===n.WRAP_MODES.CLAMP&&(h.wrapMode=n.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var f=o.width,p=o.height,g=t._width,v=t._height;s.set(u.a*f/g,u.b*f/v,u.c*p/g,u.d*p/v,u.tx/g,u.ty/v),s.invert(),c?s.prepend(l.mapCoord):(d.uniforms.uMapCoord=l.mapCoord.toArray(!0),d.uniforms.uClampFrame=l.uClampFrame,d.uniforms.uClampOffset=l.uClampOffset),d.uniforms.uTransform=s.toArray(!0),d.uniforms.uColor=r.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,h.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(o),e.setBlendMode(r.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.ObjectRenderer);e.default=a,r.WebGLRenderer.registerPlugin("tilingSprite",a)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),a=i(23),o=(r=a)&&r.__esModule?r:{default:r};var h=new s.Point,u=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return a.tileTransform=new s.TransformStatic,a._width=r,a._height=n,a._canvasPattern=null,a.uvTransform=i.transform||new s.TextureMatrix(i),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,a=e.baseTexture,h=a.resolution,u=this.tilePosition.x/this.tileScale.x%e._frame.width*h,l=this.tilePosition.y/this.tileScale.y%e._frame.height*h;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new s.CanvasRenderTarget(e._frame.width,e._frame.height,h);16777215!==this.tint?(this.tintedTexture=o.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(a.source,-e._frame.x*h,-e._frame.y*h),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/h,this.tileScale.y/h);var d=this.anchor.x*-this._width,f=this.anchor.y*-this._height;this.uvRespectAnchor?(i.translate(u,l),i.fillRect(-u+d,-l+f,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h)):(i.translate(u+d,l+f),i.fillRect(-u,-l,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e=this._width,i=this._height,r=-e*this.anchor._x;if(h.x>=r&&h.x<r+e){var n=-i*this.anchor._y;if(h.y>=n&&h.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(s.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=s.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,a){return new e(s.Texture.fromImage(t,n,a),i,r)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(s.Sprite);e.default=u},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var s=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof n.Texture?i[0]:i[0].texture));return s._textures=null,s._durations=null,s.textures=i,s._autoUpdate=!1!==r,s.animationSpeed=1,s.loop=!0,s.onComplete=null,s.onFrameChange=null,s.onLoop=null,s._currentTime=0,s.playing=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&n.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i?this.onLoop():this.animationSpeed<0&&this.currentFrame>i&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromFrame(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromImage(t[r]));return new e(i)},r(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof n.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(n.Sprite);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var n=new r.Rectangle,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0;t&&(o=t instanceof r.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,s=o.baseTexture._canvasRenderTarget.resolution,a=o.frame):(i=e.rootContext,(a=n).width=this.renderer.width,a.height=this.renderer.height);var h=a.width*s,u=a.height*s,l=new r.CanvasRenderTarget(h,u),c=i.getImageData(a.x*s,a.y*s,h,u);return l.context.putImageData(c,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0;return t&&(o=t instanceof r.RenderTexture?t:e.generateTexture(t)),o?(i=o.baseTexture._canvasRenderTarget.context,s=o.baseTexture._canvasRenderTarget.resolution,a=o.frame):(i=e.rootContext,(a=n).width=e.width,a.height=e.height),i.getImageData(0,0,a.width*s,a.height*s).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,r.CanvasRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1));var n=new r.Rectangle,s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=!1,h=void 0,u=!1;t&&(t instanceof r.RenderTexture?h=t:(h=this.renderer.generateTexture(t),u=!0)),h?(s=(i=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=h.frame,o=!1):(s=(i=this.renderer.rootRenderTarget).resolution,o=!0,(a=n).width=i.size.width,a.height=i.size.height);var l=a.width*s,c=a.height*s,d=new r.CanvasRenderTarget(l,c);if(i){e.bindRenderTarget(i);var f=new Uint8Array(4*l*c),p=e.gl;p.readPixels(a.x*s,a.y*s,l,c,p.RGBA,p.UNSIGNED_BYTE,f);var g=d.context.getImageData(0,0,l,c);g.data.set(f),d.context.putImageData(g,0,0),o&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return u&&h.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,s=void 0,a=void 0,o=void 0,h=!1;t&&(t instanceof r.RenderTexture?o=t:(o=this.renderer.generateTexture(t),h=!0)),o?(s=(i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,a=o.frame):(s=(i=this.renderer.rootRenderTarget).resolution,(a=n).width=i.size.width,a.height=i.size.height);var u=a.width*s,l=a.height*s,c=new Uint8Array(4*u*l);if(i){e.bindRenderTarget(i);var d=e.gl;d.readPixels(a.x*s,a.y*s,u,l,d.RGBA,d.UNSIGNED_BYTE,c)}return h&&o.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e.default=s,r.WebGLRenderer.registerPlugin("extract",s)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(132);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return s(r).default}});var n=i(131);function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return s(n).default}})},function(t,e,i){"use strict";e.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(1)),n=a(i(30)),s=a(i(56));function a(t){return t&&t.__esModule?t:{default:t}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,s.default);var o=100,h=0,u=0,l=2,c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width=o+"px",i.style.height=o+"px",i.style.position="absolute",i.style.top=h+"px",i.style.left=u+"px",i.style.zIndex=l,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=e.length-1;i>=0;i--)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var s=0;s<this.children.length;s++){var a=this.children[s];if(a.renderId!==this.renderId)a._accessibleActive=!1,r.utils.removeItems(this.children,s,1),this.div.removeChild(a._accessibleDiv),this.pool.push(a._accessibleDiv),a._accessibleDiv=null,s--,0===this.children.length&&this.deactivate();else{n=a._accessibleDiv;var o=a.hitArea,h=a.worldTransform;a.hitArea?(n.style.left=(h.tx+o.x*h.a)*e+"px",n.style.top=(h.ty+o.y*h.d)*i+"px",n.style.width=o.width*h.a*e+"px",n.style.height=o.height*h.d*i+"px"):(o=a.getBounds(),this.capHitArea(o),n.style.left=o.x*e+"px",n.style.top=o.y*i+"px",n.style.width=o.width*e+"px",n.style.height=o.height*i+"px")}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width=o+"px",e.style.height=o+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=l,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleTitle||t.accessibleHint||(e.title="displayObject "+this.tabIndex),t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(){this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e.default=c,r.WebGLRenderer.registerPlugin("accessibility",c),r.CanvasRenderer.registerPlugin("accessibility",c)},function(t,e,i){"use strict";e.__esModule=!0;var r=i(56);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return s(r).default}});var n=i(134);function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return s(n).default}})},function(t,e,i){"use strict";function r(t){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e)))}e.__esModule=!0,e.default=function(t){var e=t.mesh,i=t.particles,n=t.extras,s=t.filters,a=t.prepare,o=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return r("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return r("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return r("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return r("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return r("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return r("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return r("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return r("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return r("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return r("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return r("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return r("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return r("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return r("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){r("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){r("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){r("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){r("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){r("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){r("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){r("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return r("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=function(e){var i=u[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){r("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})},c=0;c<u.length;c++)l(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){r("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return r("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}});n&&Object.defineProperties(n,{TextureTransform:{get:function(){return r("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}});t.DisplayObject.prototype.generateTexture=function(t,e,i){return r("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return r("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return r("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,n){this.legacyRenderer.render(t,this,i,e,!n),r("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return r("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return r("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return r("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return r("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,r("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});t.Text.prototype.setText=function(t){this.text=t,r("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return r("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return r("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return r("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return r("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,r("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return r("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return r("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){r("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){r("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var n=0;n<e.length;++n)if(e[n].match(/(px|pt|em|%)/)){i=n,this._fontSize=e[n];break}this._fontWeight="normal";for(var s=0;s<i;++s)if(e[s].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[s];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var a=i+1;a<e.length;++a)this._fontFamily+=e[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,r("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),r("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return r("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(s,{AbstractFilter:{get:function(){return r("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return r("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return r("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),s.AlphaFilter}}}),t.utils.uuid=function(){return r("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return r("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var d=!0;Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(r("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=t},get:function(){return d}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(t,e){return r("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this});a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return r("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(o.Loader){var f=o.Resource,p=o.Loader;Object.defineProperties(f.prototype,{isJson:{get:function(){return r("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===f.TYPE.JSON}},isXml:{get:function(){return r("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===f.TYPE.XML}},isImage:{get:function(){return r("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===f.TYPE.IMAGE}},isAudio:{get:function(){return r("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===f.TYPE.AUDIO}},isVideo:{get:function(){return r("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===f.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return r("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return r("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return r("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return r("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return r("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=i(1),s=i(2);var a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseTexture=e,this.textures={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,s.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE,s=this.baseTexture.sourceScale;i-e<r&&i<this._frameKeys.length;){var a=this._frameKeys[i],o=this._frames[a],h=o.frame;if(h){var u=null,l=null,c=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,d=new n.Rectangle(0,0,Math.floor(c.w*s)/this.resolution,Math.floor(c.h*s)/this.resolution);u=o.rotated?new n.Rectangle(Math.floor(h.x*s)/this.resolution,Math.floor(h.y*s)/this.resolution,Math.floor(h.h*s)/this.resolution,Math.floor(h.w*s)/this.resolution):new n.Rectangle(Math.floor(h.x*s)/this.resolution,Math.floor(h.y*s)/this.resolution,Math.floor(h.w*s)/this.resolution,Math.floor(h.h*s)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new n.Rectangle(Math.floor(o.spriteSourceSize.x*s)/this.resolution,Math.floor(o.spriteSourceSize.y*s)/this.resolution,Math.floor(h.w*s)/this.resolution,Math.floor(h.h*s)/this.resolution)),this.textures[a]=new n.Texture(this.baseTexture,u,d,l,o.rotated?2:0),n.Texture.addToCache(this.textures[a],a)}i++}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(14),s=(r=n)&&r.__esModule?r:{default:r},a=i(0);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldAlpha,n=t.transform.worldTransform,s=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),i.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1),e.setBlendMode(t.blendMode);for(var o=0;o<t.graphicsData.length;o++){var h=t.graphicsData[o],u=h.shape,l=h._fillTint,c=h._lineTint;if(i.lineWidth=h.lineWidth,h.type===a.SHAPES.POLY){i.beginPath(),this.renderPolygon(u.points,u.closed,i);for(var d=0;d<h.holes.length;d++)this.renderPolygon(h.holes[d].points,!0,i);h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===a.SHAPES.RECT)(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fillRect(u.x,u.y,u.width,u.height)),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(u.x,u.y,u.width,u.height));else if(h.type===a.SHAPES.CIRC)i.beginPath(),i.arc(u.x,u.y,u.radius,0,2*Math.PI),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(h.type===a.SHAPES.ELIP){var f=2*u.width,p=2*u.height,g=u.x-f/2,v=u.y-p/2;i.beginPath();var _=f/2*.5522848,m=p/2*.5522848,y=g+f,x=v+p,b=g+f/2,w=v+p/2;i.moveTo(g,w),i.bezierCurveTo(g,w-m,b-_,v,b,v),i.bezierCurveTo(b+_,v,y,w-m,y,w),i.bezierCurveTo(y,w+m,b+_,x,b,x),i.bezierCurveTo(b-_,x,g,w+m,g,w),i.closePath(),h.fill&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(h.type===a.SHAPES.RREC){var T=u.x,S=u.y,E=u.width,C=u.height,P=u.radius,O=Math.min(E,C)/2|0;P=P>O?O:P,i.beginPath(),i.moveTo(T,S+P),i.lineTo(T,S+C-P),i.quadraticCurveTo(T,S+C,T+P,S+C),i.lineTo(T+E-P,S+C),i.quadraticCurveTo(T+E,S+C,T+E,S+C-P),i.lineTo(T+E,S+P),i.quadraticCurveTo(T+E,S,T+E-P,S),i.lineTo(T+P,S),i.quadraticCurveTo(T,S,T,S+P),i.closePath(),(h.fillColor||0===h.fillColor)&&(i.globalAlpha=h.fillAlpha*r,i.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.fill()),h.lineWidth&&(i.globalAlpha=h.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,r=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var s=t.graphicsData[n],a=0|s.fillColor,o=0|s.lineColor;s._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255,s._lineTint=((o>>16&255)/255*e*255<<16)+((o>>8&255)/255*i*255<<8)+(255&o)/255*r*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)i.lineTo(t[2*r],t[2*r+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e.default=o,s.default.registerPlugin("graphics",o)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=t.shape,n=r.x,h=r.y,u=void 0,l=void 0;t.type===a.SHAPES.CIRC?(u=r.radius,l=r.radius):(u=r.width,l=r.height);if(0===u||0===l)return;var c=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),d=2*Math.PI/c;if(t.fill){var f=(0,o.hex2rgb)(t.fillColor),p=t.fillAlpha,g=f[0]*p,v=f[1]*p,_=f[2]*p,m=e.points,y=e.indices,x=m.length/6;y.push(x);for(var b=0;b<c+1;b++)m.push(n,h,g,v,_,p),m.push(n+Math.sin(d*b)*u,h+Math.cos(d*b)*l,g,v,_,p),y.push(x++,x++);y.push(x-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<c+1;T++)t.points.push(n+Math.sin(d*T)*u,h+Math.cos(d*T)*l);(0,s.default)(t,e,i),t.points=w}};var r,n=i(16),s=(r=n)&&r.__esModule?r:{default:r},a=i(0),o=i(2)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var a=t.shape,o=a.x,u=a.y,l=a.width,c=a.height,d=a.radius,f=[];if(f.push(o,u+d),h(o,u+c-d,o,u+c,o+d,u+c,f),h(o+l-d,u+c,o+l,u+c,o+l,u+c-d,f),h(o+l,u+d,o+l,u,o+l-d,u,f),h(o+d,u,o,u,o,u+d+1e-10,f),t.fill){for(var p=(0,s.hex2rgb)(t.fillColor),g=t.fillAlpha,v=p[0]*g,_=p[1]*g,m=p[2]*g,y=e.points,x=e.indices,b=y.length/6,w=(0,r.default)(f,null,2),T=0,S=w.length;T<S;T+=3)x.push(w[T]+b),x.push(w[T]+b),x.push(w[T+1]+b),x.push(w[T+2]+b),x.push(w[T+2]+b);for(var E=0,C=f.length;E<C;E++)y.push(f[E],f[++E],v,_,m,g)}if(t.lineWidth){var P=t.points;t.points=f,(0,n.default)(t,e,i),t.points=P}};var r=a(i(28)),n=a(i(16)),s=i(2);function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){return t+(e-t)*i}function h(t,e,i,r,n,s){for(var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],h=0,u=0,l=0,c=0,d=0,f=0,p=0,g=0;p<=20;++p)h=o(t,i,g=p/20),u=o(e,r,g),l=o(i,n,g),c=o(r,s,g),d=o(h,l,g),f=o(u,c,g),a.push(d,f);return a}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=t.shape,n=r.x,o=r.y,h=r.width,u=r.height;if(t.fill){var l=(0,a.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,g=e.points,v=e.indices,_=g.length/6;g.push(n,o),g.push(d,f,p,c),g.push(n+h,o),g.push(d,f,p,c),g.push(n,o+u),g.push(d,f,p,c),g.push(n+h,o+u),g.push(d,f,p,c),v.push(_,_,_+1,_+2,_+3,_+3)}if(t.lineWidth){var m=t.points;t.points=[n,o,n+h,o,n+h,o+u,n,o+u,n,o],(0,s.default)(t,e,i),t.points=m}};var r,n=i(16),s=(r=n)&&r.__esModule?r:{default:r},a=i(2)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){t.points=t.shape.points.slice();var a=t.points;if(t.fill&&a.length>=6){for(var o=[],h=t.holes,u=0;u<h.length;u++){var l=h[u];o.push(a.length/2),a=a.concat(l.points)}var c=e.points,d=e.indices,f=a.length/2,p=(0,n.hex2rgb)(t.fillColor),g=t.fillAlpha,v=p[0]*g,_=p[1]*g,m=p[2]*g,y=(0,s.default)(a,o,2);if(!y)return;for(var x=c.length/6,b=0;b<y.length;b+=3)d.push(y[b]+x),d.push(y[b]+x),d.push(y[b+1]+x),d.push(y[b+2]+x),d.push(y[b+2]+x);for(var w=0;w<f;w++)c.push(a[2*w],a[2*w+1],v,_,m,g)}t.lineWidth>0&&(0,r.default)(t,e,i)};var r=a(i(16)),n=i(2),s=a(i(28));function a(t){return t&&t.__esModule?t:{default:t}}},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(12);var s=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);e.default=s},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),s=(r=n)&&r.__esModule?r:{default:r};var a=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=s.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=s.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new s.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=i(2),n=i(0),s=f(i(19)),a=f(i(18)),o=f(i(144)),h=f(i(143)),u=f(i(142)),l=f(i(141)),c=f(i(140)),d=f(i(139));function f(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new h.default(this.gl)},e.prototype.destroy=function(){s.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,s=t._webGL[this.CONTEXT_UID];s&&t.dirty===s.dirty||(this.updateGraphics(t),s=t._webGL[this.CONTEXT_UID]);var a=this.primitiveShader;e.bindShader(a),e.state.setBlendMode(t.blendMode);for(var o=0,h=s.data.length;o<h;o++){var u=(n=s.data[o]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,r.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var r=0;r<i.data.length;r++)this.graphicsDataPool.push(i.data[r]);i.data.length=0,i.lastIndex=0}for(var s=void 0,a=void 0,o=i.lastIndex;o<t.graphicsData.length;o++){var h=t.graphicsData[o];s=this.getWebGLData(i,0),h.nativeLines&&h.lineWidth&&(a=this.getWebGLData(i,0,!0),i.lastIndex++),h.type===n.SHAPES.POLY&&(0,u.default)(h,s,a),h.type===n.SHAPES.RECT?(0,l.default)(h,s,a):h.type===n.SHAPES.CIRC||h.type===n.SHAPES.ELIP?(0,d.default)(h,s,a):h.type===n.SHAPES.RREC&&(0,c.default)(h,s,a),i.lastIndex++}this.renderer.bindVao(null);for(var f=0;f<i.data.length;f++)(s=i.data[f]).dirty&&s.upload()},e.prototype.getWebGLData=function(t,e,i){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new o.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(s.default);e.default=p,a.default.registerPlugin("graphics",p)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i,r,n,s,a,o){var h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],u=0,l=0,c=0,d=0,f=0;h.push(t,e);for(var p=1,g=0;p<=20;++p)c=(l=(u=1-(g=p/20))*u)*u,f=(d=g*g)*g,h.push(c*t+3*l*g*i+3*u*d*n+f*a,c*e+3*l*g*r+3*u*d*s+f*o);return h}},function(t,e,i){"use strict";e.__esModule=!0;var r=p(i(15)),n=p(i(24)),s=p(i(7)),a=p(i(59)),o=p(i(27)),h=i(4),u=i(2),l=i(0),c=p(i(31)),d=p(i(146)),f=p(i(14));function p(t){return t&&t.__esModule?t:{default:t}}var g=void 0,v=new h.Matrix,_=new h.Point,m=new Float32Array(4),y=new Float32Array(4),x=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=i,r.lineColor=0,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=l.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new c.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.currentPath)if(this.currentPath.shape.points.length){var r=new h.Polygon(this.currentPath.shape.points.slice(-2));r.closed=!1,this.drawShape(r)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},e.prototype.moveTo=function(t,e){var i=new h.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){return this.currentPath.shape.points.push(t,e),this.dirty++,this},e.prototype.quadraticCurveTo=function(t,e,i,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,s=0,a=0;0===n.length&&this.moveTo(0,0);for(var o=n[n.length-2],h=n[n.length-1],u=1;u<=20;++u){var l=u/20;s=o+(t-o)*l,a=h+(e-h)*l,n.push(s+(t+(i-t)*l-s)*l,a+(e+(r-e)*l-a)*l)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,e,i,r,n,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,o=a[a.length-2],h=a[a.length-1];return a.length-=2,(0,d.default)(o,h,t,e,i,r,n,s,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var s=this.currentPath.shape.points,a=s[s.length-2],o=s[s.length-1]-e,h=a-t,u=r-e,l=i-t,c=Math.abs(o*l-h*u);if(c<1e-8||0===n)s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e);else{var d=o*o+h*h,f=u*u+l*l,p=o*u+h*l,g=n*Math.sqrt(d)/c,v=n*Math.sqrt(f)/c,_=g*p/d,m=v*p/f,y=g*l+v*h,x=g*u+v*o,b=h*(v+_),w=o*(v+_),T=l*(g+m),S=u*(g+m),E=Math.atan2(w-x,b-y),C=Math.atan2(S-x,T-y);this.arc(y+t,x+e,n,E,C,h*u>l*o)}return this.dirty++,this},e.prototype.arc=function(t,e,i,r,n){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===n)return this;!s&&n<=r?n+=l.PI_2:s&&r<=n&&(r+=l.PI_2);var a=n-r,o=40*Math.ceil(Math.abs(a)/l.PI_2);if(0===a)return this;var h=t+Math.cos(r)*i,u=e+Math.sin(r)*i,c=this.currentPath?this.currentPath.shape.points:null;c?c[c.length-2]===h&&c[c.length-1]===u||c.push(h,u):(this.moveTo(h,u),c=this.currentPath.shape.points);for(var d=a/(2*o),f=2*d,p=Math.cos(d),g=Math.sin(d),v=o-1,_=v%1/v,m=0;m<=v;++m){var y=d+r+f*(m+_*m),x=Math.cos(y),b=-Math.sin(y);c.push((p*x+g*b)*i+t,(p*-b+g*x)*i+e)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new h.Rectangle(t,e,i,r)),this},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new h.RoundedRectangle(t,e,i,r,n)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new h.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new h.Ellipse(t,e,i,r)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof h.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var n=new h.Polygon(e);return n.closed=i,this.drawShape(n),this},e.prototype.drawStar=function(t,e,i,r,n){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var a=-1*Math.PI/2+s,o=2*i,h=l.PI_2/o,u=[],c=0;c<o;c++){var d=c%2?n:r,f=c*h+a;u.push(t+d*Math.cos(f),e+d*Math.sin(f))}return this.drawPolygon(u)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===l.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new o.default(new s.default(s.default.WHITE)));var i=this._spriteRect;if(16777215===this.tint)i.tint=this.graphicsData[0].fillColor;else{var r=m,n=y;(0,u.hex2rgb)(this.graphicsData[0].fillColor,r),(0,u.hex2rgb)(this.tint,n),r[0]*=n[0],r[1]*=n[1],r[2]*=n[2],i.tint=(0,u.rgb2hex)(r)}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,_);for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fill&&(r.shape&&r.shape.contains(_.x,_.y))){if(r.holes)for(var n=0;n<r.holes.length;n++){if(r.holes[n].contains(_.x,_.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,s=0,a=0,o=0,h=0,u=0;u<this.graphicsData.length;u++){var c=this.graphicsData[u],d=c.type,f=c.lineWidth;if(n=c.shape,d===l.SHAPES.RECT||d===l.SHAPES.RREC)s=n.x-f/2,a=n.y-f/2,o=n.width+f,h=n.height+f,t=s<t?s:t,e=s+o>e?s+o:e,i=a<i?a:i,r=a+h>r?a+h:r;else if(d===l.SHAPES.CIRC)s=n.x,a=n.y,o=n.radius+f/2,h=n.radius+f/2,t=s-o<t?s-o:t,e=s+o>e?s+o:e,i=a-h<i?a-h:i,r=a+h>r?a+h:r;else if(d===l.SHAPES.ELIP)s=n.x,a=n.y,o=n.width+f/2,h=n.height+f/2,t=s-o<t?s-o:t,e=s+o>e?s+o:e,i=a-h<i?a-h:i,r=a+h>r?a+h:r;else for(var p=n.points,g=0,v=0,_=0,m=0,y=0,x=0,b=0,w=0,T=0;T+2<p.length;T+=2)s=p[T],a=p[T+1],g=p[T+2],v=p[T+3],_=Math.abs(g-s),m=Math.abs(v-a),h=f,(o=Math.sqrt(_*_+m*m))<1e-9||(x=(h/o*_+m)/2,w=(v+a)/2,t=(b=(g+s)/2)-(y=(h/o*m+_)/2)<t?b-y:t,e=b+y>e?b+y:e,i=w-x<i?w-x:i,r=w+x>r?w+x:r)}else t=0,e=0,i=0,r=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+S,this._localBounds.minY=i-S,this._localBounds.maxY=r+S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new a.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t);return this.graphicsData.push(e),e.type===l.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),r=n.default.create(i.width,i.height,t,e);g||(g=new f.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(v),v.invert(),v.tx-=i.x,v.ty-=i.y,g.render(this,r,!0,v);var a=s.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return a.baseTexture.resolution=e,a.baseTexture.update(),a},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var r in this._webgl)for(var n=0;n<this._webgl[r].data.length;++n)this._webgl[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},e}(r.default);e.default=x,x._SPRITE_TEXTURE=null},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=t.width,i=t.height,r=t.getContext("2d"),n=r.getImageData(0,0,e,i).data,s=n.length,a={top:null,left:null,right:null,bottom:null},o=void 0,h=void 0,u=void 0;for(o=0;o<s;o+=4)0!==n[o+3]&&(h=o/4%e,u=~~(o/4/e),null===a.top&&(a.top=u),null===a.left?a.left=h:h<a.left&&(a.left=h),null===a.right?a.right=h+1:a.right<h&&(a.right=h+1),null===a.bottom?a.bottom=u:a.bottom<u&&(a.bottom=u));e=a.right-a.left,i=a.bottom-a.top+1;var l=r.getImageData(a.left,a.top,e,i);return{height:i,width:e,data:l}}},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=f(i(27)),s=f(i(7)),a=i(4),o=i(2),h=i(0),u=f(i(3)),l=f(i(61)),c=f(i(60)),d=f(i(148));function f(t){return t&&t.__esModule?t:{default:t}}var p={texture:!0,children:!1,baseTexture:!0},g=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n||document.createElement("canvas")).width=3,n.height=3;var o=s.default.fromCanvas(n,u.default.SCALE_MODE,"text");o.orig=new a.Rectangle,o.trim=new a.Rectangle;var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,o));return s.default.addToCache(h._texture,h._texture.baseTexture.textureCacheIds[0]),h.canvas=n,h.context=h.canvas.getContext("2d"),h.resolution=u.default.RESOLUTION,h._text=null,h._style=null,h._styleListener=null,h._font="",h.text=i,h.style=r,h.localStyleID=-1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=c.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,s=r.height,a=r.lines,o=r.lineHeight,h=r.lineWidths,u=r.maxLineWidth,l=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,s)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var d=void 0,f=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,v=0;v<a.length;v++)d=e.strokeThickness/2,f=e.strokeThickness/2+v*o+l.ascent,"right"===e.align?d+=u-h[v]:"center"===e.align&&(d+=(u-h[v])/2),e.fill&&(this.drawLetterSpacing(a[v],d+p+e.padding,f+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(a[v],d+p+e.padding,f+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,a);for(var _=0;_<a.length;_++)d=e.strokeThickness/2,f=e.strokeThickness/2+_*o+l.ascent,"right"===e.align?d+=u-h[_]:"center"===e.align&&(d+=(u-h[_])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[_],d+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(a[_],d+e.padding,f+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style.letterSpacing;if(0!==n)for(var s=String.prototype.split.call(t,""),a=e,o=0,h="";o<t.length;)h=s[o++],r?this.context.strokeText(h,a,i):this.context.fillText(h,a,i),a+=this.context.measureText(h).width+n;else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0)}var i=this._texture,r=this._style,n=r.trim?0:r.padding,s=i.baseTexture;s.hasLoaded=!0,s.resolution=this.resolution,s.realWidth=t.width,s.realHeight=t.height,s.width=t.width/this.resolution,s.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),s.emit("update",s),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,n=void 0,s=void 0,a=this.canvas.width/this.resolution,o=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,d=1;d<c;++d)l.push(d/c);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,0,a/2,o),r=(u.length+1)*e.length,n=0;for(var f=0;f<e.length;f++){n+=1;for(var p=0;p<u.length;p++)s="number"==typeof l[p]?l[p]/e.length+f/e.length:n/r,i.addColorStop(s,u[p]),n++}}else{i=this.context.createLinearGradient(0,o/2,a,o/2),r=u.length+1,n=1;for(var g=0;g<u.length;g++)s="number"==typeof l[g]?l[g]:n/r,i.addColorStop(s,u[g]),n++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},p,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof l.default?this._style=t:this._style=new l.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(n.default);e.default=g},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var r=document.createElement("canvas");r.width=1,r.height=1,e=s.default.createContext(r)}var n=e.createShader(e.FRAGMENT_SHADER);for(;;){var h=a.replace(/%forloop%/gi,o(t));if(e.shaderSource(n,h),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext();return t};var r,n=i(5),s=(r=n)&&r.__esModule?r:{default:r};var a=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function o(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){var i=a;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(textureId == "+i+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var r=new s.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),n=[],o=0;o<e;o++)n[o]=o;return r.bind(),r.uniforms.uSamplers=n,r};var r,n=i(12),s=(r=n)&&r.__esModule?r:{default:r};i(6);var a=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var r=i(0)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var r=i(0)},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(155),s=(r=n)&&r.__esModule?r:{default:r};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,s.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(0),s=i(3),a=(r=s)&&r.__esModule?r:{default:r};var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=a.default.GC_MAX_IDLE,this.checkCountMax=a.default.GC_MAX_CHECK_COUNT,this.mode=a.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){for(var s=0,a=0;a<e.length;a++)null!==e[a]&&(e[s++]=e[a]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(5),s=i(0),a=i(17),o=(r=a)&&r.__esModule?r:{default:r},h=i(2);var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e){e=0;for(var h=0;h<a.length;++h)if(a[h]===t){e=h;break}}a[e]=t,i.activeTexture(i.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(r){var l=new o.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,u=l.texture}else(u=new n.GLTexture(this.gl,null,null,null,null)).bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===s.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===s.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===s.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var i=this.renderer.CONTEXT_UID,r=t._glTextures,n=t._glRenderTargets;if(r[i]&&(this.renderer.unbindTexture(t),r[i].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[i],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,h.removeItems)(this._managedTextures,s,1)}n&&n[i]&&(n[i].destroy(),delete n[i])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e.default=u},function(t,e,i){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,i){var r=t.identity();return r.translate(e.x/i.width,e.y/i.height),r.scale(i.width,i.height),r},e.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var r=t.identity();r.translate(e.x/i.width,e.y/i.height);var n=i.width/e.width,s=i.height/e.height;return r.scale(n,s),r},e.calculateSpriteMatrix=function(t,e,i,n){var s=n._texture.orig,a=t.set(i.width,0,0,i.height,e.x,e.y),o=n.worldTransform.copy(r.Matrix.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/s.width,1/s.height),a.translate(n.anchor.x,n.anchor.y),a};var r=i(4)},function(t,e,i){"use strict";e.__esModule=!0;var r=l(i(13)),n=l(i(17)),s=l(i(62)),a=i(4),o=l(i(12)),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(159)),u=l(i(26));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=function t(){c(this,t),this.renderTarget=null,this.sourceFrame=new a.Rectangle,this.destinationFrame=new a.Rectangle,this.filters=[],this.target=null,this.resolution=1},f=function(t){function e(i){c(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.gl=r.renderer.gl,r.quad=new s.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=i.view.width,r._screenHeight=i.view.height,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var n=new d;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[n]},this.filterData=r}var s=r.stack[++r.index],a=r.stack[0].destinationFrame;s||(s=r.stack[r.index]=new d);var o=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,h=e[0].resolution,u=0|e[0].padding,l=o?i.screen:t.filterArea||t.getBounds(!0),c=s.sourceFrame,f=s.destinationFrame;c.x=(l.x*h|0)/h,c.y=(l.y*h|0)/h,c.width=(l.width*h|0)/h,c.height=(l.height*h|0)/h,o||(r.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(a),c.pad(u)),f.width=c.width,f.height=c.height;var p=this.getPotRenderTarget(i.gl,c.width,c.height,h);s.target=t,s.filters=e,s.resolution=h,s.renderTarget=p,p.setFrame(f,c),i.bindRenderTarget(p),p.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var r=i.filters;if(1===r.length)r[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var n=i.renderTarget,s=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);s.setFrame(i.destinationFrame,i.sourceFrame),s.clear();var a=0;for(a=0;a<r.length-1;++a){r[a].apply(this,n,s,!0,i);var o=n;n=s,s=o}r[a].apply(this,n,e.renderTarget,!1,i),this.freePotRenderTarget(n),this.freePotRenderTarget(s)}t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,r){var n=this.renderer,s=n.gl,a=t.glShaders[n.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey])||(a=new o.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a,this.managedFilters.push(t)):(a=t.glShaders[n.CONTEXT_UID]=new o.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(a)),n.bindVao(this.quad.vao),n.bindRenderTarget(i),r&&(s.disable(s.SCISSOR_TEST),n.clear(),s.enable(s.SCISSOR_TEST)),i===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(a);var h=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=h,this.syncUniforms(a,t),n.state.setBlendMode(t.blendMode),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),s.bindTexture(s.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,r=e.uniforms,n=1,s=void 0;if(t.uniforms.filterArea){s=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=s.renderTarget.size.width,a[1]=s.renderTarget.size.height,a[2]=s.sourceFrame.x,a[3]=s.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.filterClamp){s=s||this.filterData.stack[this.filterData.index];var o=t.uniforms.filterClamp;o[0]=0,o[1]=0,o[2]=(s.sourceFrame.width-1)/s.renderTarget.size.width,o[3]=(s.sourceFrame.height-1)/s.renderTarget.size.height,t.uniforms.filterClamp=o}for(var h in i){var u=i[h].type;if("sampler2d"===u&&0!==r[h]){if(r[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(r[h].baseTexture,n);else{t.uniforms[h]=n;var l=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],l.activeTexture(l.TEXTURE0+n),r[h].texture.bind()}n++}else if("mat3"===u)void 0!==r[h].a?t.uniforms[h]=r[h].toArray(!0):t.uniforms[h]=r[h];else if("vec2"===u)if(void 0!==r[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=r[h].x,c[1]=r[h].y,t.uniforms[h]=c}else t.uniforms[h]=r[h];else"float"===u?t.uniforms.data[h].value!==i[h]&&(t.uniforms[h]=r[h]):t.uniforms[h]=r[h]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return h.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<i.length;r++)t||i[r].glShaders[e.CONTEXT_UID].destroy(),delete i[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,r){var s="screen";i*=r,(e*=r)===this._screenWidth&&i===this._screenHeight||(s=(65535&(e=u.default.nextPow2(e)))<<16|65535&(i=u.default.nextPow2(i))),this.pool[s]||(this.pool[s]=[]);var a=this.pool[s].pop();if(!a){var o=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),a=new n.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=r,a.defaultFrame.width=a.size.width=e/r,a.defaultFrame.height=a.size.height=i/r,a},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){var e=t.size.width*t.resolution,i=t.size.height*t.resolution,r="screen";e===this._screenWidth&&i===this._screenHeight||(r=(65535&e)<<16|65535&i),this.pool[r].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(r.default);e.default=f},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(13),s=(r=n)&&r.__esModule?r:{default:r};var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.stencilMaskStack=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){s.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(s.default);e.default=a},function(t,e){var i,r,n=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:s}catch(t){i=s}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var h,u=[],l=!1,c=-1;function d(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&f())}function f(){if(!l){var t=o(d);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new p(t,e)),1!==u.length||l||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e,i){var r=a(t),n=a(e);return Object.assign(r,n)};var r,n=i(5);var s=((r=n)&&r.__esModule?r:{default:r}).default.shader.defaultValue;function a(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},r=void 0,n=t.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<n.length;a++){var o=n[a].trim();if(o.indexOf("uniform")>-1){var h=o.split(" "),u=h[1],l=h[2],c=1;l.indexOf("[")>-1&&(l=(r=l.split(/\[|]/))[0],c*=Number(r[1])),l.match(e)||(i[l]={value:s(u,c),name:l,type:u})}}return i}},function(t,e,i){"use strict";e.__esModule=!0;var r=s(i(13)),n=s(i(65));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new n.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(i.root?i.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);e.default=a},function(t,e,i){"use strict";e.__esModule=!0;var r=f(i(19)),n=f(i(18)),s=f(i(22)),a=f(i(152)),o=f(i(151)),h=f(i(150)),u=f(i(3)),l=i(2),c=f(i(5)),d=f(i(26));function f(t){return t&&t.__esModule?t:{default:t}}var p=0,g=0,v=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=u.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=d.default.nextPow2(r.size);n*=2)r.buffers.push(new h.default(4*n*r.vertByteSize));r.indices=(0,s.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var a=0;a<r.size;a++)r.groups[a]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,o.default)(this.MAX_TEXTURES,t)),this.shader=(0,a.default)(t,this.MAX_TEXTURES),this.indexBuffer=c.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var r=this.vertexBuffers[i]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=d.default.nextPow2(this.currentIndex),r=d.default.log2(i),n=this.buffers[r],s=this.sprites,a=this.groups,o=n.float32View,h=n.uint32View,f=this.boundTextures,v=this.renderer.boundTextures,_=this.renderer.textureGC.count,m=0,y=void 0,x=void 0,b=1,w=0,T=a[0],S=void 0,E=void 0,C=l.premultiplyBlendMode[s[0]._texture.baseTexture.premultipliedAlpha?1:0][s[0].blendMode];T.textureCount=0,T.start=0,T.blend=C,p++;var P=void 0;for(P=0;P<e;++P){var O=v[P];O._enabled!==p?(f[P]=O,O._virtalBoundId=P,O._enabled=p):f[P]=this.renderer.emptyTextures[P]}for(p++,P=0;P<this.currentIndex;++P){var M=s[P];y=M._texture.baseTexture;var A=l.premultiplyBlendMode[Number(y.premultipliedAlpha)][M.blendMode];if(C!==A&&(C=A,x=null,w=e,p++),x!==y&&(x=y,y._enabled!==p)){if(w===e&&(p++,T.size=P-T.start,w=0,(T=a[b++]).blend=C,T.textureCount=0,T.start=P),y.touched=_,-1===y._virtalBoundId)for(var I=0;I<e;++I){var k=(I+g)%e,R=f[k];if(R._enabled!==p){g++,R._virtalBoundId=-1,y._virtalBoundId=k,f[k]=y;break}}y._enabled=p,T.textureCount++,T.ids[w]=y._virtalBoundId,T.textures[w++]=y}if(S=M.vertexData,E=M._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;o[m]=(S[0]*D|0)/D,o[m+1]=(S[1]*D|0)/D,o[m+5]=(S[2]*D|0)/D,o[m+6]=(S[3]*D|0)/D,o[m+10]=(S[4]*D|0)/D,o[m+11]=(S[5]*D|0)/D,o[m+15]=(S[6]*D|0)/D,o[m+16]=(S[7]*D|0)/D}else o[m]=S[0],o[m+1]=S[1],o[m+5]=S[2],o[m+6]=S[3],o[m+10]=S[4],o[m+11]=S[5],o[m+15]=S[6],o[m+16]=S[7];h[m+2]=E[0],h[m+7]=E[1],h[m+12]=E[2],h[m+17]=E[3];var L=Math.min(M.worldAlpha,1),N=L<1&&y.premultipliedAlpha?(0,l.premultiplyTint)(M._tintRGB,L):M._tintRGB+(255*L<<24);h[m+3]=h[m+8]=h[m+13]=h[m+18]=N,o[m+4]=o[m+9]=o[m+14]=o[m+19]=y._virtalBoundId,m+=20}if(T.size=P-T.start,u.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var F=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),j=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,F.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,F.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,F.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);F.aTextureId&&j.addAttribute(B,F.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=j}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(P=0;P<e;++P)v[P]._virtalBoundId=-1;for(P=0;P<b;++P){for(var U=a[P],z=U.textureCount,V=0;V<z;V++)x=U.textures[V],v[U.ids[V]]!==x&&this.renderer.bindTexture(x,U.ids[V],!0),x._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(r.default);e.default=v,n.default.registerPlugin("sprite",v)},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,a.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over");return t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var r,n=i(0),s=i(66),a=(r=s)&&r.__esModule?r:{default:r}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0);var n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,r=t.transform.worldTransform,n=e.resolution;e.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var s=t.graphicsData[n],a=s.shape;if(s.type===r.SHAPES.POLY){var o=a.points;e.moveTo(o[0],o[1]);for(var h=1;h<o.length/2;h++)e.lineTo(o[2*h],o[2*h+1]);o[0]===o[o.length-2]&&o[1]===o[o.length-1]&&e.closePath()}else if(s.type===r.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(s.type===r.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(s.type===r.SHAPES.ELIP){var u=2*a.width,l=2*a.height,c=a.x-u/2,d=a.y-l/2,f=u/2*.5522848,p=l/2*.5522848,g=c+u,v=d+l,_=c+u/2,m=d+l/2;e.moveTo(c,m),e.bezierCurveTo(c,m-p,_-f,d,_,d),e.bezierCurveTo(_+f,d,g,m-p,g,m),e.bezierCurveTo(g,m+p,_+f,v,_,v),e.bezierCurveTo(_-f,v,c,m+p,c,m),e.closePath()}else if(s.type===r.SHAPES.RREC){var y=a.x,x=a.y,b=a.width,w=a.height,T=a.radius,S=Math.min(b,w)/2|0;T=T>S?S:T,e.moveTo(y,x+T),e.lineTo(y,x+w-T),e.quadraticCurveTo(y,x+w,y+T,x+w),e.lineTo(y+b-T,x+w),e.quadraticCurveTo(y+b,x+w,y+b,x+w-T),e.lineTo(y+b,x+T),e.quadraticCurveTo(y+b,x,y+b-T,x),e.lineTo(y+T,x),e.quadraticCurveTo(y,x,y,x+T),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var r=o(i(14)),n=i(0),s=i(4),a=o(i(23));function o(t){return t&&t.__esModule?t:{default:t}}var h=new s.Matrix,u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,r=e._frame.width,o=e._frame.height,u=t.transform.worldTransform,l=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===n.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==d&&(i.context[i.smoothProperty]=d),e.trim?(l=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(l=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(u.copy(h),u=h,s.GroupD8.matrixAppendRotationInv(u,e.rotate,l,c),l=0,c=0),l-=r/2,c-=o/2,i.roundPixels?(i.context.setTransform(u.a,u.b,u.c,u.d,u.tx*i.resolution|0,u.ty*i.resolution|0),l|=0,c|=0):i.context.setTransform(u.a,u.b,u.c,u.d,u.tx*i.resolution,u.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=a.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,r*f,o*f,l*i.resolution,c*i.resolution,r*i.resolution,o*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,r*f,o*f,l*i.resolution,c*i.resolution,r*i.resolution,o*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e.default=u,r.default.registerPlugin("sprite",u)},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fn=e,this.context=i,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=t?null:e,this.previous=null,e},t}();e.default=r},function(t,e,i){"use strict";e.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=o(i(3)),s=i(0),a=o(i(169));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=new a.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.UPDATE_PRIORITY.NORMAL;return this._addListener(new a.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*n.default.TARGET_FPMS*this.speed;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e.default=h},function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,i,o){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?s(a(t),function(a){var o=encodeURIComponent(r(a))+i;return n(t[a])?s(t[a],function(t){return o+encodeURIComponent(r(t))}).join(e):o+encodeURIComponent(r(t[a]))}).join(e):o?encodeURIComponent(r(o))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var a=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,i,s){e=e||"&",i=i||"=";var a={};if("string"!=typeof t||0===t.length)return a;var o=/\+/g;t=t.split(e);var h=1e3;s&&"number"==typeof s.maxKeys&&(h=s.maxKeys);var u=t.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,d,f,p,g=t[l].replace(o,"%20"),v=g.indexOf(i);v>=0?(c=g.substr(0,v),d=g.substr(v+1)):(c=g,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),r(a,f)?n(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,i){"use strict";e.decode=e.parse=i(172),e.encode=e.stringify=i(171)},function(t,e,i){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){(function(t,r){var n;!function(s){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var a="object"==typeof r&&r;a.global!==a&&a.window!==a&&a.self;var o,h=2147483647,u=36,l=1,c=26,d=38,f=700,p=72,g=128,v="-",_=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},b=u-l,w=Math.floor,T=String.fromCharCode;function S(t){throw new RangeError(x[t])}function E(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function C(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+E((t=t.replace(y,".")).split("."),e).join(".")}function P(t){for(var e,i,r=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function O(t){return E(t,function(t){var e="";return t>65535&&(e+=T((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=T(t)}).join("")}function M(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,i){var r=0;for(t=i?w(t/f):t>>1,t+=w(t/e);t>b*c>>1;r+=u)t=w(t/b);return w(r+(b+1)*t/(t+d))}function I(t){var e,i,r,n,s,a,o,d,f,_,m,y=[],x=t.length,b=0,T=g,E=p;for((i=t.lastIndexOf(v))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&S("not-basic"),y.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<x;){for(s=b,a=1,o=u;n>=x&&S("invalid-input"),((d=(m=t.charCodeAt(n++))-48<10?m-22:m-65<26?m-65:m-97<26?m-97:u)>=u||d>w((h-b)/a))&&S("overflow"),b+=d*a,!(d<(f=o<=E?l:o>=E+c?c:o-E));o+=u)a>w(h/(_=u-f))&&S("overflow"),a*=_;E=A(b-s,e=y.length+1,0==s),w(b/e)>h-T&&S("overflow"),T+=w(b/e),b%=e,y.splice(b++,0,T)}return O(y)}function k(t){var e,i,r,n,s,a,o,d,f,_,m,y,x,b,E,C=[];for(y=(t=P(t)).length,e=g,i=0,s=p,a=0;a<y;++a)(m=t[a])<128&&C.push(T(m));for(r=n=C.length,n&&C.push(v);r<y;){for(o=h,a=0;a<y;++a)(m=t[a])>=e&&m<o&&(o=m);for(o-e>w((h-i)/(x=r+1))&&S("overflow"),i+=(o-e)*x,e=o,a=0;a<y;++a)if((m=t[a])<e&&++i>h&&S("overflow"),m==e){for(d=i,f=u;!(d<(_=f<=s?l:f>=s+c?c:f-s));f+=u)E=d-_,b=u-_,C.push(T(M(_+E%b,0))),d=w(E/b);C.push(T(M(d,0))),s=A(i,x,r==n),i=0,++r}++i,++e}return C.join("")}o={version:"1.4.1",ucs2:{decode:P,encode:O},decode:I,encode:k,toASCII:function(t){return C(t,function(t){return m.test(t)?"xn--"+k(t):t})},toUnicode:function(t){return C(t,function(t){return _.test(t)?I(t.slice(4).toLowerCase()):t})}},void 0===(n=function(){return o}.call(e,i,e,t))||(t.exports=n)}()}).call(this,i(175)(t),i(36))},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n};var r=i(0)},function(t,e,i){"use strict";t.exports=function(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var s=n-(i=e+i>n?n-e:i);for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}}},function(t,e,i){"use strict";function r(t,e){if(t&&e)for(var i=Object.keys(e),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}e.__esModule=!0,e.mixin=r,e.delayMixin=function(t,e){n.push(t,e)},e.performMixins=function(){for(var t=0;t<n.length;t+=2)r(n[t],n[t+1]);n.length=0};var n=[]},function(t,e,i){"use strict";e.__esModule=!0,e.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t){if(s.default.tablet||s.default.phone)return 4;return t};var r,n=i(30),s=(r=n)&&r.__esModule?r:{default:r}},function(t,e,i){t.exports={compileProgram:i(83),defaultValue:i(79),extractAttributes:i(82),extractUniforms:i(80),generateUniformAccessObject:i(77),setPrecision:i(78),mapSize:i(81),mapType:i(32)}},function(t,e,i){var r=i(85);function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,t.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,r,n,s){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:s||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(i||0)):r.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,i){var r=i(83),n=i(82),s=i(80),a=i(78),o=i(77),h=function(t,e,i,h,u){this.gl=t,h&&(e=a(e,h),i=a(i,h)),this.program=r(t,e,i,u),this.attributes=n(t,this.program),this.uniformData=s(t,this.program),this.uniforms=o(t,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=h},function(t,e,i){var r=i(84),n=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};n.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(t,e,i,r){this.bind();var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},n.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},n.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(t,e,i,s){var a=r.fromData(t,null,e,i);a.enableNearestScaling(),a.enableWrapClamp();var o=new n(t,e,i);return o.enableTexture(a),o.unbind(),o},n.createFloat32=function(t,e,i,s){var a=new r.fromData(t,s,e,i);a.enableNearestScaling(),a.enableWrapClamp();var o=new n(t,e,i);return o.enableTexture(a),o.unbind(),o},t.exports=n},function(t,e){var i=new ArrayBuffer(0),r=function(t,e,r,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(t,e,i){i||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e){t.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},function(t,e,i){"use strict";e.__esModule=!0;var r=i(0);var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=n,this.height=s,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t}();e.default=n},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(35),s=(r=n)&&r.__esModule?r:{default:r},a=i(0);var o=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof s.default){for(var n=[],o=0,h=i.length;o<h;o++)n.push(i[o].x,i[o].y);i=n}this.closed=!0,this.points=i,this.type=a.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,s=r-1;n<r;s=n++){var a=this.points[2*n],o=this.points[2*n+1],h=this.points[2*s],u=this.points[2*s+1];o>e!=u>e&&t<(e-o)/(u-o)*(h-a)+a&&(i=!i)}return i},t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(33),s=(r=n)&&r.__esModule?r:{default:r},a=i(0);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.width=r,this.height=n,this.type=a.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new s.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();e.default=o},function(t,e,i){"use strict";e.__esModule=!0;var r,n=i(33),s=(r=n)&&r.__esModule?r:{default:r},a=i(0);var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=i,this.radius=r,this.type=a.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new s.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e.default=o},function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},function(t,e,i){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n){var s=r[n];t.requestAnimationFrame=t[s+"RequestAnimationFrame"],t.cancelAnimationFrame=t[s+"CancelAnimationFrame"]||t[s+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout(function(){i=Date.now(),t(performance.now())},r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,i(36))},function(t,e,i){"use strict";var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,o=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var u in i=Object(arguments[h]))n.call(i,u)&&(o[u]=i[u]);if(r){a=r(i);for(var l=0;l<a.length;l++)s.call(i,a[l])&&(o[a[l]]=i[a[l]])}}return o}},function(t,e,i){"use strict";var r,n=i(195),s=(r=n)&&r.__esModule?r:{default:r};Object.assign||(Object.assign=s.default)},function(t,e,i){"use strict";i(196),i(194),i(193),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,i){"use strict";(function(t){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var r=i(197);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var n=i(1);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var s,a=i(136),o=(s=a)&&s.__esModule?s:{default:s},h=_(i(135)),u=_(i(133)),l=_(i(55)),c=_(i(123)),d=_(i(116)),f=_(i(114)),p=_(i(110)),g=_(i(105)),v=_(i(100));function _(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}n.utils.mixins.performMixins();var m=f.shared||null;e.accessibility=h,e.extract=u,e.extras=l,e.filters=c,e.interaction=d,e.loaders=f,e.mesh=p,e.particles=g,e.prepare=v,e.loader=m,"function"==typeof o.default&&(0,o.default)(e),t.PIXI=e}).call(this,i(36))},function(t,e,i){const r=i(198),n=i(96),s=i(92),a=i(91),o=i(89);t.exports=class{constructor(){this.layers=[],this.layerBackground=null,this.images={brush:{},grain:{}},this.brushes=a,this.setup(),this.setSize(1200,900)}async load({brushImagePath:t}){await this.loadBrushTextures(t)}setup(){n.setup(),r.settings.FILTER_RESOLUTION=1,r.settings.PRECISION_FRAGMENT=r.PRECISION.HIGH,r.settings.MIPMAP_TEXTURES=!0,r.settings.WRAP_MODE=r.WRAP_MODES.REPEAT,r.utils.skipHello(),this.app=new r.Application({width:window.innerWidth,height:window.innerHeight,antialias:!1}),this.app.renderer.roundPixels=!1,this.brush=this.brushes.pencil,this.brushColor={r:0,g:0,b:0},this.brushSize=4,this.brushOpacity=.9,this.sketchpaneContainer=new r.Container,this.sketchpaneContainer.name="sketchpaneContainer",this.layerContainer=new r.Container,this.layerContainer.name="layerContainer",this.sketchpaneContainer.addChild(this.layerContainer),this.strokeContainer=new r.Container,this.strokeContainer.name="static",this.liveStrokeContainer=new r.Container,this.liveStrokeContainer.name="live",this.layerContainer.addChild(this.liveStrokeContainer),this.offscreenContainer=new r.Container,this.offscreenContainer.name="offscreen",this.offscreenContainer.renderable=!1,this.layerContainer.addChild(this.offscreenContainer),this.eraseMask=new r.Sprite,this.eraseMask.name="eraseMask",this.app.stage.addChild(this.sketchpaneContainer),this.sketchpaneContainer.scale.set(1),this.counter=0,this.strokeInput=[],this.strokePath=void 0,this.lastStaticIndex=0}setSize(t,e){this.width=t,this.height=e;let i=(new r.Graphics).beginFill(0,1).drawRect(0,0,this.width,this.height).endFill();this.layerContainer.mask=i,this.sketchpaneContainer.addChild(i);let n=(new r.Graphics).beginFill(16777215).drawRect(0,0,this.width,this.height).endFill();n.name="background",this.layerContainer.addChild(n),this.layerBackground=n,this.eraseMask.texture=r.RenderTexture.create(this.width,this.height),this.centerContainer()}newLayer(){let t=this.layers.length,e={index:t,name:`Layer ${t+1}`,sprite:new r.Sprite(r.RenderTexture.create(this.width,this.height))};return e.sprite.name=e.name,this.layerContainer.position.set(0,0),this.layerContainer.addChild(e.sprite),this.centerContainer(),this.layers[t]=e,this.layers[t]}newLayerFrom(t){this.renderToLayer(new r.Sprite.from(t),this.newLayer())}centerContainer(){this.sketchpaneContainer.pivot.set(this.width/2,this.height/2),this.sketchpaneContainer.position.set(Math.floor(this.app.renderer.width/2),Math.floor(this.app.renderer.height/2))}resize(){this.app.renderer.resize(window.innerWidth,window.innerHeight),this.sketchpaneContainer.position.set(Math.floor(this.app.renderer.width/2),Math.floor(this.app.renderer.height/2))}async loadBrushTextures(t){let e=[...new Set(Object.values(this.brushes).map(t=>t.settings.brushImage))],i=[...new Set(Object.values(this.brushes).map(t=>t.settings.grainImage))],n=[];for(let[s,a]of[[e,this.images.brush],[i,this.images.grain]])for(let e of s){let i=r.Sprite.fromImage(`${t}/${e}.png`);i.renderable=!1,a[e]=i;let s=i._texture.baseTexture;s.hasLoaded?n.push(Promise.resolve(i)):s.isLoading?n.push(new Promise((t,e)=>{s.on("loaded",e=>t(s)),s.on("error",t=>e(t))})):n.push(Promise.reject(new Error))}await Promise.all(n)}renderToLayer(t,e,i){this.app.renderer.render(t,e.sprite.texture,i)}stampStroke(t,e){this.renderToLayer(t,e,!1)}disposeContainer(t){for(let e of t.children)e.destroy({children:!0,texture:!1,baseTexture:!1});t.removeChildren()}addStrokeNode(t,e,i,n,s,a,h,u,l,c,d,f,p,g){let v=new r.Sprite.from(this.images.brush[d.settings.brushImage].texture),_=n-(1-u)*n*d.settings.pressureSize;_*=c/90*d.settings.tiltSize*3+1;let m,y=1-(1-u)*d.settings.pressureOpacity;y*=(1-c/90*d.settings.tiltOpacity)*s,m=d.settings.azimuth?l*Math.PI/180-this.sketchpaneContainer.rotation:0-this.sketchpaneContainer.rotation;let x=45*Math.PI/180,b=Math.abs(_*Math.sin(x))+Math.abs(_*Math.cos(x)),w=Math.ceil(b);a-=w/2,h-=w/2,v.x=Math.floor(a),v.y=Math.floor(h),v.width=w,v.height=w;let T=a-v.x,S=h-v.y,E=_/v.width,C=[T,S],P=[E,E],O=this.images.grain[d.settings.grainImage];this.offscreenContainer.addChild(O);let M=new o(O);M.filterArea=this.app.screen,M.uniforms.uRed=t,M.uniforms.uGreen=e,M.uniforms.uBlue=i,M.uniforms.uOpacity=y,M.uniforms.uRotation=m,M.uniforms.uBleed=Math.pow(1-u,1.6)*d.settings.pressureBleed,M.uniforms.uGrainScale=d.settings.scale,M.uniforms.uGrainRotation=d.settings.rotation,M.uniforms.u_x_offset=f*d.settings.movement,M.uniforms.u_y_offset=p*d.settings.movement,M.uniforms.u_offset_px=C,M.uniforms.u_node_scale=P,M.padding=1,v.filters=[M],g.addChild(v)}pointerdown(t){this.pointerDown=!0,this.strokeInput=[],this.strokePath=new n.Path,this.lastStaticIndex=0,this.lastSpacing=void 0,t.target===this.app.view&&(this.addMouseEventAsPoint(t),this.isErasing?this.liveStrokeContainer.parent&&this.liveStrokeContainer.parent.removeChild(this.liveStrokeContainer):this.layerContainer.addChild(this.liveStrokeContainer),this.renderLive(),this.app.view.style.cursor="crosshair")}pointermove(t){this.pointerDown&&(this.addMouseEventAsPoint(t),this.renderLive(),this.app.view.style.cursor="crosshair")}pointerup(t){t.target===this.app.view&&this.pointerDown&&(this.addMouseEventAsPoint(t),this.layerContainer.addChild(this.liveStrokeContainer),this.renderLive(!0),this.disposeContainer(this.liveStrokeContainer),this.offscreenContainer.removeChildren()),this.pointerDown=!1,this.app.view.style.cursor="auto"}getInterpolatedStrokeInput(t,e){let i=[],r=[];for(let t=0;t<e.segments.length;t++)e.segments[t].location&&r.push(e.segments[t].location.offset);let n=0,a=Math.max(1,this.brushSize*this.brush.settings.spacing),o={x:0,y:0};this.brush.settings.randomOffset&&(o.x=Math.floor(100*Math.random()),o.y=Math.floor(100*Math.random())),null==this.lastSpacing&&(this.lastSpacing=a);let h=a-this.lastSpacing,u=0,l=e.length+-(this.lastSpacing+e.length);for(u=h;u<e.length;u+=a){let a=e.getPointAt(u);for(var c=n;c<r.length;c++)r[c]<u&&(n=c);let h=(u-r[n])/(r[n+1]-r[n]),d=s.lerp(t[n].pressure,t[n+1].pressure,h),f=s.lerp(t[n].tiltAngle,t[n+1].tiltAngle,h),p=s.lerp(t[n].tilt,t[n+1].tilt,h);i.push([this.isErasing?0:this.brushColor.r,this.isErasing?0:this.brushColor.g,this.isErasing?0:this.brushColor.b,this.brushSize,this.brushOpacity,a.x,a.y,d,f,p,this.brush,o.x,o.y]),l=u}return this.lastSpacing=e.length-l,i}renderStroke(t,e,i){let r=this.getInterpolatedStrokeInput(t,e);for(let t of r)this.addStrokeNode(...t,i)}addMouseEventAsPoint(t){let e=t.pressure,i=(t.x-this.sketchpaneContainer.x)/this.sketchpaneContainer.scale.x+this.width/2,r=(t.y-this.sketchpaneContainer.y)/this.sketchpaneContainer.scale.y+this.height/2,a=s.rotatePoint(i,r,this.width/2,this.height/2,-this.sketchpaneContainer.rotation),o=s.calcTiltAngle(t.tiltX,t.tiltY);this.strokeInput.push({x:a.x,y:a.y,pressure:e,tiltAngle:o.angle,tilt:o.tilt}),this.strokeInput=this.strokeInput.slice(Math.max(0,this.lastStaticIndex-2),this.strokeInput.length),this.strokePath=new n.Path(this.strokeInput),this.strokePath.smooth({type:"catmull-rom",factor:.5})}renderLive(t=!1){let e=this.strokeInput.length;if(t){let t=this.strokeInput.length-1,e=this.lastStaticIndex,i=t;return i+1-e<=1?void console.warn("1 or fewer points remaining"):(this.renderStroke(this.strokeInput.slice(e,i+1),new n.Path(this.strokePath.segments.slice(e,i+1)),this.strokeContainer),this.isErasing?this.updateMask(this.strokeContainer,!0):this.stampStroke(this.strokeContainer,this.layers[this.layer]),this.disposeContainer(this.strokeContainer),void this.offscreenContainer.removeChildren())}if(e>=3){let t=this.strokeInput.length-1,e=t-2,i=t-1;this.renderStroke(this.strokeInput.slice(e,i+1),new n.Path(this.strokePath.segments.slice(e,i+1)),this.strokeContainer),this.isErasing?this.updateMask(this.strokeContainer):this.stampStroke(this.strokeContainer,this.layers[this.layer]),this.disposeContainer(this.strokeContainer),this.offscreenContainer.removeChildren(),this.lastStaticIndex=i}if(e>=2){this.disposeContainer(this.liveStrokeContainer);let t=this.strokeInput.length-1,e=t-1,i=t;if(this.isErasing);else{let t=this.lastSpacing;this.renderStroke(this.strokeInput.slice(e,i+1),new n.Path(this.strokePath.segments.slice(e,i+1)),this.liveStrokeContainer),this.lastSpacing=t}}}updateMask(t,e=!1){let i=this.layers[this.layer];if(!i.sprite.mask){this.layerContainer.addChild(this.eraseMask);let t=(new r.Graphics).beginFill(16711680,1).drawRect(0,0,this.width,this.height).endFill();this.app.renderer.render(t,this.eraseMask.texture,!0),i.sprite.mask=this.eraseMask}if(this.app.renderer.render(t,this.eraseMask.texture,!1),e){let t=r.RenderTexture.create(this.width,this.height);this.app.renderer.render(i.sprite,t,!0,i.sprite.transform.worldTransform.invert(),!0);let e=new r.Sprite.from(t);this.app.renderer.render(e,i.sprite.texture,!0),e.destroy({texture:!0,baseTexture:!1}),i.sprite.mask=null,this.layerContainer.removeChild(this.eraseMask)}}saveLayer(t){return t=null==t?this.layer:t,this.app.renderer.plugins.extract.image(this.layers[t].sprite)}clearLayer(t){t||(t=this.layer),this.renderToLayer(this.strokeContainer,this.layers[t],!0)}setLayer(t){if(this.pointerDown)return;let e=this.layers[t].sprite;this.layerContainer.setChildIndex(this.layerBackground,0);let i=1;for(let t of this.layers)this.layerContainer.setChildIndex(t.sprite,i),t.sprite===e&&(this.layer=i-1,this.layerContainer.setChildIndex(this.offscreenContainer,++i),this.layerContainer.setChildIndex(this.liveStrokeContainer,++i)),i++}getIsErasing(){return this.isErasing}setIsErasing(t){this.pointerDown||(this.isErasing=t)}}},function(t,e,i){const r=i(199);t.exports=r}]);